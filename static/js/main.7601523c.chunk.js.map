{"version":3,"sources":["components/tooltip.js","App.js","index.js"],"names":["Tooltip","features","this","props","className","map","feature","i","key","layer","id","React","Component","mapboxgl","accessToken","stops","options","name","description","property","presenceProperty","myDeckLayer","MapboxLayer","coordinateSystem","COORDINATE_SYSTEM","LNGLAT_OFFSETS","type","ArcLayer","data","arcData","getSourceColor","d","getTargetColor","strokeWidth","getSourcePosition","START","getTargetPosition","END","pickable","auto_highlight","App","mapRef","createRef","handleViewportChange","viewport","setState","state","handleGeocoderViewportChange","transitionDuration","onViewportChange","width","height","etc","active","popupInfo","length","ReactDOM","render","createElement","tooltipContainer","unmountComponentAtNode","setFill","document","Map","container","current","style","center","zoom","pitch","minpitchZoom","maxBounds","on","addLayer","addSource","presence_data","source","forEach","marker","markerEl","innerHTML","Marker","offset","setLngLat","geometry","coordinates","addTo","addEventListener","flyTo","myFeatures","queryRenderedFeatures","layers","console","log","PitchToggle","bearing","minpitchzoom","_bearing","_pitch","_minpitchzoom","_map","_this","_btn","onclick","getPitch","getZoom","easeTo","_container","appendChild","parentNode","removeChild","undefined","addControl","MapboxGeocoder","placeholder","popup","Popup","closeButton","closeOnClick","e","getCanvas","cursor","prob_intro","properties","point","lngLat","setHTML","remove","setPaintProperty","ref","mapboxApiAccessToken","option","onChange","checked","stop","backgroundColor","toLocaleString","getElementById"],"mappings":"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","file":"static/js/main.7601523c.chunk.js","sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\n\nexport default class Tooltip extends React.Component {\n\n  static propTypes = {\n    features: PropTypes.array.isRequired\n  };\n\n  render() {\n    const { features } = this.props;\n\n    const renderFeature = (feature, i) => {\n      return (\n        <div key={i}>\n          <strong className='mr3'>{feature.layer['source-layer']}:</strong>\n          <span className='color-gray-light'>{feature.layer.id}</span>\n        </div>\n      )\n    };\n\n    return (\n      <div className=\"flex-parent-inline flex-parent--center-cross flex-parent--column absolute bottom\">\n        <div className=\"flex-child px12 py12 bg-gray-dark color-white shadow-darken10 round txt-s w240 clip txt-truncate\">\n          {features.map(renderFeature)}\n        </div>\n        <span className=\"flex-child color-gray-dark triangle triangle--d\"></span>\n      </div>\n    );\n  }\n}\n","// import React, {useState, useRef, useCallback, Component }  from 'react';\n// import logo from './logo.svg';\n// import MapGL, { NavigationControl, Marker, Popup } from \"react-map-gl\";\n// import { render } from \"react-dom\";\n// import { Icon } from \"semantic-ui-react\";\n// import ReactMapboxGl from 'react-mapbox-gl';\n// import DeckGL from '@deck.gl/react';\n// import {StaticMap} from 'react-map-gl';\n// import StylesControl from 'mapbox-gl-controls/lib/styles';\n// import CompassControl from 'mapbox-gl-controls/lib/compass';\n// import RulerControl from 'mapbox-gl-controls/lib/ruler';\n// import ZoomControl from 'mapbox-gl-controls/lib/zoom';\n// import LanguageControl from 'mapbox-gl-controls/lib/language';\n// import InspectControl from 'mapbox-gl-controls/lib/inspect';\n// import TooltipControl from 'mapbox-gl-controls/lib/tooltip';\n// import { json } from 'd3-request';\nimport React from 'react';\nimport './App.css';\nimport mapboxgl from 'mapbox-gl'\nimport * as MapboxGeocoder from '@mapbox/mapbox-gl-geocoder';\nimport data from './pandemic_output.json'\nimport presence_data from './presence_pandemic.json'\nimport Tooltip from './components/tooltip'\nimport ReactDOM from 'react-dom'\nimport {ArcLayer} from '@deck.gl/layers';\nimport {MapboxLayer} from '@deck.gl/mapbox';\nimport \"mapbox-gl/dist/mapbox-gl.css\";\nimport  \"react-map-gl-geocoder/dist/mapbox-gl-geocoder.css\";\nimport arcData from './arcs.json'\nimport {COORDINATE_SYSTEM} from '@deck.gl/core';\n\nmapboxgl.accessToken = 'pk.eyJ1IjoiZ2NtaWxsYXIiLCJhIjoiY2pvcDhrbGl4MDFvaTNrczR0d2hxcjdnNSJ9.JYgBw6y2pEq_AEAOCaoQpw'\nconst MAPBOX_TOKEN = 'pk.eyJ1IjoiZ2NtaWxsYXIiLCJhIjoiY2pvcDhrbGl4MDsFvaTNrczR0d2hxcjdnNSJ9.JYgBw6y2pEq_AEAOCaoQpw'\n\nvar stops =  [\n  [0.0, 'rgba(0,0,0, 0.36)'],\n  [0.001, 'rgba(125,0,100, 0.36)'],\n  //[0.1, 'rgba(255,240,168, 0.5)'],\t\n  //[0.2, 'rgba(254,225,134, 0.5)'],\t\t\t\n  //[0.3, 'rgba(254,201,101, 0.6)'], \n  //[0.4, 'rgba(253,170,72, 0.6)'],\t\n  //[0.5, 'rgba(224,0,97, 0.72)'], \n  //[0.6, 'rgba(252,90,45, 0.7)'],\t\t\n  //[0.7, 'rgba(236,46,33, 0.8)'], \n  //[0.8, 'rgba(211,15,32, 0.8)'],\t\n  //[0.9, 'rgba(176,0,38, 0.8)'],\n  [1.0, 'rgba(255,25,25, 0.9)']\n]\n\nconst options = [{\n  name: '2000',\n  description: 'Introduction Probability',\n  property: 'Agg Prob Intro 2000',\n  presenceProperty: 'Presence 2000',\n  stops: stops\n}, {\n  name: '2001',\n  description: 'Introduction Probability',\n  property: 'Agg Prob Intro 2001',\n  presenceProperty: 'Presence 2001',\n  stops: stops\n}, {\n  name: '2002',\n  description: 'Introduction Probability',\n  property: 'Agg Prob Intro 2002',\n  presenceProperty: 'Presence 2002',\n  stops: stops\n}, {\n  name: '2003',\n  description: 'Introduction Probability',\n  property: 'Agg Prob Intro 2003',\n  presenceProperty: 'Presence 2003',\n  stops: stops\n}, {\n  name: '2004',\n  description: 'Introduction Probability',\n  property: 'Agg Prob Intro 2004',\n  presenceProperty: 'Presence 2004',\n  stops: stops\n}, {\n  name: '2005',\n  description: 'Introduction Probability',\n  property: 'Agg Prob Intro 2005',\n  presenceProperty: 'Presence 2005',\n  stops: stops\n}, {\n  name: '2006',\n  description: 'Introduction Probability',\n  property: 'Agg Prob Intro 2006',\n  presenceProperty: 'Presence 2006',\n  stops: stops\n}, {\n  name: '2007',\n  description: 'Introduction Probability',\n  property: 'Agg Prob Intro 2007',\n  presenceProperty: 'Presence 2007',\n  stops: stops\n}, {\n  name: '2008',\n  description: 'Introduction Probability',\n  property: 'Agg Prob Intro 2008',\n  presenceProperty: 'Presence 2008',\n  stops: stops\n}, {\n  name: '2009',\n  description: 'Introduction Probability',\n  property: 'Agg Prob Intro 2009',\n  presenceProperty: 'Presence 2009',\n  stops: stops\n}, {\n  name: '2010',\n  description: 'Introduction Probability',\n  property: 'Agg Prob Intro 2010',\n  presenceProperty: 'Presence 2010',\n  stops: stops\n}, {\n  name: '2011',\n  description: 'Introduction Probability',\n  property: 'Agg Prob Intro 2011',\n  presenceProperty: 'Presence 2011',\n  stops: stops\n}, {\n  name: '2012',\n  description: 'Introduction Probability',\n  property: 'Agg Prob Intro 2012',\n  presenceProperty: 'Presence 2012',\n  stops: stops\n}, {\n  name: '2013',\n  description: 'Introduction Probability',\n  property: 'Agg Prob Intro 2013',\n  presenceProperty: 'Presence 2013',\n  stops: stops\n}, {\n  name: '2014',\n  description: 'Introduction Probability',\n  property: 'Agg Prob Intro 2014',\n  presenceProperty: 'Presence 2014',\n  stops: stops\n}, {\n  name: '2015',\n  description: 'Introduction Probability',\n  property: 'Agg Prob Intro 2015',\n  presenceProperty: 'Presence 2015',\n  stops: stops\n}, {\n  name: '2016',\n  description: 'Introduction Probability',\n  property: 'Agg Prob Intro 2016',\n  presenceProperty: 'Presence 2016',\n  stops: stops\n}, {\n  name: '2017',\n  description: 'Introduction Probability',\n  property: 'Agg Prob Intro 2017',\n  presenceProperty: 'Presence 2017',\n  stops: stops\n}, {\n  name: '2018',\n  description: 'Introduction Probability',\n  property: 'Agg Prob Intro 2018',\n  presenceProperty: 'Presence 2018',\n  stops: stops\n}, {\n  name: '2019',\n  description: 'Introduction Probability',\n  property: 'Agg Prob Intro 2019',\n  presenceProperty: 'Presence 2019',\n  stops: stops\n}, {\n  name: '2020',\n  description: 'Introduction Probability',\n  property: 'Agg Prob Intro 2020',\n  presenceProperty: 'Presence 2020',\n  stops: stops\n}, {\n  name: '2021',\n  description: 'Introduction Probability',\n  property: 'Agg Prob Intro 2021',\n  presenceProperty: 'Presence 2021',\n  stops: stops\n}, {\n  name: '2022',\n  description: 'Introduction Probability',\n  property: 'Agg Prob Intro 2022',\n  presenceProperty: 'Presence 2022',\n  stops: stops\n}, {\n  name: '2023',\n  description: 'Introduction Probability',\n  property: 'Agg Prob Intro 2023',\n  presenceProperty: 'Presence 2023',\n  stops: stops\n}, {\n  name: '2024',\n  description: 'Introduction Probability',\n  property: 'Agg Prob Intro 2024',\n  presenceProperty: 'Presence 2024',\n  stops: stops\n}, {\n  name: '2025',\n  description: 'Introduction Probability',\n  property: 'Agg Prob Intro 2025',\n  presenceProperty: 'Presence 2025',\n  stops: stops\n}, {\n  name: '2026',\n  description: 'Introduction Probability',\n  property: 'Agg Prob Intro 2026',\n  presenceProperty: 'Presence 2026',\n  stops: stops\n}, {\n  name: '2027',\n  description: 'Introduction Probability',\n  property: 'Agg Prob Intro 2027',\n  presenceProperty: 'Presence 2027',\n  stops: stops\n}, {\n  name: '2028',\n  description: 'Introduction Probability',\n  property: 'Agg Prob Intro 2028',\n  presenceProperty: 'Presence 2028',\n  stops: stops\n}\n]\n\n// const markerList = [{\n//   name: '2000',\n//   description: 'Presence',\n//   property: 'Presence 2000'\n// }, {\n//   name: '2001',\n//   description: 'Presence',\n//   property: 'Presence 2001'\n// }, {\n//   name: '2002',\n//   description: 'Presence',\n//   property: 'Presence 2002'\n// }, {\n//   name: '2003',\n//   description: 'Presence',\n//   property: 'Presence 2003'\n// }, {\n//   name: '2004',\n//   description: 'Presence',\n//   property: 'Presence 2004'\n// }, {\n//   name: '2005',\n//   description: 'Presence',\n//   property: 'Presence 2005'\n// }, {\n//   name: '2006',\n//   description: 'Presence',\n//   property: 'Presence 2006'\n// }, {\n//   name: '2007',\n//   description: 'Presence',\n//   property: 'Presence 2007'\n// }, {\n//   name: '2008',\n//   description: 'Presence',\n//   property: 'Presence 2008'\n// }, {\n//   name: '2009',\n//   description: 'Presence',\n//   property: 'Presence 2009'\n// }, {\n//   name: '2010',\n//   description: 'Presence',\n//   property: 'Presence 2010'\n// }, {\n//   name: '2011',\n//   description: 'Presence',\n//   property: 'Presence 2011'\n// }, {\n//   name: '2012',\n//   description: 'Presence',\n//   property: 'Presence 2012'\n// }, {\n//   name: '2013',\n//   description: 'Presence',\n//   property: 'Presence 2013'\n// }, {\n//   name: '2014',\n//   description: 'Presence',\n//   property: 'Presence 2014'\n// }, {\n//   name: '2015',\n//   description: 'Presence',\n//   property: 'Presence 2015'\n// }, {\n//   name: '2016',\n//   description: 'Presence',\n//   property: 'Presence 2016'\n// }, {\n//   name: '2017',\n//   description: 'Presence',\n//   property: 'Presence 2017'\n// }, {\n//   name: '2018',\n//   description: 'Presence',\n//   property: 'Presence 2018'\n// }, {\n//   name: '2019',\n//   description: 'Presence',\n//   property: 'Presence 2019'\n// }, \n/*{\n  name: '2013',\n  description: 'Presence',\n  property: 'Presence 2013'\n}, {\n  name: '2014',\n  description: 'Presence',\n  property: 'Presence 2014'\n}, {\n  name: '2015',\n  description: 'Presence',\n  property: 'Presence 2015'\n}, {\n  name: '2016',\n  description: 'Presence',\n  property: 'Presence 2016'\n}, {\n  name: '2017',\n  description: 'Presence',\n  property: 'Presence 2017'\n}, {\n  name: '2018',\n  description: 'Presence',\n  property: 'Presence 2018'\n}\n]*/\n\n\n// const arcOptions = [{\n//   name: '1993',\n//   property: 'id',\n// }, {\n//   name: '1994',\n//   property: 'id',\n// }, {\n//   name: '1995',\n//   property: 'id',\n// }, {\n//   name: '1996',  \n//   property: 'id',\n// }, {\n//   name: '1997',\n//   property: 'id',\n// }, {\n//   name: '1998',\n//   property: 'id',\n// }, {\n//   name: '1999',\n//   property: 'id',\n// }, {\n//   name: '2000',\n//   property: 'id',\n// }, {\n//   name: '2001',\n//   property: 'id',\n// }, {\n//   name: '2002',\n//   property: 'id',\n// }, {\n//   name: '2003',\n//   property: 'id',\n// }, {\n//   name: '2004',\n//   property: 'id',\n// }, {\n//   name: '2005',\n//   property: 'id',\n// }, {\n//   name: '2006',\n//   property: 'id',\n// }, {\n//   name: '2007',\n//   property: 'id',\n// }, {\n//   name: '2008',\n//   property: 'id',\n// }, {\n//   name: '2009',\n//   property: 'id',\n// }\n// ]\n\n\nconst myDeckLayer = new MapboxLayer({\n  coordinateSystem: COORDINATE_SYSTEM.LNGLAT_OFFSETS,\n  id: 'connectionsArcs',\n  type: ArcLayer,\n  data: arcData,\n  getSourceColor: d => [144,238,144],\n  getTargetColor: d => [0, 128, 200],\n  // getFillColor: [255, 0, 0],\n  strokeWidth:0.1,\n  getSourcePosition: d => d.START,\n  getTargetPosition: d => d.END,\n  pickable: true,\n  auto_highlight: true\n});\n\nclass App extends React.Component {\n  mapRef = React.createRef();\n\n  handleViewportChange = viewport => {\n    this.setState({\n      viewport: { ...this.state.viewport, ...viewport }\n    });\n  };\n\n  handleGeocoderViewportChange = viewport => {\n    const geocoderDefaultOverrides = { transitionDuration: 1000 };\n    return this.handleViewportChange({\n      ...viewport,\n      ...geocoderDefaultOverrides\n    });\n  };\n\n\n  mapRef = React.createRef();\n  map;\n  tooltipContainer;\n\n  setTooltip(features) {\n    if (features.length) {\n      ReactDOM.render(\n        React.createElement(\n          Tooltip, {\n            features\n          }\n        ),\n        this.tooltipContainer\n      );\n    } else {\n      ReactDOM.unmountComponentAtNode(this.tooltipContainer);\n    }\n  }\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      // width: 0, \n      // height: 0 ,\n    //   position : {\n    //     latitude: 49.437090,\n    //     longitude: 1.097456,\n    //  },\n      active: options[0] ,\n      // active: arcOptions[0] ,\n      viewport: {\n        // latitude: 17.44212,\n        // longitude: 78.391384,\n        // zoom: 15,\n        // bearing: 0,\n        // pitch: 0,\n        // width: 0,\n        // height: 0\n      },\n      popupInfo: null\n    };\n  }\n\n  onViewportChange = viewport => { \n    const {width, height, ...etc} = viewport\n    this.setState({viewport: etc})\n  } \n\n  componentDidUpdate() {\n    this.setFill();\n    // this.addLayer();\n  }\n\n\n  componentDidMount() {\n    // const mapRef = useRef()\n    this.tooltipContainer = document.createElement('div');\n    this.map = new mapboxgl.Map({\n      container: this.mapRef.current,\n      style: 'mapbox://styles/gcmillar/ckc13n1qe3rgx1ilchl8u3xax',\n      // style: 'mapbox://styles/mapbox/dark-v10',\n      center: [40, 40],\n      zoom: 1.2,\n      pitch: 0,\n      minpitchZoom: 1,\n      maxBounds: [ [-175, -80], [195, 86] ], // Sets bounds as max extent\n      });\n          /* Zoom */\n      // this.map.addControl(new ZoomControl(), 'top-right');\n      // /* Ruler */\n      // this.map.addControl(new RulerControl(), 'bottom-left');\n      // /* Inspect */\n      // this.map.addControl(new InspectControl(), 'bottom-left');\n      /* Compass */\n      // this.map.addControl(new CompassControl(), 'top-right');\n\n      // Load the data and layers once Mapbox map style loads\n    // this.map.on('style.load', () => {\n    //   json(arcData);\n    // });\n\n    this.map.on('load', () => {\n      this.map.addLayer(myDeckLayer);\n      \n      // if (this.map.getLayer(\"countries\")) {\n      //   this.map.removeLayer(\"countries\");\n      // };\n\n      // if (this.map.getSource(\"countries\")) {\n      //   this.map.removeSource(\"countries\");\n      // };\n      this.map.addSource('countries', {\n        type: 'geojson',\n        data\n      });\n\n      this.map.addSource('presence_data', {\n        type: 'geojson',\n        presence_data\n      });\n      // this.map.addSource('arcLayer', {\n      //   type: 'ArcLayer',\n      //   arcData\n      // });\n\n      this.map.addLayer({\n        id: 'countries',\n        type: 'fill',\n        source: 'countries'\n      },'country-label'); \n\n      // this.map.addLayer({\n      //   id: 'presence_data',\n      //   interactive: true,\n      //   type: \"symbol\",\n      //   source:  'countries',\n      //   // layout: {\n      //   //   'icon-image': \n      //   //   ['concat', ['get', 'icon'], '-15'],\n      //   //   'text-field': ['get', 'title'],\n      //   //   'text-font': ['Open Sans Semibold', 'Arial Unicode MS Bold'],\n      //   //   'text-offset': [0, 0.6],\n      //   //   'text-anchor': 'top'\n      //   // }\n      // }); \n      \n      // this.map.addLayer(arclayer, 'waterway-label');\n      \n    //   this.map.addLayer(myDeckLayer, {\n    //     id: 'arcLayer',\n    //     type: 'ArcLayer',\n    //   });\n\n    //   if (this.map.getLayer(\"arcLayer\")) {\n    //     this.map.removeLayer(\"arcLayer\");\n    // }\n\n      // this.map.on('styledata', function () {\n      //   // Triggered when `setStyle` is called.\n      //   if (data) addLayer();\n      // });\n      // this.map.addControl(new mapboxgl.FullscreenControl());\n      \n       presence_data.features.forEach((marker) => {\n         const markerEl = document.createElement('div');\n         markerEl.innerHTML = '🐞';\n         new mapboxgl.Marker(markerEl, { offset: [5,-5] })\n             .setLngLat(marker.geometry.coordinates)\n             .addTo(this.map);\n         markerEl.addEventListener('click', () => {\n           this.map.flyTo({\n               center: marker.geometry.coordinates,\n               zoom: 11,\n           });\n         });\n     });\n    var myFeatures = this.map.queryRenderedFeatures('countries', \n    {\n        layers: 'countries',\n       // i'm confident there is data matching this filter \n    }\n    );\n\nconsole.log(myFeatures);\n    this.setFill();\n    });\n\n    // const {arcId } = this.state.active;\n    // console.log(arcId);\n\n     // Original ES6 Class— https://github.com/tobinbradley/mapbox-gl-pitch-toggle-control\n      // export default class PitchToggle {\n        class PitchToggle {\n          constructor({ bearing = -20, pitch = 70, minpitchzoom = null }) {\n            this._bearing = bearing;\n            this._pitch = pitch;\n            this._minpitchzoom = minpitchzoom;\n          }\n  \n          onAdd(map) {\n            this._map = map;\n            let _this = this;  \n            this._btn = document.createElement(\"button\");\n            this._btn.className = \"mapboxgl-ctrl-icon mapboxgl-ctrl-pitchtoggle-3d\";\n            this._btn.type = \"button\";\n            this._btn[\"aria-label\"] = \"Toggle Pitch\";\n            this._btn.onclick = function() {\n              if (map.getPitch() === 0) {\n                let options = { pitch: _this._pitch, bearing: _this._bearing };\n                if (_this._minpitchzoom && map.getZoom() > _this._minpitchzoom) {\n                  options.zoom = _this._minpitchzoom;\n                }\n                map.easeTo(options);\n                _this._btn.className =\n                  \"mapboxgl-ctrl-icon mapboxgl-ctrl-pitchtoggle-2d\";\n              } else {\n                map.easeTo({ pitch: 0, bearing: 0 });\n                _this._btn.className =\n                  \"mapboxgl-ctrl-icon mapboxgl-ctrl-pitchtoggle-3d\";\n              }\n            };\n  \n            this._container = document.createElement(\"div\");\n            this._container.className = \"mapboxgl-ctrl-group mapboxgl-ctrl\";\n            this._container.appendChild(this._btn);\n  \n            return this._container;\n          }\n  \n          onRemove() {\n            this._container.parentNode.removeChild(this._container);\n            this._map = undefined;\n          }\n        }\n  \n        /* Idea from Stack Overflow https://stackoverflow.com/a/51683226  */\n        // class MapboxGLButtonControl {\n        //   constructor({\n        //     className = \"\",\n        //     title = \"\",\n        //     eventHandler = \"\"\n        //   }) {\n        //     this._className = className;\n        //     this._title = title;\n        //     this._eventHandler = eventHandler;\n        //   }\n        //   onAdd(map) {\n        //     this._btn = document.createElement(\"button\");\n        //     this._btn.className = `mapboxgl-ctrl-icon${this._className}`;\n        //     this._btn.type = \"button\";\n        //     this._btn.title = this._title;\n        //     this._btn.onclick = this._eventHandler;\n        //     this._container = document.createElement(\"div\");\n        //     this._container.className = \"mapboxgl-ctrl-group mapboxgl-ctrl\";\n        //     this._container.appendChild(this._btn);\n        //     return this._container;\n        //   }\n  \n        //   onRemove() {\n        //     this._container.parentNode.removeChild(this._container);\n        //     this._map = undefined;\n        //   }\n        // }\n  \n        /* Event Handlers */\n        // function one(event) {\n        //   alert(\"Event handler when clicking on \\r\\n\" + event.target.className);\n        //   console.log(\"event number 1\", event);\n        // }\n  \n        // function two(event) {\n        //   alert(\"Event handler when clicking on \\r\\n\" + event.target.className);\n        //   console.log(\"event number 2\", event);\n        // }\n  \n        // function three(event) {\n        //   alert(\"Event handler when clicking on \\r\\n\" + event.target.className);\n        //   console.log(\"event number 3\", event);\n        // }\n  \n        /* Instantiate new controls with custom event handlers */\n        // const ctrlPoint = new MapboxGLButtonControl({\n        //   className: \"mapbox-gl-draw_point\",\n        //   title: \"Draw Point\",\n        //   eventHandler: one\n        // });\n  \n        // const ctrlLine = new MapboxGLButtonControl({\n        //   className: \"mapbox-gl-draw_line\",\n        //   title: \"Draw Line\",\n        //   eventHandler: two\n        // });\n  \n        // const ctrlPolygon = new MapboxGLButtonControl({\n        //   className: \"mapbox-gl-draw_polygon\",\n        //   title: \"Draw Polygon\",\n        //   eventHandler: three\n        // });\n  \n        /* Add Controls to the Map */\n        // this.map.addControl(new mapboxgl.NavigationControl(), \"top-left\");\n        this.map.addControl(new MapboxGeocoder({\n          accessToken: 'pk.eyJ1IjoiZ2NtaWxsYXIiLCJhIjoiY2pvcDhrbGl4MDFvaTNrczR0d2hxcjdnNSJ9.JYgBw6y2pEq_AEAOCaoQpw',\n          mapboxgl: mapboxgl,\n          placeholder: 'Search for a Location'\n        }), 'top-right');\n        this.map.addControl(new PitchToggle({ minpitchzoom: 16 }), \"top-right\");\n  \n\n        // const tooltip = new mapboxgl.Marker(this.tooltipContainer, {\n        //   offset: [-120, 0]\n        // }).setLngLat([0,0]).addTo(this.map);\n    \n        var popup = new mapboxgl.Popup({\n          closeButton: false,\n          closeOnClick: false\n          });\n    \n          this.map.on('mouseenter', 'countries', (e) => {\n            this.map.getCanvas().style.cursor =  'pointer';\n          });\n          // console.log(data)\n          const { property } = this.state.active;\n          const prob_intro = data.features[0].properties[property]\n          console.log(prob_intro)\n          this.map.on('click', 'countries', (e) => {\n            const features = this.map.queryRenderedFeatures(e.point, {\n          });\n          const { property } = this.state.active;\n          const prob_intro = features[0].properties[property]\n          this.map.getCanvas().style.cursor = features.length ? 'pointer' : '';\n          popup \n          .setLngLat(e.lngLat)\n           .setHTML(`<b><u>Country Information</b></u><ul><li><b>Name: </b>${features[0].properties[\"NAME\"]}</li><li><b>Introduction Probability: </b>${prob_intro}</li></ul>`)\n          .addTo(this.map);\n        });\n\n        // setTimeout(function() {\n        //   var features = this.map.queryRenderedFeatures({ layers: ['countries'] })\n        //   this.map(function(feat) {\n        //     return feat.properties && feat.properties.DEV_STATUS;\n        //   });\n            \n        //   console.log(features);\n        // }, 500);\n\n        // console.log(this.state.active)\n        // const { presenceProperty } = this.state.active;\n        // const presenceBool = data.features[0].properties[presenceProperty]\n        // console.log(presenceBool)\n\n        // const markerEl = document.createElement('div');\n        // markerEl.innerHTML = '🐞';\n        // var presenceMarker = new mapboxgl.Marker(markerEl, { offset: [5,-5] })\n        // presence_data.features.forEach((marker) => {\n        //     presenceMarker\n        //       .setLngLat(marker.geometry.coordinates)\n        //       .addTo(this.map);\n        //         markerEl.addEventListener('click', () => {\n        //           this.map.flyTo({\n        //               center: marker.geometry.coordinates,\n        //               zoom: 3,\n        //           });\n        //         });\n        // });\n        \n    //// with custom styles:\n      // this.map.addControl(new StylesControl({\n      //   styles: [\n      //     {\n      //       label: 'Streets',\n      //       styleName: 'Mapbox Streets',\n      //       styleUrl: 'mapbox://styles/mapbox/streets-v9',\n      //     }, {\n      //       label: 'Satellite',\n      //       styleName: 'Satellite',\n      //       styleUrl: 'mapbox://styles/mapbox/satellite-v9',\n      //     },\n      //   ],\n      //   onChange: (style) => console.log(style),\n\n      // }, \n      // // this.map.getSource('countries').setData(data)\n      // // this.map.addLayer('countries','country-label')\n      // ), 'top-right');\n\n  //   this.map.on('click', 'presence_data', (p) => {\n  //     const presenceFeatures = this.map.queryRenderedFeatures(p.point, {\n  //   });\n  //   // console.log(presenceFeatures)\n  // });\n    this.map.on('mouseleave', 'countries', (e) => {\n      this.map.getCanvas().style.cursor =  '';\n      popup.remove();\n    });\n\n   \n  }\n  \n  setFill() {\n    const { property, stops } = this.state.active;\n    this.map.setPaintProperty('countries', 'fill-color', {\n      property,\n      stops\n    },\n    )\n    this.map.setPaintProperty('countries', 'fill-outline-color', '#7F7F7F',\n    )\n    // this.map.setPaintProperty('arcLayer',  {\n    //   arcId,\n    //   // stops\n    // },\n    // )\n      // this.map.setTooltip('presence_data', '', {\n      //   property,\n      //   stops\n      // })  ;\n      // ;    \n  }\n  // addLayer() {\n  //   const { arcId } = this.state.active;\n  //   this.map.addLayer('arcLayer' , {\n  //     arcId\n  //   }\n  //   )\n  // }\n\nfeatures () { \n  \n  this.mapRef.current.queryRenderedFeatures( { layers: ['countries'] })\n  }\n\n  render() {\n    const { \n      viewport,\n    } = this.state\n    const { name, description, stops, property } = this.state.active;\n    const renderLegendKeys = (stop, i) => {\n    return ( \n        <div key={i} className='txt-xs '>\n          <span className=' round-full w12 h12 inline-block ' style={{ backgroundColor: stop[1] }} />\n          <span className='px12 py12' >{`${stop[0].toLocaleString()}`}</span>\n        </div>\n      );\n    }\n\n   \n    const renderOptions = (option, i) => {\n      return (\n        <label key={i} className=\"toggle-container w36 maxw60 pa24\">\n          <input  onChange={() => this.setState({ active: options[i] })} checked={option.property === property} name=\"toggle\" type=\"radio\" />\n          <div  className=\"toggle txt-xs color-white toggle--gray  toggle--active-darken100 maxw60 w50 pl6 pr6\">{option.name}</div>\n        </label>\n      );\n    }\n    // const [data, setData] = useState()\n    // const [setViewport] = useState({\n    //   latitude: 49.437090,\n    //     longitude: 1.097456,\n    // })\n    // useEffect(() => {\n    //   fetch('../data.json')\n    //     .then(res => res.json())\n    //     .then(res => setData(res))\n    // },[])\n    // const handleClick = () => {\n    //   setData(filterRamps())\n    // }\n    \n    return (\n      \n      <div>\n        \n        <div ref={this.mapRef} \n        {...viewport}\n        width=\"100%\"\n        height=\"100%\"\n        // mapStyle=\"mapbox://styles/mapbox/dark-v9\"\n        onViewportChange={viewport}\n        mapboxApiAccessToken={MAPBOX_TOKEN}\n        // queryRenderedFeatures={features} \n        className=\"absolute top right left bottom align-middle grid\" />\n        <label className=\" align-middle top  txt-s mb30 mt3 ml18 ctxt-bold pa0 color-white absolute bg-transparent shadow-darken50 \" ><b>Select Year:</b></label>\n        <div className=\"toggle-group grid-2 grid mt24 pl3 pr3 align-middle top ctxt-bold  color-white absolute border border--2 border--white bg-transparent shadow-darken10  \">\n        {options.map(renderOptions)} \n        </div>\n        <div  className=\" bg-transparent px3  grid-3 color-white absolute align-middle bottom w100 left border--white round border border--2 round shadow-darken10  txt-xs\">\n          <div className=' color-gray-light px3 txt-xs'>\n            <h2 className=\"txt-bold txt-xs block color-white px0 \">{name}</h2>\n            <p className='txt-xs color-white px0 py0'>{description}</p>\n          </div>\n          {stops.map(renderLegendKeys)}\n        </div>\n      </div>\n    );//absolute top left ml12 mt12 border border--2 border--white bg-white shadow-darken10 z1\n  }\n}\n\nexport default App;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport App from './App';\n\nReactDOM.render( <App /> , document.getElementById(\"root\"))\n"],"sourceRoot":""}