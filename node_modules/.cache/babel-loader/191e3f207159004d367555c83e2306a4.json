{"ast":null,"code":"import _get from \"@babel/runtime/helpers/esm/get\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { clamp } from 'math.gl';\nimport Controller from './controller';\nimport { MapState } from './map-controller';\nimport { mod } from '../utils/math-utils';\nimport LinearInterpolator from '../transitions/linear-interpolator';\nimport { TRANSITION_EVENTS } from './transition-manager';\nvar LINEAR_TRANSITION_PROPS = {\n  transitionDuration: 300,\n  transitionEasing: function transitionEasing(t) {\n    return t;\n  },\n  transitionInterpolator: new LinearInterpolator(['longitude', 'latitude', 'zoom']),\n  transitionInterruption: TRANSITION_EVENTS.BREAK\n};\n\nvar GlobeState = function (_MapState) {\n  _inherits(GlobeState, _MapState);\n\n  function GlobeState() {\n    _classCallCheck(this, GlobeState);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(GlobeState).apply(this, arguments));\n  }\n\n  _createClass(GlobeState, [{\n    key: \"_applyConstraints\",\n    value: function _applyConstraints(props) {\n      var maxZoom = props.maxZoom,\n          minZoom = props.minZoom,\n          zoom = props.zoom;\n      props.zoom = clamp(zoom, minZoom, maxZoom);\n      var longitude = props.longitude,\n          latitude = props.latitude;\n\n      if (longitude < -180 || longitude > 180) {\n        props.longitude = mod(longitude + 180, 360) - 180;\n      }\n\n      props.latitude = clamp(latitude, -89, 89);\n      return props;\n    }\n  }]);\n\n  return GlobeState;\n}(MapState);\n\nvar GlobeController = function (_Controller) {\n  _inherits(GlobeController, _Controller);\n\n  function GlobeController(props) {\n    var _this;\n\n    _classCallCheck(this, GlobeController);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(GlobeController).call(this, GlobeState, props));\n    _this.invertPan = true;\n    return _this;\n  }\n\n  _createClass(GlobeController, [{\n    key: \"setProps\",\n    value: function setProps(props) {\n      _get(_getPrototypeOf(GlobeController.prototype), \"setProps\", this).call(this, props);\n\n      this.dragRotate = false;\n      this.touchRotate = false;\n    }\n  }, {\n    key: \"_getTransitionProps\",\n    value: function _getTransitionProps() {\n      return LINEAR_TRANSITION_PROPS;\n    }\n  }]);\n\n  return GlobeController;\n}(Controller);\n\nexport { GlobeController as default };","map":{"version":3,"sources":["../../../src/controllers/globe-controller.js"],"names":["LINEAR_TRANSITION_PROPS","transitionDuration","transitionEasing","transitionInterpolator","transitionInterruption","TRANSITION_EVENTS","BREAK","GlobeState","MapState","props","maxZoom","minZoom","zoom","clamp","longitude","latitude","mod","GlobeController","Controller"],"mappings":";;;;;;AAAA,SAAA,KAAA,QAAA,SAAA;AACA,OAAA,UAAA,MAAA,cAAA;AAEA,SAAA,QAAA,QAAA,kBAAA;AACA,SAAA,GAAA,QAAA,qBAAA;AACA,OAAA,kBAAA,MAAA,oCAAA;AACA,SAAA,iBAAA,QAAA,sBAAA;AAEA,IAAMA,uBAAuB,GAAG;AAC9BC,EAAAA,kBAAkB,EADY,GAAA;AAE9BC,EAAAA,gBAAgB,EAAE,SAAA,gBAAA,CAAA,CAAA,EAAC;AAAA,WAAA,CAAA;AAFW,GAAA;AAG9BC,EAAAA,sBAAsB,EAAE,IAAA,kBAAA,CAAuB,CAAA,WAAA,EAAA,UAAA,EAHjB,MAGiB,CAAvB,CAHM;AAI9BC,EAAAA,sBAAsB,EAAEC,iBAAiB,CAACC;AAJZ,CAAhC;;IAOMC,U;;;;;;;;;;;sCAEcE,K,EAAO;AAAA,UAEhBC,OAFgB,GAEUD,KAFV,CAAA,OAAA;AAAA,UAEPE,OAFO,GAEUF,KAFV,CAAA,OAAA;AAAA,UAEEG,IAFF,GAEUH,KAFV,CAAA,IAAA;AAGvBA,MAAAA,KAAK,CAALA,IAAAA,GAAaI,KAAK,CAAA,IAAA,EAAA,OAAA,EAAlBJ,OAAkB,CAAlBA;AAHuB,UAKhBK,SALgB,GAKOL,KALP,CAAA,SAAA;AAAA,UAKLM,QALK,GAKON,KALP,CAAA,QAAA;;AAMvB,UAAIK,SAAS,GAAG,CAAZA,GAAAA,IAAoBA,SAAS,GAAjC,GAAA,EAAyC;AACvCL,QAAAA,KAAK,CAALA,SAAAA,GAAkBO,GAAG,CAACF,SAAS,GAAV,GAAA,EAAHE,GAAG,CAAHA,GAAlBP,GAAAA;AACD;;AACDA,MAAAA,KAAK,CAALA,QAAAA,GAAiBI,KAAK,CAAA,QAAA,EAAW,CAAX,EAAA,EAAtBJ,EAAsB,CAAtBA;AAEA,aAAA,KAAA;AACD;;;;EAdsBD,Q;;IAiBJS,e;;;AACnB,WAAA,eAAA,CAAA,KAAA,EAAmB;AAAA,QAAA,KAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,eAAA,CAAA;;AACjB,IAAA,KAAA,GAAA,0BAAA,CAAA,IAAA,EAAA,eAAA,CAAA,eAAA,CAAA,CAAA,IAAA,CAAA,IAAA,EAAA,UAAA,EAAA,KAAA,CAAA,CAAA;AACA,IAAA,KAAA,CAAA,SAAA,GAAA,IAAA;AAFiB,WAAA,KAAA;AAGlB;;;;6BAEQR,K,EAAO;AACd,MAAA,IAAA,CAAA,eAAA,CAAA,eAAA,CAAA,SAAA,CAAA,EAAA,UAAA,EAAA,IAAA,CAAA,CAAA,IAAA,CAAA,IAAA,EAAA,KAAA;;AAGA,WAAA,UAAA,GAAA,KAAA;AACA,WAAA,WAAA,GAAA,KAAA;AACD;;;0CAEqB;AAEpB,aAAA,uBAAA;AACD;;;;EAjB0CS,U;;SAAxBD,e","sourcesContent":["import {clamp} from 'math.gl';\nimport Controller from './controller';\n\nimport {MapState} from './map-controller';\nimport {mod} from '../utils/math-utils';\nimport LinearInterpolator from '../transitions/linear-interpolator';\nimport {TRANSITION_EVENTS} from './transition-manager';\n\nconst LINEAR_TRANSITION_PROPS = {\n  transitionDuration: 300,\n  transitionEasing: t => t,\n  transitionInterpolator: new LinearInterpolator(['longitude', 'latitude', 'zoom']),\n  transitionInterruption: TRANSITION_EVENTS.BREAK\n};\n\nclass GlobeState extends MapState {\n  // Apply any constraints (mathematical or defined by _viewportProps) to map state\n  _applyConstraints(props) {\n    // Ensure zoom is within specified range\n    const {maxZoom, minZoom, zoom} = props;\n    props.zoom = clamp(zoom, minZoom, maxZoom);\n\n    const {longitude, latitude} = props;\n    if (longitude < -180 || longitude > 180) {\n      props.longitude = mod(longitude + 180, 360) - 180;\n    }\n    props.latitude = clamp(latitude, -89, 89);\n\n    return props;\n  }\n}\n\nexport default class GlobeController extends Controller {\n  constructor(props) {\n    super(GlobeState, props);\n    this.invertPan = true;\n  }\n\n  setProps(props) {\n    super.setProps(props);\n\n    // TODO - support pitching?\n    this.dragRotate = false;\n    this.touchRotate = false;\n  }\n\n  _getTransitionProps() {\n    // Enables Transitions on double-tap and key-down events.\n    return LINEAR_TRANSITION_PROPS;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}