{"ast":null,"code":"var _jsxFileName = \"/Users/garrettmillar/pandemic_dashboard/src/App.js\";\nimport React from 'react';\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport mapboxgl, { Layer, Feature, NavigationControl, Marker, Popup } from 'mapbox-gl'; // import ReactMapboxGl, { Layer, Feature, NavigationControl, Marker, Popup } from 'react-mapbox-gl';\n\nimport { Icon } from \"semantic-ui-react\";\nimport data from './pandemic_output.json';\nimport presence_data from './presence_pandemic.json';\nimport Tooltip from './components/tooltip';\nimport ReactDOM from 'react-dom';\nimport ReactMapboxGl from 'react-mapbox-gl';\nmapboxgl.accessToken = 'pk.eyJ1IjoiZ2NtaWxsYXIiLCJhIjoiY2pvcDhrbGl4MDFvaTNrczR0d2hxcjdnNSJ9.JYgBw6y2pEq_AEAOCaoQpw';\nconst Map = ReactMapboxGl({\n  accessToken: 'pk.eyJ1IjoiZmFicmljOCIsImEiOiJjaWc5aTV1ZzUwMDJwdzJrb2w0dXRmc2d0In0.p6GGlfyV-WksaDV_KdN27A'\n});\nconst navStyle = {\n  position: \"absolute\",\n  top: 0,\n  left: 0,\n  padding: \"10px\"\n}; // var draw;\n\nvar stops = [[0, 'rgba(45,69,132, 0.4)'], [0.1, 'rgba(77,30,129, 0.4)'], [0.2, 'rgba(109,41,126, 0.4)'], [0.3, 'rgba(141,52,123, 0.4)'], [0.4, 'rgba(173,63,120, 0.4)'], [0.5, 'rgba(205,74,118, 0.4)'], [0.6, 'rgba(210,103,103\t, 0.4)'], [0.7, 'rgba(216,132,89,0.7)'], [0.8, 'rgba(222,161,75, 0.4)'], [0.9, 'rgba(228,190,61, 0.4)'], [1, 'rgba(240,249,33, 0.4)']];\nconst options = [{\n  name: '1993',\n  description: 'Introduction Probability',\n  presence: 'Presence T0',\n  property: 'Probability of introduction T0',\n  stops: stops\n}, {\n  name: '1994',\n  description: 'Introduction Probability',\n  presence: 'Presence T1',\n  property: 'Probability of introduction T1',\n  stops: stops\n}, {\n  name: '1995',\n  description: 'Introduction Probability',\n  presence: 'Presence T2',\n  property: 'Probability of introduction T2',\n  stops: stops\n}, {\n  name: '1996',\n  description: 'Introduction Probability',\n  presence: 'Presence T3',\n  property: 'Probability of introduction T3',\n  stops: stops\n}, {\n  name: '1997',\n  description: 'Introduction Probability',\n  presence: 'Presence T4',\n  property: 'Probability of introduction T4',\n  stops: stops\n}, {\n  name: '1998',\n  description: 'Introduction Probability',\n  presence: 'Presence T5',\n  property: 'Probability of introduction T5',\n  stops: stops\n}, {\n  name: '1999',\n  description: 'Introduction Probability',\n  presence: 'Presence T6',\n  property: 'Probability of introduction T6',\n  stops: stops\n}, {\n  name: '2000',\n  description: 'Introduction Probability',\n  presence: 'Presence T7',\n  property: 'Probability of introduction T7',\n  stops: stops\n}, {\n  name: '2001',\n  description: 'Introduction Probability',\n  presence: 'Presence T8',\n  property: 'Probability of introduction T8',\n  stops: stops\n}, {\n  name: '2002',\n  description: 'Introduction Probability',\n  presence: 'Presence T9',\n  property: 'Probability of introduction T9',\n  stops: stops\n}, {\n  name: '2003',\n  description: 'Introduction Probability',\n  presence: 'Presence T10',\n  property: 'Probability of introduction T10',\n  stops: stops\n}, {\n  name: '2004',\n  description: 'Introduction Probability',\n  presence: 'Presence T11',\n  property: 'Probability of introduction T11',\n  stops: stops\n}, {\n  name: '2005',\n  description: 'Introduction Probability',\n  presence: 'Presence T12',\n  property: 'Probability of introduction T12',\n  stops: stops\n}, {\n  name: '2006',\n  description: 'Introduction Probability',\n  presence: 'Presence T13',\n  property: 'Probability of introduction T13',\n  stops: stops\n}, {\n  name: '2007',\n  description: 'Introduction Probability',\n  presence: 'Presence T14',\n  property: 'Probability of introduction T14',\n  stops: stops\n}, {\n  name: '2008',\n  description: 'Introduction Probability',\n  presence: 'Presence T15',\n  property: 'Probability of introduction T15',\n  stops: stops\n}, {\n  name: '2009',\n  description: 'Introduction Probability',\n  presence: 'Presence T16',\n  property: 'Probability of introduction T16',\n  stops: stops\n}, {\n  name: '2010',\n  description: 'Introduction Probability',\n  presence: 'Presence T17',\n  property: 'Probability of introduction T17',\n  stops: stops\n}, {\n  name: '2011',\n  description: 'Introduction Probability',\n  presence: 'Presence T18',\n  property: 'Probability of introduction T18',\n  stops: stops\n}, {\n  name: '2012',\n  description: 'Introduction Probability',\n  presence: 'Presence T19',\n  property: 'Probability of introduction T19',\n  stops: stops\n}, {\n  name: '2013',\n  description: 'Introduction Probability',\n  presence: 'Presence T20',\n  property: 'Probability of introduction T20',\n  stops: stops\n}, {\n  name: '2014',\n  description: 'Introduction Probability',\n  presence: 'Presence T21',\n  property: 'Probability of introduction T21',\n  stops: stops\n}, {\n  name: '2015',\n  description: 'Introduction Probability',\n  presence: 'Presence T22',\n  property: 'Probability of introduction T22',\n  stops: stops\n}, {\n  name: '2016',\n  description: 'Introduction Probability',\n  presence: 'Presence T23',\n  property: 'Probability of introduction T23',\n  stops: stops\n}, {\n  name: '2017',\n  description: 'Introduction Probability',\n  presence: 'Presence T24',\n  property: 'Probability of introduction T24',\n  stops: stops\n}, {\n  name: '2018',\n  description: 'Introduction Probability',\n  presence: 'Presence T25',\n  property: 'Probability of introduction T25',\n  stops: stops\n}]; // const markerList = [{\n//   name: '1993',\n//   description: 'Presence',\n//   property: 'Presence 1993'\n// }, {\n//   name: '1994',\n//   description: 'Presence',\n//   property: 'Presence 1994'\n// }, {\n//   name: '1995',\n//   description: 'Presence',\n//   property: 'Presence 1995'\n// }, {\n//   name: '1996',\n//   description: 'Presence',\n//   property: 'Presence 1996'\n// }, {\n//   name: '1997',\n//   description: 'Presence',\n//   property: 'Presence 1997'\n// }, {\n//   name: '1998',\n//   description: 'Presence',\n//   property: 'Presence 1998'\n// }, {\n//   name: '1999',\n//   description: 'Presence',\n//   property: 'Presence 1999'\n// }, {\n//   name: '2000',\n//   description: 'Presence',\n//   property: 'Presence 2000'\n// }, {\n//   name: '2001',\n//   description: 'Presence',\n//   property: 'Presence 2001'\n// }, {\n//   name: '2002',\n//   description: 'Presence',\n//   property: 'Presence 2002'\n// }, {\n//   name: '2003',\n//   description: 'Presence',\n//   property: 'Presence 2003'\n// }, {\n//   name: '2004',\n//   description: 'Presence',\n//   property: 'Presence 2004'\n// }, {\n//   name: '2005',\n//   description: 'Presence',\n//   property: 'Presence 2005'\n// }, {\n//   name: '2006',\n//   description: 'Presence',\n//   property: 'Presence 2006'\n// }, {\n//   name: '2007',\n//   description: 'Presence',\n//   property: 'Presence 2007'\n// }, {\n//   name: '2008',\n//   description: 'Presence',\n//   property: 'Presence 2008'\n// }, {\n//   name: '2009',\n//   description: 'Presence',\n//   property: 'Presence 2009'\n// }, {\n//   name: '2010',\n//   description: 'Presence',\n//   property: 'Presence 2010'\n// }, {\n//   name: '2011',\n//   description: 'Presence',\n//   property: 'Presence 2011'\n// }, {\n//   name: '2012',\n//   description: 'Presence',\n//   property: 'Presence 2012'\n// }, {\n//   name: '2013',\n//   description: 'Presence',\n//   property: 'Presence 2013'\n// }, {\n//   name: '2014',\n//   description: 'Presence',\n//   property: 'Presence 2014'\n// }, {\n//   name: '2015',\n//   description: 'Presence',\n//   property: 'Presence 2015'\n// }, {\n//   name: '2016',\n//   description: 'Presence',\n//   property: 'Presence 2016'\n// }, {\n//   name: '2017',\n//   description: 'Presence',\n//   property: 'Presence 2017'\n// }, {\n//   name: '2018',\n//   description: 'Presence',\n//   property: 'Presence 2018'\n// }\n// ]\n\nclass Item extends React.Component {\n  render() {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      onClick: this.props.click,\n      className: this.props.className,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 12\n      }\n    }, this.props.text);\n  }\n\n}\n\nclass App extends React.Component {\n  setTooltip(features) {\n    if (features.length) {\n      ReactDOM.render(React.createElement(Tooltip, {\n        features\n      }), this.tooltipContainer);\n    } else {\n      ReactDOM.unmountComponentAtNode(this.tooltipContainer);\n    }\n  }\n\n  constructor(props) {\n    super(props);\n    this.mapRef = React.createRef();\n    this.state = {\n      active: options[0],\n      viewport: {\n        latitude: 17.44212,\n        longitude: 78.391384,\n        zoom: 15,\n        bearing: 0,\n        pitch: 0,\n        width: \"100%\",\n        height: 500\n      },\n      popupInfo: null\n    };\n  }\n\n  componentDidUpdate() {\n    this.setFill();\n  }\n\n  componentDidMount() {\n    this.tooltipContainer = document.createElement('div');\n    this.map = new mapboxgl.Map({\n      container: this.mapRef.current,\n      style: 'mapbox://styles/gcmillar/ckc13n1qe3rgx1ilchl8u3xax',\n      // style: 'mapbox://styles/mapbox/dark-v10',\n      center: [12, 26],\n      zoom: 1.5\n    });\n    this.map.on('load', () => {\n      this.map.addSource('countries', {\n        type: 'geojson',\n        data\n      });\n      this.map.addSource('presence_data', {\n        type: 'geojson',\n        presence_data\n      });\n      this.map.addLayer({\n        id: 'countries',\n        type: 'fill',\n        source: 'countries'\n      }, 'country-label');\n      this.map.addLayer({\n        id: 'presence_data',\n        interactive: true,\n        type: \"symbol\",\n        source: 'presence_data',\n        layout: {\n          'icon-image': ['concat', ['get', 'icon'], '-15'],\n          'text-field': ['get', 'title'],\n          'text-font': ['Open Sans Semibold', 'Arial Unicode MS Bold'],\n          'text-offset': [0, 0.6],\n          'text-anchor': 'top'\n        }\n      });\n      this.setFill();\n      presence_data.features.map(feature => {\n        const markerEl = document.createElement('div'); // const { name, description, stops, property } = this.state.active;\n        // const prob_intro = features[0].properties[property]\n\n        markerEl.innerHTML = '🦟';\n        new mapboxgl.Marker(markerEl, {\n          offset: [5, -5],\n          layout: {\n            \"icon-image\": \"bicycle-15\"\n          }\n        }).setLngLat(feature.geometry.coordinates).addTo(this.map);\n        markerEl.addEventListener('click', () => {\n          this.map.flyTo({\n            center: feature.geometry.coordinates,\n            zoom: 20,\n            minzoom: 12\n          });\n        });\n      });\n    });\n    const testVar = presence_data.features.map(feature => feature.properties);\n    const uniqueTestVar = Array.from(new Set(testVar));\n    const filterElem = document.getElementById('iconFilter');\n    uniqueTestVar.forEach(testVar => {\n      const opt = document.createElement('div');\n      opt.value = testVar;\n      opt.innerText = testVar;\n      console.log(testVar);\n      console.log(filterElem); // filterElem.appendChild(opt);\n    }); // filterElem.onchange = () => {\n    //   const testVar = filterElem.value;\n    //   const newGeoJSON = {...presence_data };\n    //   if (testVar) {\n    //     newGeoJSON.features = presence_data.features.filter(feature => feature.properties === testVar);\n    //   } else {\n    //     newGeoJSON.features = [...presence_data.features];\n    //   }\n    //   this.map.getSource('presence_data').setData(newGeoJSON);\n    // };\n\n    const popup = new mapboxgl.Popup();\n    this.map.on(\"click\", e => {\n      const features = this.map.queryRenderedFeatures(e.point, {\n        layers: ['presence_data']\n      });\n\n      if (features && features.length > 0) {\n        popup.setLngLat(e.lngLat).setHTML(\"<h3>\" + features[0].properties.NAME + \"</h3>\" + // \"<h4>Opening Times</h4>\" +\n        \"<p>\" + features[0].properties.title + \"</p>\").addTo(this.map);\n      } else {\n        popup.remove();\n      }\n    });\n    const markerEl = document.createElement('div');\n    markerEl.innerHTML = '🦟';\n    new mapboxgl.Marker(markerEl, {\n      offset: [5, -5],\n      layout: {\n        \"icon-image\": \"bicycle-15\"\n      }\n    }).setLngLat(feature.geometry.coordinates).addTo(this.map);\n    this.map.on(\"click\", e => {\n      const features = this.map.queryRenderedFeatures(e.point, {\n        layers: ['presence_data']\n      });\n\n      if (features && features.length > 0) {\n        popup.setLngLat(e.lngLat).setHTML(\"<h3>\" + features[0].properties.NAME + \"</h3>\" + // \"<h4>Opening Times</h4>\" +\n        \"<p>\" + features[0].properties.title + \"</p>\").addTo(this.map);\n      } else {\n        popup.remove();\n      }\n    });\n    const tooltip = new mapboxgl.Marker(this.tooltipContainer, {\n      offset: [-120, 0]\n    }).setLngLat([0, 0]).addTo(this.map); // var popup = new mapboxgl.Popup({\n    //   closeButton: false,\n    //   closeOnClick: false\n    //   });\n\n    this.map.on('mouseenter', 'countries', e => {\n      this.map.getCanvas().style.cursor = 'pointer';\n    });\n    this.map.on('click', 'countries', e => {\n      const features = this.map.queryRenderedFeatures(e.point, {});\n      const {\n        name,\n        description,\n        stops,\n        property\n      } = this.state.active;\n      const prob_intro = features[0].properties[property];\n      this.map.getCanvas().style.cursor = features.length ? 'pointer' : '';\n      popup.setLngLat(e.lngLat).setHTML('<b><u>Country Information' + '</b></u>' + '<ul>' + '<li><b>Name: </b>' + features[0].properties[\"NAME\"] + '</li>' + '<li><b>Introduction Probability: </b>' + prob_intro + '</li>' + '</ul>').addTo(this.map);\n    });\n    this.map.on('click', 'presence_data', p => {\n      const presenceFeatures = this.map.queryRenderedFeatures(p.point, {}); // console.log(presenceFeatures)\n    });\n    this.map.on('mouseleave', 'countries', e => {\n      this.map.getCanvas().style.cursor = '';\n      popup.remove();\n    });\n  }\n\n  setFill() {\n    const {\n      property,\n      stops\n    } = this.state.active;\n    this.map.setPaintProperty('countries', 'fill-color', {\n      property,\n      stops\n    });\n    this.map.setPaintProperty('countries', 'fill-outline-color', {\n      property,\n      stops\n    }) // this.map.setTooltip('presence_data', '', {\n    //   property,\n    //   stops\n    // })  ;\n    ;\n  }\n\n  render() {\n    const {\n      name,\n      description,\n      stops,\n      property\n    } = this.state.active;\n\n    const renderLegendKeys = (stop, i) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: i,\n        className: \"txt-s \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 576,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \" round-full w12 h12 inline-block \",\n        style: {\n          backgroundColor: stop[1]\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 577,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 578,\n          columnNumber: 11\n        }\n      }, `${stop[0].toLocaleString()}`));\n    };\n\n    const renderOptions = (option, i) => {\n      return /*#__PURE__*/React.createElement(\"label\", {\n        key: i,\n        className: \"toggle-container  right  left px3 py3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 586,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        onChange: () => this.setState({\n          active: options[i]\n        }),\n        checked: option.property === property,\n        name: \"toggle\",\n        type: \"radio\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 587,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"toggle grid txt-s color-white right   left toggle--active-white\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 588,\n          columnNumber: 11\n        }\n      }, option.name));\n    };\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 594,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      ref: this.mapRef,\n      className: \"absolute top right left bottom align-middle grid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 595,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"ctxt-bold color-white absolute mt6 ml12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 596,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 596,\n        columnNumber: 69\n      }\n    }, \"Select Year:\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"toggle-group grid ctxt-bold color-white absolute mt36 ml12 border border--2 border--white bg-transparent  shadow-darken10  absolute  \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 597,\n        columnNumber: 9\n      }\n    }, options.map(renderOptions)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \" bg-transparent color-white absolute bottom right mr12 mb24 py12 px12 border--white round border border--2 round shadow-darken10 z1 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 600,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mb6 color-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 601,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"txt-bold txt-s block color-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 602,\n        columnNumber: 13\n      }\n    }, name), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"txt-s color-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 603,\n        columnNumber: 13\n      }\n    }, description)), stops.map(renderLegendKeys)));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/garrettmillar/pandemic_dashboard/src/App.js"],"names":["React","mapboxgl","Layer","Feature","NavigationControl","Marker","Popup","Icon","data","presence_data","Tooltip","ReactDOM","ReactMapboxGl","accessToken","Map","navStyle","position","top","left","padding","stops","options","name","description","presence","property","Item","Component","render","props","click","className","text","App","setTooltip","features","length","createElement","tooltipContainer","unmountComponentAtNode","constructor","mapRef","createRef","state","active","viewport","latitude","longitude","zoom","bearing","pitch","width","height","popupInfo","componentDidUpdate","setFill","componentDidMount","document","map","container","current","style","center","on","addSource","type","addLayer","id","source","interactive","layout","feature","markerEl","innerHTML","offset","setLngLat","geometry","coordinates","addTo","addEventListener","flyTo","minzoom","testVar","properties","uniqueTestVar","Array","from","Set","filterElem","getElementById","forEach","opt","value","innerText","console","log","popup","e","queryRenderedFeatures","point","layers","lngLat","setHTML","NAME","title","remove","tooltip","getCanvas","cursor","prob_intro","p","presenceFeatures","setPaintProperty","renderLegendKeys","stop","i","backgroundColor","toLocaleString","renderOptions","option","setState"],"mappings":"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A,QAAQ,EAAE,iCAJT;AAKDL,EAAAA,KAAK,EAAEA;AALN,CAtJa,CAAhB,C,CA+JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMM,IAAN,SAAmB1B,KAAK,CAAC2B,SAAzB,CAAmC;AACjCC,EAAAA,MAAM,GAAE;AACN,wBAAO;AAAI,MAAA,OAAO,EAAE,KAAKC,KAAL,CAAWC,KAAxB;AACE,MAAA,SAAS,EAAE,KAAKD,KAAL,CAAWE,SADxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEG,KAAKF,KAAL,CAAWG,IAFd,CAAP;AAID;;AANgC;;AASnC,MAAMC,GAAN,SAAkBjC,KAAK,CAAC2B,SAAxB,CAAkC;AAKhCO,EAAAA,UAAU,CAACC,QAAD,EAAW;AACnB,QAAIA,QAAQ,CAACC,MAAb,EAAqB;AACnBzB,MAAAA,QAAQ,CAACiB,MAAT,CACE5B,KAAK,CAACqC,aAAN,CACE3B,OADF,EACW;AACPyB,QAAAA;AADO,OADX,CADF,EAME,KAAKG,gBANP;AAQD,KATD,MASO;AACL3B,MAAAA,QAAQ,CAAC4B,sBAAT,CAAgC,KAAKD,gBAArC;AACD;AACF;;AAGDE,EAAAA,WAAW,CAACX,KAAD,EAAe;AACxB,UAAMA,KAAN;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","sourcesContent":["import React from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport mapboxgl,{ Layer, Feature, NavigationControl, Marker, Popup } from 'mapbox-gl'\n// import ReactMapboxGl, { Layer, Feature, NavigationControl, Marker, Popup } from 'react-mapbox-gl';\n\nimport { Icon } from \"semantic-ui-react\";\nimport data from './pandemic_output.json'\nimport presence_data from './presence_pandemic.json'\nimport Tooltip from './components/tooltip'\nimport ReactDOM from 'react-dom'\nimport ReactMapboxGl from 'react-mapbox-gl';\n\n\nmapboxgl.accessToken = 'pk.eyJ1IjoiZ2NtaWxsYXIiLCJhIjoiY2pvcDhrbGl4MDFvaTNrczR0d2hxcjdnNSJ9.JYgBw6y2pEq_AEAOCaoQpw';\nconst Map = ReactMapboxGl({\n  accessToken:\n    'pk.eyJ1IjoiZmFicmljOCIsImEiOiJjaWc5aTV1ZzUwMDJwdzJrb2w0dXRmc2d0In0.p6GGlfyV-WksaDV_KdN27A'\n});\n\n\nconst navStyle = {\n  position: \"absolute\",\n  top: 0,\n  left: 0,\n  padding: \"10px\"\n};\n// var draw;\nvar stops =  [\n  [0, 'rgba(45,69,132, 0.4)'],\t\n  [0.1, 'rgba(77,30,129, 0.4)'],\t\n  [0.2, 'rgba(109,41,126, 0.4)'],\t\t\t\n  [0.3, 'rgba(141,52,123, 0.4)'], \n  [0.4, 'rgba(173,63,120, 0.4)'],\t\n  [0.5, 'rgba(205,74,118, 0.4)'], \n  [0.6, 'rgba(210,103,103\t, 0.4)'],\t\t\n  [0.7, 'rgba(216,132,89,0.7)'], \n  [0.8, 'rgba(222,161,75, 0.4)'],\t\n  [0.9, 'rgba(228,190,61, 0.4)'],\n  [1, 'rgba(240,249,33, 0.4)']\n]\n\nconst options = [{\n  name: '1993',\n  description: 'Introduction Probability',\n  presence: 'Presence T0',\n  property: 'Probability of introduction T0',\n  stops: stops\n}, {\n  name: '1994',\n  description: 'Introduction Probability',\n  presence: 'Presence T1',\n  property: 'Probability of introduction T1',\n  stops: stops\n}, {\n  name: '1995',\n  description: 'Introduction Probability',\n  presence: 'Presence T2',\n  property: 'Probability of introduction T2',\n  stops: stops\n}, {\n  name: '1996',\n  description: 'Introduction Probability',\n  presence: 'Presence T3',\n  property: 'Probability of introduction T3',\n  stops: stops\n}, {\n  name: '1997',\n  description: 'Introduction Probability',\n  presence: 'Presence T4',\n  property: 'Probability of introduction T4',\n  stops: stops\n}, {\n  name: '1998',\n  description: 'Introduction Probability',\n  presence: 'Presence T5',\n  property: 'Probability of introduction T5',\n  stops: stops\n}, {\n  name: '1999',\n  description: 'Introduction Probability',\n  presence: 'Presence T6',\n  property: 'Probability of introduction T6',\n  stops: stops\n}, {\n  name: '2000',\n  description: 'Introduction Probability',\n  presence: 'Presence T7',\n  property: 'Probability of introduction T7',\n  stops: stops\n}, {\n  name: '2001',\n  description: 'Introduction Probability',\n  presence: 'Presence T8',\n  property: 'Probability of introduction T8',\n  stops: stops\n}, {\n  name: '2002',\n  description: 'Introduction Probability',\n  presence: 'Presence T9',\n  property: 'Probability of introduction T9',\n  stops: stops\n}, {\n  name: '2003',\n  description: 'Introduction Probability',\n  presence: 'Presence T10',\n  property: 'Probability of introduction T10',\n  stops: stops\n}, {\n  name: '2004',\n  description: 'Introduction Probability',\n  presence: 'Presence T11',\n  property: 'Probability of introduction T11',\n  stops: stops\n}, {\n  name: '2005',\n  description: 'Introduction Probability',\n  presence: 'Presence T12',\n  property: 'Probability of introduction T12',\n  stops: stops\n}, {\n  name: '2006',\n  description: 'Introduction Probability',\n  presence: 'Presence T13',\n  property: 'Probability of introduction T13',\n  stops: stops\n}, {\n  name: '2007',\n  description: 'Introduction Probability',\n  presence: 'Presence T14',\n  property: 'Probability of introduction T14',\n  stops: stops\n}, {\n  name: '2008',\n  description: 'Introduction Probability',\n  presence: 'Presence T15',\n  property: 'Probability of introduction T15',\n  stops: stops\n}, {\n  name: '2009',\n  description: 'Introduction Probability',\n  presence: 'Presence T16',\n  property: 'Probability of introduction T16',\n  stops: stops\n}, {\n  name: '2010',\n  description: 'Introduction Probability',\n  presence: 'Presence T17',\n  property: 'Probability of introduction T17',\n  stops: stops\n}, {\n  name: '2011',\n  description: 'Introduction Probability',\n  presence: 'Presence T18',\n  property: 'Probability of introduction T18',\n  stops: stops\n}, {\n  name: '2012',\n  description: 'Introduction Probability',\n  presence: 'Presence T19',\n  property: 'Probability of introduction T19',\n  stops: stops\n}, {\n  name: '2013',\n  description: 'Introduction Probability',\n  presence: 'Presence T20',\n  property: 'Probability of introduction T20',\n  stops: stops\n}, {\n  name: '2014',\n  description: 'Introduction Probability',\n  presence: 'Presence T21',\n  property: 'Probability of introduction T21',\n  stops: stops\n}, {\n  name: '2015',\n  description: 'Introduction Probability',\n  presence: 'Presence T22',\n  property: 'Probability of introduction T22',\n  stops: stops\n}, {\n  name: '2016',\n  description: 'Introduction Probability',\n  presence: 'Presence T23',\n  property: 'Probability of introduction T23',\n  stops: stops\n}, {\n  name: '2017',\n  description: 'Introduction Probability',\n  presence: 'Presence T24',\n  property: 'Probability of introduction T24',\n  stops: stops\n}, {\n  name: '2018',\n  description: 'Introduction Probability',\n  presence: 'Presence T25',\n  property: 'Probability of introduction T25',\n  stops: stops\n}\n]\n\n// const markerList = [{\n//   name: '1993',\n//   description: 'Presence',\n//   property: 'Presence 1993'\n// }, {\n//   name: '1994',\n//   description: 'Presence',\n//   property: 'Presence 1994'\n// }, {\n//   name: '1995',\n//   description: 'Presence',\n//   property: 'Presence 1995'\n// }, {\n//   name: '1996',\n//   description: 'Presence',\n//   property: 'Presence 1996'\n// }, {\n//   name: '1997',\n//   description: 'Presence',\n//   property: 'Presence 1997'\n// }, {\n//   name: '1998',\n//   description: 'Presence',\n//   property: 'Presence 1998'\n// }, {\n//   name: '1999',\n//   description: 'Presence',\n//   property: 'Presence 1999'\n// }, {\n//   name: '2000',\n//   description: 'Presence',\n//   property: 'Presence 2000'\n// }, {\n//   name: '2001',\n//   description: 'Presence',\n//   property: 'Presence 2001'\n// }, {\n//   name: '2002',\n//   description: 'Presence',\n//   property: 'Presence 2002'\n// }, {\n//   name: '2003',\n//   description: 'Presence',\n//   property: 'Presence 2003'\n// }, {\n//   name: '2004',\n//   description: 'Presence',\n//   property: 'Presence 2004'\n// }, {\n//   name: '2005',\n//   description: 'Presence',\n//   property: 'Presence 2005'\n// }, {\n//   name: '2006',\n//   description: 'Presence',\n//   property: 'Presence 2006'\n// }, {\n//   name: '2007',\n//   description: 'Presence',\n//   property: 'Presence 2007'\n// }, {\n//   name: '2008',\n//   description: 'Presence',\n//   property: 'Presence 2008'\n// }, {\n//   name: '2009',\n//   description: 'Presence',\n//   property: 'Presence 2009'\n// }, {\n//   name: '2010',\n//   description: 'Presence',\n//   property: 'Presence 2010'\n// }, {\n//   name: '2011',\n//   description: 'Presence',\n//   property: 'Presence 2011'\n// }, {\n//   name: '2012',\n//   description: 'Presence',\n//   property: 'Presence 2012'\n// }, {\n//   name: '2013',\n//   description: 'Presence',\n//   property: 'Presence 2013'\n// }, {\n//   name: '2014',\n//   description: 'Presence',\n//   property: 'Presence 2014'\n// }, {\n//   name: '2015',\n//   description: 'Presence',\n//   property: 'Presence 2015'\n// }, {\n//   name: '2016',\n//   description: 'Presence',\n//   property: 'Presence 2016'\n// }, {\n//   name: '2017',\n//   description: 'Presence',\n//   property: 'Presence 2017'\n// }, {\n//   name: '2018',\n//   description: 'Presence',\n//   property: 'Presence 2018'\n// }\n// ]\n\nclass Item extends React.Component {\n  render(){\n    return <li onClick={this.props.click} \n             className={this.props.className}>\n             {this.props.text}\n           </li>        \n  }\n}\n\nclass App extends React.Component {\n  mapRef = React.createRef();\n  map;\n  tooltipContainer;\n\n  setTooltip(features) {\n    if (features.length) {\n      ReactDOM.render(\n        React.createElement(\n          Tooltip, {\n            features\n          }\n        ),\n        this.tooltipContainer\n      );\n    } else {\n      ReactDOM.unmountComponentAtNode(this.tooltipContainer);\n    }\n  }\n\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      active: options[0],\n      viewport: {\n        latitude: 17.44212,\n        longitude: 78.391384,\n        zoom: 15,\n        bearing: 0,\n        pitch: 0,\n        width: \"100%\",\n        height: 500\n      },\n      popupInfo: null\n    };\n  }\n\n  componentDidUpdate() {\n    this.setFill();\n  }\n\n  componentDidMount() {\n    this.tooltipContainer = document.createElement('div');\n    this.map = new mapboxgl.Map({\n      container: this.mapRef.current,\n      style: 'mapbox://styles/gcmillar/ckc13n1qe3rgx1ilchl8u3xax',\n      // style: 'mapbox://styles/mapbox/dark-v10',\n      center: [12, 26],\n      zoom: 1.5,\n    });\n\n    this.map.on('load', () => {\n      this.map.addSource('countries', {\n        type: 'geojson',\n        data\n      });\n\n      this.map.addSource('presence_data', {\n        type: 'geojson',\n        presence_data\n      });\n\n      this.map.addLayer({\n        id: 'countries',\n        type: 'fill',\n        source: 'countries'\n      },'country-label'); \n\n      this.map.addLayer({\n        id: 'presence_data',\n        interactive: true,\n        type: \"symbol\",\n        source:  'presence_data',\n        layout: {\n          'icon-image': \n          ['concat', ['get', 'icon'], '-15'],\n          'text-field': ['get', 'title'],\n          'text-font': ['Open Sans Semibold', 'Arial Unicode MS Bold'],\n          'text-offset': [0, 0.6],\n          'text-anchor': 'top'\n        }\n      }); \n\n      this.setFill();\n\n      presence_data.features.map((feature) => {\n        const markerEl = document.createElement('div');\n        // const { name, description, stops, property } = this.state.active;\n        // const prob_intro = features[0].properties[property]\n        markerEl.innerHTML = '🦟';\n        new mapboxgl.Marker(markerEl, { \n          offset: [5,-5] ,\n          layout: {\n            \"icon-image\": \"bicycle-15\"\n          }\n        })\n            .setLngLat(feature.geometry.coordinates)\n            .addTo(this.map);\n        \n        markerEl.addEventListener('click', () => {\n          this.map.flyTo({\n              center: feature.geometry.coordinates,\n              zoom: 20,\n              minzoom: 12\n          });\n        });\n    });\n    \n    });\n      \n    const testVar = presence_data.features.map(feature => feature.properties);\n    const uniqueTestVar = Array.from(new Set(testVar));\n    const filterElem = document.getElementById('iconFilter');\n    uniqueTestVar.forEach(testVar => {\n      const opt = document.createElement('div');\n      opt.value = testVar;\n      opt.innerText = testVar; \n      console.log(testVar);\n      console.log(filterElem);\n      // filterElem.appendChild(opt);\n    });\n    \n    // filterElem.onchange = () => {\n    //   const testVar = filterElem.value;\n    //   const newGeoJSON = {...presence_data };\n    //   if (testVar) {\n    //     newGeoJSON.features = presence_data.features.filter(feature => feature.properties === testVar);\n    //   } else {\n    //     newGeoJSON.features = [...presence_data.features];\n    //   }\n    //   this.map.getSource('presence_data').setData(newGeoJSON);\n    // };\n\n    const popup = new mapboxgl.Popup();\n    this.map.on(\"click\", e => {\n      const features = this.map.queryRenderedFeatures(e.point, { layers: ['presence_data'] });\n      if (features && features.length > 0) {\n        popup\n          .setLngLat(e.lngLat)\n          .setHTML(\n            \"<h3>\" +\n              features[0].properties.NAME +\n              \"</h3>\" +\n              // \"<h4>Opening Times</h4>\" +\n              \"<p>\" +\n              features[0].properties.title +\n              \"</p>\"\n          )\n          .addTo(this.map);\n      } else {\n        popup.remove();\n      }\n    });\n\n    const markerEl = document.createElement('div');\n        markerEl.innerHTML = '🦟';\n        new mapboxgl.Marker(markerEl, { \n          offset: [5,-5] ,\n          layout: {\n            \"icon-image\": \"bicycle-15\"\n          }\n        })\n        .setLngLat(feature.geometry.coordinates)\n        .addTo(this.map);\n    this.map.on(\"click\", e => {\n      const features = this.map.queryRenderedFeatures(e.point, { layers: ['presence_data'] });\n      if (features && features.length > 0) {\n        popup\n          .setLngLat(e.lngLat)\n          .setHTML(\n            \"<h3>\" +\n              features[0].properties.NAME +\n              \"</h3>\" +\n              // \"<h4>Opening Times</h4>\" +\n              \"<p>\" +\n              features[0].properties.title +\n              \"</p>\"\n          )\n          .addTo(this.map);\n      } else {\n        popup.remove();\n      }\n    });\n\n    const tooltip = new mapboxgl.Marker(this.tooltipContainer, {\n      offset: [-120, 0]\n    }).setLngLat([0,0]).addTo(this.map);\n\n    // var popup = new mapboxgl.Popup({\n    //   closeButton: false,\n    //   closeOnClick: false\n    //   });\n\n      this.map.on('mouseenter', 'countries', (e) => {\n        this.map.getCanvas().style.cursor =  'pointer';\n      });\n\n\n      this.map.on('click', 'countries', (e) => {\n        const features = this.map.queryRenderedFeatures(e.point, {\n      });\n      const { name, description, stops, property } = this.state.active;\n      const prob_intro = features[0].properties[property]\n      this.map.getCanvas().style.cursor = features.length ? 'pointer' : '';\n      popup \n      .setLngLat(e.lngLat)\n       .setHTML('<b><u>Country Information' + '</b></u>' +\n          '<ul>' +\n          '<li><b>Name: </b>' + features[0].properties[\"NAME\"] + '</li>' +\n          '<li><b>Introduction Probability: </b>' + prob_intro  + '</li>' +\n          '</ul>')\n      .addTo(this.map);\n    });\n\n    \n\n    this.map.on('click', 'presence_data', (p) => {\n      const presenceFeatures = this.map.queryRenderedFeatures(p.point, {\n    });\n    // console.log(presenceFeatures)\n  });\n    this.map.on('mouseleave', 'countries', (e) => {\n      this.map.getCanvas().style.cursor =  '';\n      popup.remove();\n    });\n\n   \n  }\n\n  \n\n  setFill() {\n    const { property, stops } = this.state.active;\n    this.map.setPaintProperty('countries', 'fill-color', {\n      property,\n      stops\n    },\n    )\n    this.map.setPaintProperty('countries', 'fill-outline-color', {\n      property,\n      stops\n    },\n    )\n      // this.map.setTooltip('presence_data', '', {\n      //   property,\n      //   stops\n      // })  ;\n      ;    \n  }\n\n\n\n  render() {\n    \n    const { name, description, stops, property } = this.state.active;\n    const renderLegendKeys = (stop, i) => {\n      return (\n        <div key={i} className='txt-s '>\n          <span className=' round-full w12 h12 inline-block ' style={{ backgroundColor: stop[1] }} />\n          <span >{`${stop[0].toLocaleString()}`}</span>\n        </div>\n      );\n    }\n\n   \n    const renderOptions = (option, i) => {\n      return (\n        <label key={i} className=\"toggle-container  right  left px3 py3\">\n          <input  onChange={() => this.setState({ active: options[i] })} checked={option.property === property} name=\"toggle\" type=\"radio\" />\n          <div  className=\"toggle grid txt-s color-white right   left toggle--active-white\">{option.name}</div>\n        </label>\n      );\n    }\n\n    return (\n      <div>\n        <div ref={this.mapRef} className=\"absolute top right left bottom align-middle grid\" />\n        <label className=\"ctxt-bold color-white absolute mt6 ml12\" ><b>Select Year:</b></label>\n        <div  className=\"toggle-group grid ctxt-bold color-white absolute mt36 ml12 border border--2 border--white bg-transparent  shadow-darken10  absolute  \">\n          {options.map(renderOptions)}\n        </div>\n        <div  className=\" bg-transparent color-white absolute bottom right mr12 mb24 py12 px12 border--white round border border--2 round shadow-darken10 z1 \">\n          <div className='mb6 color-white'>\n            <h2 className=\"txt-bold txt-s block color-white\">{name}</h2>\n            <p className='txt-s color-white'>{description}</p>\n          </div>\n          {stops.map(renderLegendKeys)}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}