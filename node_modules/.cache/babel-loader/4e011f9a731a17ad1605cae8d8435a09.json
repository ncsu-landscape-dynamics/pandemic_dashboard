{"ast":null,"code":"import _classCallCheck from\"/Users/garrettmillar/pandemic_dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/garrettmillar/pandemic_dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/garrettmillar/pandemic_dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/garrettmillar/pandemic_dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import*as React from'react';import logo from\"./logo.svg\";import'./App.css';import mapboxgl from'mapbox-gl';import data from'./pandemic_output.json';import presence_data from'./presence_pandemic.json';import Tooltip from'./components/tooltip';import ReactDOM from'react-dom';import{Component}from'react';import{render}from'react-dom';import MapGL,{Source,Layer}from'react-map-gl';import ControlPanel from'./control-panel';import{dataLayer}from'./map-style.js';import{updatePercentiles}from'./utils';import{json as requestJson}from'd3-request';mapboxgl.accessToken='pk.eyJ1IjoiZ2NtaWxsYXIiLCJhIjoiY2pvcDhrbGl4MDFvaTNrczR0d2hxcjdnNSJ9.JYgBw6y2pEq_AEAOCaoQpw';var MAPBOX_TOKEN='pk.eyJ1IjoiZ2NtaWxsYXIiLCJhIjoiY2pvcDhrbGl4MDFvaTNrczR0d2hxcjdnNSJ9.JYgBw6y2pEq_AEAOCaoQpw';// var draw;\nvar stops=[[0,'rgba(45,69,132, 0.4)'],[0.1,'rgba(77,30,129, 0.4)'],[0.2,'rgba(109,41,126, 0.4)'],[0.3,'rgba(141,52,123, 0.4)'],[0.4,'rgba(173,63,120, 0.4)'],[0.5,'rgba(205,74,118, 0.4)'],[0.6,'rgba(210,103,103\t, 0.4)'],[0.7,'rgba(216,132,89,0.7)'],[0.8,'rgba(222,161,75, 0.4)'],[0.9,'rgba(228,190,61, 0.4)'],[1,'rgba(240,249,33, 0.4)']];var options=[{name:'1993',description:'Introduction Probability',property:'Probability of introduction T0',propertyPresence:'Presence 1993',stops:stops},{name:'1994',description:'Introduction Probability',property:'Probability of introduction T1',stops:stops},{name:'1995',description:'Introduction Probability',property:'Probability of introduction T2',stops:stops},{name:'1996',description:'Introduction Probability',property:'Probability of introduction T3',stops:stops},{name:'1997',description:'Introduction Probability',property:'Probability of introduction T4',stops:stops},{name:'1998',description:'Introduction Probability',property:'Probability of introduction T5',stops:stops},{name:'1999',description:'Introduction Probability',property:'Probability of introduction T6',stops:stops},{name:'2000',description:'Introduction Probability',property:'Probability of introduction T7',stops:stops},{name:'2001',description:'Introduction Probability',property:'Probability of introduction T8',stops:stops},{name:'2002',description:'Introduction Probability',property:'Probability of introduction T9',stops:stops},{name:'2003',description:'Introduction Probability',property:'Probability of introduction T10',stops:stops},{name:'2004',description:'Introduction Probability',property:'Probability of introduction T11',stops:stops},{name:'2005',description:'Introduction Probability',property:'Probability of introduction T12',stops:stops},{name:'2006',description:'Introduction Probability',property:'Probability of introduction T13',stops:stops},{name:'2007',description:'Introduction Probability',property:'Probability of introduction T14',stops:stops},{name:'2008',description:'Introduction Probability',property:'Probability of introduction T15',stops:stops},{name:'2009',description:'Introduction Probability',property:'Probability of introduction T16',stops:stops},{name:'2010',description:'Introduction Probability',property:'Probability of introduction T17',stops:stops},{name:'2011',description:'Introduction Probability',property:'Probability of introduction T18',stops:stops},{name:'2012',description:'Introduction Probability',property:'Probability of introduction T19',stops:stops},{name:'2013',description:'Introduction Probability',property:'Probability of introduction T20',stops:stops},{name:'2014',description:'Introduction Probability',property:'Probability of introduction T21',stops:stops},{name:'2015',description:'Introduction Probability',property:'Probability of introduction T22',stops:stops},{name:'2016',description:'Introduction Probability',property:'Probability of introduction T23',stops:stops},{name:'2017',description:'Introduction Probability',property:'Probability of introduction T24',stops:stops},{name:'2018',description:'Introduction Probability',property:'Probability of introduction T25',propertyPresence:'Presence 1993',stops:stops}];var markerList=[{name:\"title\",info:\"icon\"},{name:\"title\",info:\"icon\"},{name:\"title\",info:\"icon\"}];// const presence_options = [{\n//   name: '1993',\n//   description: 'Presence',\n//   property: 'Presence 1993'\n// }, {\n//   name: '1994',\n//   description: 'Presence',\n//   property: 'Presence 1994'\n// }, {\n//   name: '1995',\n//   description: 'Presence',\n//   property: 'Presence 1995'\n// }, {\n//   name: '1996',\n//   description: 'Presence',\n//   property: 'Presence 1996'\n// }, {\n//   name: '1997',\n//   description: 'Presence',\n//   property: 'Presence 1997'\n// }, {\n//   name: '1998',\n//   description: 'Presence',\n//   property: 'Presence 1998'\n// }, {\n//   name: '1999',\n//   description: 'Presence',\n//   property: 'Presence 1999'\n// }, {\n//   name: '2000',\n//   description: 'Presence',\n//   property: 'Presence 2000'\n// }, {\n//   name: '2001',\n//   description: 'Presence',\n//   property: 'Presence 2001'\n// }, {\n//   name: '2002',\n//   description: 'Presence',\n//   property: 'Presence 2002'\n// }, {\n//   name: '2003',\n//   description: 'Presence',\n//   property: 'Presence 2003'\n// }, {\n//   name: '2004',\n//   description: 'Presence',\n//   property: 'Presence 2004'\n// }, {\n//   name: '2005',\n//   description: 'Presence',\n//   property: 'Presence 2005'\n// }, {\n//   name: '2006',\n//   description: 'Presence',\n//   property: 'Presence 2006'\n// }, {\n//   name: '2007',\n//   description: 'Presence',\n//   property: 'Presence 2007'\n// }, {\n//   name: '2008',\n//   description: 'Presence',\n//   property: 'Presence 2008'\n// }, {\n//   name: '2009',\n//   description: 'Presence',\n//   property: 'Presence 2009'\n// }, {\n//   name: '2010',\n//   description: 'Presence',\n//   property: 'Presence 2010'\n// }, {\n//   name: '2011',\n//   description: 'Presence',\n//   property: 'Presence 2011'\n// }, {\n//   name: '2012',\n//   description: 'Presence',\n//   property: 'Presence 2012'\n// }, {\n//   name: '2013',\n//   description: 'Presence',\n//   property: 'Presence 2013'\n// }, {\n//   name: '2014',\n//   description: 'Presence',\n//   property: 'Presence 2014'\n// }, {\n//   name: '2015',\n//   description: 'Presence',\n//   property: 'Presence 2015'\n// }, {\n//   name: '2016',\n//   description: 'Presence',\n//   property: 'Presence 2016'\n// }, {\n//   name: '2017',\n//   description: 'Presence',\n//   property: 'Presence 2017'\n// }, {\n//   name: '2018',\n//   description: 'Presence',\n//   property: 'Presence 2018'\n// }\n// ]\nvar navStyle={position:'absolute',top:0,left:0,padding:'10px'};var CITIES={name:\"title\",info:\"icon\"};var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.mapRef=React.createRef();_this._loadData=function(data){_this.setState({data:updatePercentiles(data,function(f){return f.properties.income[_this.state.year];})});};_this._updateSettings=function(name,value){if(name==='year'){_this.setState({year:value});var _data=_this.state.data;if(_data){// trigger update\n_this.setState({data:updatePercentiles(_data,function(f){return f.properties.income[value];})});}}};_this._onViewportChange=function(viewport){return _this.setState({viewport:viewport});};_this._onHover=function(event){var features=event.features,_event$srcEvent=event.srcEvent,offsetX=_event$srcEvent.offsetX,offsetY=_event$srcEvent.offsetY;var hoveredFeature=features&&features.find(function(f){return f.layer.id==='data';});_this.setState({hoveredFeature:hoveredFeature,x:offsetX,y:offsetY});};_this.state={active:options[0],// active: options_presence[0],\nyear:null,data:null,hoveredFeature:null,viewport:{latitude:40,longitude:-100,zoom:3,bearing:0,pitch:0},popupInfo:null};// this.renderPopup = this.renderPopup.bind(this)\nreturn _this;}_createClass(App,[{key:\"componentDidUpdate\",// renderPopup(){\n//     return this.state.popupInfo && (\n//       <Popup tipSize={5}\n//         anchor=\"bottom-right\"\n//         longitude={this.state.popupInfo.state.longitude}\n//         latitude={this.state.popupInfo.state.latitude}\n//         onClose={() => this.setState({popupInfo: null})}\n//         closeOnClick={true}>\n//         <p>{}</p>\n//       </Popup>\n//     )\n//   }\n//   renderPopup(index) {\n//     return (\n//       this.state.popupInfo && (\n//         <Popup\n//           tipSize={5}\n//           anchor=\"bottom-right\"\n//           longitude={markerList[index].long}\n//           latitude={markerList[index].lat}\n//           onMouseLeave={() => this.setState({ popupInfo: null })}\n//           closeOnClick={true}\n//         >\n//           <p>\n//             <strong>{markerList[index].name}</strong>\n//             <br />\n//             Available beds:{markerList[index].info}\n//           </p>\n//         </Popup>\n//       )\n//     );\n//   }\nvalue:function componentDidUpdate(){this.setFill();}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.tooltipContainer=document.createElement('div');requestJson('https://raw.githubusercontent.com/uber/react-map-gl/master/examples/.data/us-income.geojson',function(error,response){if(!error){_this2.map._loadData(response);}});this.map=new mapboxgl.Map({container:this.mapRef.current,style:'mapbox://styles/gcmillar/ckc13n1qe3rgx1ilchl8u3xax',// style: 'mapbox://styles/mapbox/dark-v10',\ncenter:[12,26],zoom:1.5});this.map.on('load',function(e){_this2.map.addSource('countries',{type:'geojson',data:data});_this2.map.addSource('presence_data',{type:'geojson',presence_data:presence_data});_this2.map.addLayer({id:'countries',type:'fill',source:'countries'},'country-label');_this2.map.addLayer({id:'presence_data',interactive:true,type:\"symbol\",source:{\"type\":\"geojson\",\"data\":presence_data},layout:{'icon-image':['concat',['get','icon'],'-15'],'text-field':['get','title'],'text-font':['Open Sans Semibold','Arial Unicode MS Bold'],'text-offset':[0,0.6],'text-anchor':'top'}});_this2.this.setFill();// const features = this.map.queryRenderedFeatures(e.point, {\n// pestMarker \n//   .setLngLat(e.lngLat)\n//   .setHTML('<b><u>Country Information' + '</b></u>' +\n//     '<ul>' +\n//     '<li><b>Name: </b>' + features[0].properties[\"NAME\"] + '</li>' +\n//     '<li><b>Introduction Probability: </b>' + prob_intro  + '</li>' +\n//     '</ul>')\n// .addTo(this.map);\n// // });\n// this.set\n});var tooltip=new mapboxgl.Marker(this.tooltipContainer,{offset:[-120,0]}).setLngLat([0,0]).addTo(this.map);var popup=new mapboxgl.Popup({closeButton:false,closeOnClick:false});var pestMarker=new mapboxgl.Marker({offset:[-120,0]}).setLngLat([0,0]).addTo(this.map);console.log(pestMarker);this.map.on('mouseenter','countries',function(e){_this2.map.getCanvas().style.cursor='pointer';});this.map.on('click','countries',function(e){var features=_this2.map.queryRenderedFeatures(e.point,{});var _this2$state$active=_this2.state.active,name=_this2$state$active.name,description=_this2$state$active.description,stops=_this2$state$active.stops,property=_this2$state$active.property;var prob_intro=features[0].properties[property];_this2.map.getCanvas().style.cursor=features.length?'pointer':'';popup.setLngLat(e.lngLat).setHTML('<b><u>Country Information'+'</b></u>'+'<ul>'+'<li><b>Name: </b>'+features[0].properties[\"NAME\"]+'</li>'+'<li><b>Introduction Probability: </b>'+prob_intro+'</li>'+'</ul>').addTo(_this2.map);});this.map.on('mouseleave','countries',function(e){_this2.map.getCanvas().style.cursor='';popup.remove();});}},{key:\"_renderTooltip\",value:function _renderTooltip(){var _this$state=this.state,hoveredFeature=_this$state.hoveredFeature,x=_this$state.x,y=_this$state.y;return hoveredFeature&&/*#__PURE__*/React.createElement(\"div\",{className:\"tooltip\",style:{left:x,top:y}},/*#__PURE__*/React.createElement(\"div\",null,\"State: \",hoveredFeature.properties.name),/*#__PURE__*/React.createElement(\"div\",null,\"Median Household Income: \",hoveredFeature.properties.value),/*#__PURE__*/React.createElement(\"div\",null,\"Percentile: \",hoveredFeature.properties.percentile/8*100));}},{key:\"render\",value:function render(){var _this$state2=this.state,viewport=_this$state2.viewport,data=_this$state2.data;return/*#__PURE__*/React.createElement(\"div\",{style:{height:'100%',position:'relative'}},/*#__PURE__*/React.createElement(MapGL,Object.assign({},viewport,{width:\"100%\",height:\"100%\",mapStyle:\"mapbox://styles/mapbox/light-v9\",onViewportChange:this._onViewportChange,mapboxApiAccessToken:MAPBOX_TOKEN,onHover:this._onHover}),/*#__PURE__*/React.createElement(Source,{type:\"geojson\",data:data},/*#__PURE__*/React.createElement(Layer,dataLayer)),this._renderTooltip()),/*#__PURE__*/React.createElement(ControlPanel,{containerComponent:this.props.containerComponent,settings:this.state,onChange:this._updateSettings}));}// }\n},{key:\"setFill\",value:function setFill(){var _this$state$active=this.state.active,property=_this$state$active.property,stops=_this$state$active.stops;this.map.setPaintProperty('countries','fill-color',{property:property,stops:stops});this.map.setPaintProperty('countries','fill-outline-color',{property:property,stops:stops});// this.map.setTooltip('presence_data', '', {\n//   property,\n//   stops\n// })  ;\n}// render() {\n//   const {viewport} = this.state;\n//   return (\n//     <GeoJSONLayer\n//       data={presence_data}\n//       type=\"symbol\"\n//       anchor=\"bottom-right\"\n//       longitude={this.state.popupInfo.state.longitude}\n//       latitude={this.state.popupInfo.state.latitude}\n//       onClose={() => this.setState({popupInfo: null})}\n//       closeOnClick={true}\n//       symbolLayout={{\n//         \"text-field\": \"{title}\",\n//         \"text-font\": [\"Open Sans Semibold\", \"Arial Unicode MS Bold\"],\n//         \"text-offset\": [0, 0.6],\n//         \"text-anchor\": \"top\"\n//       }}/>\n//   );\n// }\n},{key:\"render\",value:function render(){var _this3=this;var _this$state$active2=this.state.active,name=_this$state$active2.name,description=_this$state$active2.description,stops=_this$state$active2.stops,property=_this$state$active2.property;var renderLegendKeys=function renderLegendKeys(stop,i){return/*#__PURE__*/React.createElement(\"div\",{key:i,className:\"txt-s \"},/*#__PURE__*/React.createElement(\"span\",{className:\" round-full w12 h12 inline-block \",style:{backgroundColor:stop[1]}}),/*#__PURE__*/React.createElement(\"span\",null,\"\".concat(stop[0].toLocaleString())));};var renderOptions=function renderOptions(option,i){return/*#__PURE__*/React.createElement(\"label\",{key:i,className:\"toggle-container  right  left px3 py3\"},/*#__PURE__*/React.createElement(\"input\",{onChange:function onChange(){return _this3.setState({active:options[i]});},checked:option.property===property,name:\"toggle\",type:\"radio\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"toggle grid txt-s color-white right   left toggle--active-white\"},option.name));};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{ref:this.mapRef,className:\"absolute top right left bottom align-middle grid\"}),/*#__PURE__*/React.createElement(\"label\",{className:\"ctxt-bold color-white absolute mt6 ml12\"},/*#__PURE__*/React.createElement(\"b\",null,\"Select Year:\")),/*#__PURE__*/React.createElement(\"div\",{className:\"toggle-group grid ctxt-bold color-white absolute mt36 ml12 border border--2 border--white bg-transparent  shadow-darken10  absolute  \"},options.map(renderOptions)),/*#__PURE__*/React.createElement(\"div\",{className:\" bg-transparent color-white absolute bottom right mr12 mb24 py12 px12 border--white round border border--2 round shadow-darken10 z1 \"},/*#__PURE__*/React.createElement(\"div\",{className:\"mb6 color-white\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"txt-bold txt-s block color-white\"},name),/*#__PURE__*/React.createElement(\"p\",{className:\"txt-s color-white\"},description)),stops.map(renderLegendKeys)))// <MapGL\n//   {...viewport}\n//   mapStyle=\"mapbox://styles/mapbox/dark-v9\"\n//   mapboxApiAccessToken={TOKEN} >\n//   {markers}\n//   {this.renderPopup()}\n//   <div className=\"nav\" style={navStyle}>\n//     <NavigationControl/>\n//     <Marker longitude={} latitude={} offsetTop={} offsetLeft={}>\n//       <Pin onClick={() => this.setState({popupInfo: popupInfo})}/>\n//     </Marker>\n//     </div>\n//   </div>\n// </MapGL>\n;}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["/Users/garrettmillar/pandemic_dashboard/src/App.js"],"names":["React","mapboxgl","data","presence_data","Tooltip","ReactDOM","Component","render","MapGL","Source","Layer","ControlPanel","dataLayer","updatePercentiles","json","requestJson","accessToken","MAPBOX_TOKEN","stops","options","name","description","property","propertyPresence","markerList","info","navStyle","position","top","left","padding","CITIES","App","props","mapRef","createRef","_loadData","setState","f","properties","income","state","year","_updateSettings","value","_onViewportChange","viewport","_onHover","event","features","srcEvent","offsetX","offsetY","hoveredFeature","find","layer","id","x","y","active","latitude","longitude","zoom","bearing","pitch","popupInfo","setFill","tooltipContainer","document","createElement","error","response","map","Map","container","current","style","center","on","e","addSource","type","addLayer","source","interactive","layout","this","tooltip","Marker","offset","setLngLat","addTo","popup","Popup","closeButton","closeOnClick","pestMarker","console","log","getCanvas","cursor","queryRenderedFeatures","point","prob_intro","length","lngLat","setHTML","remove","percentile","height","_renderTooltip","containerComponent","setPaintProperty","renderLegendKeys","stop","i","backgroundColor","toLocaleString","renderOptions","option"],"mappings":"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AU,CAAG,CACjB,CACEJ,IAAI,CAAE,OADR,CAEEK,IAAI,CAAE,MAFR,CADiB,CAKjB,CACEL,IAAI,CAAE,OADR,CAEEK,IAAI,CAAE,MAFR,CALiB,CASjB,CACEL,IAAI,CAAE,OADR,CAEEK,IAAI,CAAE,MAFR,CATiB,CAAnB,CAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA,GAAMC,CAAAA,QAAQ,CAAG,CACfC,QAAQ,CAAE,UADK,CAEfC,GAAG,CAAE,CAFU,CAGfC,IAAI,CAAE,CAHS,CAIfC,OAAO,CAAE,MAJM,CAAjB,CAOA,GAAMC,CAAAA,MAAM,CAAI,CACdX,IAAI,CAAE,OADQ,CAEdK,IAAI,CAAE,MAFQ,CAAhB,C,GAMMO,CAAAA,G,sGAKJ,aAAYC,KAAZ,CAA0B,qCACxB,uBAAMA,KAAN,EADwB,MAJ1BC,MAI0B,CAJjBlC,KAAK,CAACmC,SAAN,EAIiB,OAgL1BC,SAhL0B,CAgLd,SAAAlC,IAAI,CAAI,CAClB,MAAKmC,QAAL,CAAc,CACZnC,IAAI,CAAEW,iBAAiB,CAACX,IAAD,CAAO,SAAAoC,CAAC,QAAIA,CAAAA,CAAC,CAACC,UAAF,CAAaC,MAAb,CAAoB,MAAKC,KAAL,CAAWC,IAA/B,CAAJ,EAAR,CA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","sourcesContent":["import * as React from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport mapboxgl from 'mapbox-gl'\nimport data from './pandemic_output.json'\nimport presence_data from './presence_pandemic.json'\nimport Tooltip from './components/tooltip'\nimport ReactDOM from 'react-dom'\n\nimport {Component} from 'react';\nimport {render} from 'react-dom';\nimport MapGL, {Source, Layer} from 'react-map-gl';\nimport ControlPanel from './control-panel';\n\nimport {dataLayer} from './map-style.js';\nimport {updatePercentiles} from './utils';\nimport {json as requestJson} from 'd3-request';\n\n\nmapboxgl.accessToken = 'pk.eyJ1IjoiZ2NtaWxsYXIiLCJhIjoiY2pvcDhrbGl4MDFvaTNrczR0d2hxcjdnNSJ9.JYgBw6y2pEq_AEAOCaoQpw';\nconst MAPBOX_TOKEN = 'pk.eyJ1IjoiZ2NtaWxsYXIiLCJhIjoiY2pvcDhrbGl4MDFvaTNrczR0d2hxcjdnNSJ9.JYgBw6y2pEq_AEAOCaoQpw';\n\n// var draw;\nvar stops =  [\n  [0, 'rgba(45,69,132, 0.4)'],\t\n  [0.1, 'rgba(77,30,129, 0.4)'],\t\n  [0.2, 'rgba(109,41,126, 0.4)'],\t\t\t\n  [0.3, 'rgba(141,52,123, 0.4)'], \n  [0.4, 'rgba(173,63,120, 0.4)'],\t\n  [0.5, 'rgba(205,74,118, 0.4)'], \n  [0.6, 'rgba(210,103,103\t, 0.4)'],\t\t\n  [0.7, 'rgba(216,132,89,0.7)'], \n  [0.8, 'rgba(222,161,75, 0.4)'],\t\n  [0.9, 'rgba(228,190,61, 0.4)'],\n  [1, 'rgba(240,249,33, 0.4)']\n]\n\nconst options = [{\n  name: '1993',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T0',\n  propertyPresence: 'Presence 1993',\n  stops: stops\n}, {\n  name: '1994',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T1',\n  stops: stops\n}, {\n  name: '1995',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T2',\n  stops: stops\n}, {\n  name: '1996',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T3',\n  stops: stops\n}, {\n  name: '1997',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T4',\n  stops: stops\n}, {\n  name: '1998',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T5',\n  stops: stops\n}, {\n  name: '1999',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T6',\n  stops: stops\n}, {\n  name: '2000',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T7',\n  stops: stops\n}, {\n  name: '2001',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T8',\n  stops: stops\n}, {\n  name: '2002',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T9',\n  stops: stops\n}, {\n  name: '2003',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T10',\n  stops: stops\n}, {\n  name: '2004',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T11',\n  stops: stops\n}, {\n  name: '2005',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T12',\n  stops: stops\n}, {\n  name: '2006',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T13',\n  stops: stops\n}, {\n  name: '2007',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T14',\n  stops: stops\n}, {\n  name: '2008',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T15',\n  stops: stops\n}, {\n  name: '2009',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T16',\n  stops: stops\n}, {\n  name: '2010',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T17',\n  stops: stops\n}, {\n  name: '2011',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T18',\n  stops: stops\n}, {\n  name: '2012',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T19',\n  stops: stops\n}, {\n  name: '2013',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T20',\n  stops: stops\n}, {\n  name: '2014',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T21',\n  stops: stops\n}, {\n  name: '2015',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T22',\n  stops: stops\n}, {\n  name: '2016',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T23',\n  stops: stops\n}, {\n  name: '2017',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T24',\n  stops: stops\n}, {\n  name: '2018',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T25',\n  propertyPresence: 'Presence 1993',\n  stops: stops\n}\n]\n\nconst markerList = [\n  {\n    name: \"title\",\n    info: \"icon\"\n  },\n  {\n    name: \"title\",\n    info: \"icon\"\n  },\n  {\n    name: \"title\",\n    info: \"icon\"\n  }\n];\n\n// const presence_options = [{\n//   name: '1993',\n//   description: 'Presence',\n//   property: 'Presence 1993'\n// }, {\n//   name: '1994',\n//   description: 'Presence',\n//   property: 'Presence 1994'\n// }, {\n//   name: '1995',\n//   description: 'Presence',\n//   property: 'Presence 1995'\n// }, {\n//   name: '1996',\n//   description: 'Presence',\n//   property: 'Presence 1996'\n// }, {\n//   name: '1997',\n//   description: 'Presence',\n//   property: 'Presence 1997'\n// }, {\n//   name: '1998',\n//   description: 'Presence',\n//   property: 'Presence 1998'\n// }, {\n//   name: '1999',\n//   description: 'Presence',\n//   property: 'Presence 1999'\n// }, {\n//   name: '2000',\n//   description: 'Presence',\n//   property: 'Presence 2000'\n// }, {\n//   name: '2001',\n//   description: 'Presence',\n//   property: 'Presence 2001'\n// }, {\n//   name: '2002',\n//   description: 'Presence',\n//   property: 'Presence 2002'\n// }, {\n//   name: '2003',\n//   description: 'Presence',\n//   property: 'Presence 2003'\n// }, {\n//   name: '2004',\n//   description: 'Presence',\n//   property: 'Presence 2004'\n// }, {\n//   name: '2005',\n//   description: 'Presence',\n//   property: 'Presence 2005'\n// }, {\n//   name: '2006',\n//   description: 'Presence',\n//   property: 'Presence 2006'\n// }, {\n//   name: '2007',\n//   description: 'Presence',\n//   property: 'Presence 2007'\n// }, {\n//   name: '2008',\n//   description: 'Presence',\n//   property: 'Presence 2008'\n// }, {\n//   name: '2009',\n//   description: 'Presence',\n//   property: 'Presence 2009'\n// }, {\n//   name: '2010',\n//   description: 'Presence',\n//   property: 'Presence 2010'\n// }, {\n//   name: '2011',\n//   description: 'Presence',\n//   property: 'Presence 2011'\n// }, {\n//   name: '2012',\n//   description: 'Presence',\n//   property: 'Presence 2012'\n// }, {\n//   name: '2013',\n//   description: 'Presence',\n//   property: 'Presence 2013'\n// }, {\n//   name: '2014',\n//   description: 'Presence',\n//   property: 'Presence 2014'\n// }, {\n//   name: '2015',\n//   description: 'Presence',\n//   property: 'Presence 2015'\n// }, {\n//   name: '2016',\n//   description: 'Presence',\n//   property: 'Presence 2016'\n// }, {\n//   name: '2017',\n//   description: 'Presence',\n//   property: 'Presence 2017'\n// }, {\n//   name: '2018',\n//   description: 'Presence',\n//   property: 'Presence 2018'\n// }\n// ]\n\n\nconst navStyle = {\n  position: 'absolute',\n  top: 0,\n  left: 0,\n  padding: '10px'\n};\n\nconst CITIES =  {\n  name: \"title\",\n  info: \"icon\"\n}\n\n\nclass App extends React.Component {\n  mapRef = React.createRef();\n  map;\n  tooltipContainer;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      active: options[0],\n      // active: options_presence[0],\n      year: null,\n      data: null,\n      hoveredFeature: null,\n      viewport: {\n        latitude: 40,\n        longitude: -100,\n        zoom: 3,\n        bearing: 0,\n        pitch: 0\n      },\n      popupInfo: null\n    };\n    // this.renderPopup = this.renderPopup.bind(this)\n    };\n\n// renderPopup(){\n//     return this.state.popupInfo && (\n//       <Popup tipSize={5}\n//         anchor=\"bottom-right\"\n//         longitude={this.state.popupInfo.state.longitude}\n//         latitude={this.state.popupInfo.state.latitude}\n//         onClose={() => this.setState({popupInfo: null})}\n//         closeOnClick={true}>\n//         <p>{}</p>\n//       </Popup>\n//     )\n//   }\n//   renderPopup(index) {\n//     return (\n//       this.state.popupInfo && (\n//         <Popup\n//           tipSize={5}\n//           anchor=\"bottom-right\"\n//           longitude={markerList[index].long}\n//           latitude={markerList[index].lat}\n//           onMouseLeave={() => this.setState({ popupInfo: null })}\n//           closeOnClick={true}\n//         >\n//           <p>\n//             <strong>{markerList[index].name}</strong>\n//             <br />\n//             Available beds:{markerList[index].info}\n//           </p>\n//         </Popup>\n//       )\n//     );\n//   }\n\n  componentDidUpdate() {\n    this.setFill();\n  }\n\n  componentDidMount() {\n    this.tooltipContainer = document.createElement('div');\n\n    \n    requestJson(\n      'https://raw.githubusercontent.com/uber/react-map-gl/master/examples/.data/us-income.geojson',\n      (error, response) => {\n        if (!error) {\n          this.map._loadData(response);\n        }\n      }\n    );\n\n    \n    \n    this.map = new mapboxgl.Map({\n      container: this.mapRef.current,\n      style: 'mapbox://styles/gcmillar/ckc13n1qe3rgx1ilchl8u3xax', // style: 'mapbox://styles/mapbox/dark-v10',\n      center: [12, 26],\n      zoom: 1.5,\n    });\n\n    this.map.on('load',  (e) => {\n      this.map.addSource('countries', {\n        type: 'geojson',\n        data\n      });\n\n      this.map.addSource('presence_data', {\n        type: 'geojson',\n        presence_data\n      });\n\n      this.map.addLayer({\n        id: 'countries',\n        type: 'fill',\n        source: 'countries'\n      },'country-label'); \n\n      this.map.addLayer({\n        id: 'presence_data',\n        interactive: true,\n        type: \"symbol\",\n        source: {\n          \"type\": \"geojson\",\n          \"data\": presence_data\n        },\n        layout: {\n          'icon-image': \n          ['concat', ['get', 'icon'], '-15'],\n          'text-field': ['get', 'title'],\n          'text-font': ['Open Sans Semibold', 'Arial Unicode MS Bold'],\n          'text-offset': [0, 0.6],\n          'text-anchor': 'top'\n        }\n      }); \n      this.\n\n      this.setFill();\n      // const features = this.map.queryRenderedFeatures(e.point, {\n\n      // pestMarker \n      //   .setLngLat(e.lngLat)\n      //   .setHTML('<b><u>Country Information' + '</b></u>' +\n      //     '<ul>' +\n      //     '<li><b>Name: </b>' + features[0].properties[\"NAME\"] + '</li>' +\n      //     '<li><b>Introduction Probability: </b>' + prob_intro  + '</li>' +\n      //     '</ul>')\n      // .addTo(this.map);\n      // // });\n      // this.set\n    });\n    \n    const tooltip = new mapboxgl.Marker(this.tooltipContainer, {\n      offset: [-120, 0]\n    }).setLngLat([0,0]).addTo(this.map);\n\n    var popup = new mapboxgl.Popup({\n      closeButton: false,\n      closeOnClick: false\n      });\n\n    var pestMarker = new mapboxgl.Marker({\n      offset: [-120, 0]\n    }).setLngLat([0,0]).addTo(this.map);\n    console.log(pestMarker);\n\n\n      this.map.on('mouseenter', 'countries', (e) => {\n        this.map.getCanvas().style.cursor =  'pointer';\n      });\n\n      this.map.on('click', 'countries', (e) => {\n        const features = this.map.queryRenderedFeatures(e.point, {\n       \n      });\n\n      const { name, description, stops, property } = this.state.active;\n\n      const prob_intro = features[0].properties[property];\n\n      this.map.getCanvas().style.cursor = features.length ? 'pointer' : '';\n      popup \n      .setLngLat(e.lngLat)\n      .setHTML('<b><u>Country Information' + '</b></u>' +\n        '<ul>' +\n        '<li><b>Name: </b>' + features[0].properties[\"NAME\"] + '</li>' +\n        '<li><b>Introduction Probability: </b>' + prob_intro  + '</li>' +\n        '</ul>')\n    .addTo(this.map);\n    });\n\n    this.map.on('mouseleave', 'countries', (e) => {\n      this.map.getCanvas().style.cursor =  '';\n      popup.remove();\n    });\n\n  }\n\n  _loadData = data => {\n    this.setState({\n      data: updatePercentiles(data, f => f.properties.income[this.state.year])\n    });\n  };\n\n  _updateSettings = (name, value) => {\n    if (name === 'year') {\n      this.setState({year: value});\n\n      const {data} = this.state;\n      if (data) {\n        // trigger update\n        this.setState({\n          data: updatePercentiles(data, f => f.properties.income[value])\n        });\n      }\n    }\n  };\n\n  _onViewportChange = viewport => this.setState({viewport});\n\n  _onHover = event => {\n    const {\n      features,\n      srcEvent: {offsetX, offsetY}\n    } = event;\n    const hoveredFeature = features && features.find(f => f.layer.id === 'data');\n\n    this.setState({hoveredFeature, x: offsetX, y: offsetY});\n  };\n\n  _renderTooltip() {\n    const {hoveredFeature, x, y} = this.state;\n\n    return (\n      hoveredFeature && (\n        <div className=\"tooltip\" style={{left: x, top: y}}>\n          <div>State: {hoveredFeature.properties.name}</div>\n          <div>Median Household Income: {hoveredFeature.properties.value}</div>\n          <div>Percentile: {(hoveredFeature.properties.percentile / 8) * 100}</div>\n        </div>\n      )\n    );\n  }\n\n  render() {\n    const {viewport, data} = this.state;\n\n    return (\n      <div style={{height: '100%', position: 'relative'}}>\n        <MapGL\n          {...viewport}\n          width=\"100%\"\n          height=\"100%\"\n          mapStyle=\"mapbox://styles/mapbox/light-v9\"\n          onViewportChange={this._onViewportChange}\n          mapboxApiAccessToken={MAPBOX_TOKEN}\n          onHover={this._onHover}\n        >\n          <Source type=\"geojson\" data={data}>\n            <Layer {...dataLayer} />\n          </Source>\n          {this._renderTooltip()}\n        </MapGL>\n\n        <ControlPanel\n          containerComponent={this.props.containerComponent}\n          settings={this.state}\n          onChange={this._updateSettings}\n        />\n      </div>\n    );\n  }\n// }\n\n  setFill() {\n    const { property, stops } = this.state.active;\n    this.map.setPaintProperty('countries', 'fill-color', {\n      property,\n      stops\n    },\n    )\n    this.map.setPaintProperty('countries', 'fill-outline-color', {\n      property,\n      stops\n    })\n    // this.map.setTooltip('presence_data', '', {\n    //   property,\n    //   stops\n    // })  ;\n  }\n\n  // render() {\n  //   const {viewport} = this.state;\n  //   return (\n  //     <GeoJSONLayer\n  //       data={presence_data}\n  //       type=\"symbol\"\n  //       anchor=\"bottom-right\"\n  //       longitude={this.state.popupInfo.state.longitude}\n  //       latitude={this.state.popupInfo.state.latitude}\n  //       onClose={() => this.setState({popupInfo: null})}\n  //       closeOnClick={true}\n  //       symbolLayout={{\n  //         \"text-field\": \"{title}\",\n  //         \"text-font\": [\"Open Sans Semibold\", \"Arial Unicode MS Bold\"],\n  //         \"text-offset\": [0, 0.6],\n  //         \"text-anchor\": \"top\"\n  //       }}/>\n  //   );\n  // }\n\n  render() {\n    const { name, description, stops, property } = this.state.active;\n    const renderLegendKeys = (stop, i) => {\n      return (\n        <div key={i} className='txt-s '>\n          <span className=' round-full w12 h12 inline-block ' style={{ backgroundColor: stop[1] }} />\n          <span >{`${stop[0].toLocaleString()}`}</span>\n        </div>\n      );\n    }\n\n   \n    const renderOptions = (option, i) => {\n      return (\n        <label key={i} className=\"toggle-container  right  left px3 py3\">\n          <input  onChange={() => this.setState({ active: options[i] })} checked={option.property === property} name=\"toggle\" type=\"radio\" />\n          <div  className=\"toggle grid txt-s color-white right   left toggle--active-white\">{option.name}</div>\n        </label>\n      );\n    }\n\n    return (\n      <div>\n        <div ref={this.mapRef} className=\"absolute top right left bottom align-middle grid\" />\n        <label className=\"ctxt-bold color-white absolute mt6 ml12\" ><b>Select Year:</b></label>\n        <div  className=\"toggle-group grid ctxt-bold color-white absolute mt36 ml12 border border--2 border--white bg-transparent  shadow-darken10  absolute  \">\n          {options.map(renderOptions)}\n        </div>\n        <div  className=\" bg-transparent color-white absolute bottom right mr12 mb24 py12 px12 border--white round border border--2 round shadow-darken10 z1 \">\n          <div className='mb6 color-white'>\n            <h2 className=\"txt-bold txt-s block color-white\">{name}</h2>\n            <p className='txt-s color-white'>{description}</p>\n          </div>\n          {stops.map(renderLegendKeys)}\n        </div>\n      </div>\n    \n\n      // <MapGL\n      //   {...viewport}\n      //   mapStyle=\"mapbox://styles/mapbox/dark-v9\"\n      //   mapboxApiAccessToken={TOKEN} >\n      //   {markers}\n      //   {this.renderPopup()}\n      //   <div className=\"nav\" style={navStyle}>\n      //     <NavigationControl/>\n      //     <Marker longitude={} latitude={} offsetTop={} offsetLeft={}>\n      //       <Pin onClick={() => this.setState({popupInfo: popupInfo})}/>\n      //     </Marker>\n      //     </div>\n      //   </div>\n      // </MapGL>\n\n      );\n      \n  }\n}\n\nexport default App;\n\n"]},"metadata":{},"sourceType":"module"}