{"ast":null,"code":"var _jsxFileName = \"/Users/garrettmillar/pandemic_dashboard/src/App.js\";\nimport React from 'react';\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport mapboxgl from 'mapbox-gl';\nimport ReactMapboxGl, { Layer, Feature, NavigationControl, Marker, Popup } from 'react-mapbox-gl';\nimport { Icon } from \"semantic-ui-react\";\nimport data from './pandemic_output.json';\nimport presence_data from './presence_pandemic.json';\nimport Tooltip from './components/tooltip';\nimport ReactDOM from 'react-dom';\nimport { ForceGraph, ForceGraphNode, ForceGraphLink } from 'react-vis-force'; // import ReactMapboxGl from 'react-mapbox-gl';\n\nmapboxgl.accessToken = 'pk.eyJ1IjoiZ2NtaWxsYXIiLCJhIjoiY2pvcDhrbGl4MDFvaTNrczR0d2hxcjdnNSJ9.JYgBw6y2pEq_AEAOCaoQpw';\nconst Map = ReactMapboxGl({\n  accessToken: 'pk.eyJ1IjoiZmFicmljOCIsImEiOiJjaWc5aTV1ZzUwMDJwdzJrb2w0dXRmc2d0In0.p6GGlfyV-WksaDV_KdN27A'\n});\nconst navStyle = {\n  position: \"absolute\",\n  top: 0,\n  left: 0,\n  padding: \"10px\"\n}; // var draw;\n\nvar stops = [[0, 'rgba(45,69,132, 0.4)'], [0.1, 'rgba(77,30,129, 0.4)'], [0.2, 'rgba(109,41,126, 0.4)'], [0.3, 'rgba(141,52,123, 0.4)'], [0.4, 'rgba(173,63,120, 0.4)'], [0.5, 'rgba(205,74,118, 0.4)'], [0.6, 'rgba(210,103,103\t, 0.4)'], [0.7, 'rgba(216,132,89,0.7)'], [0.8, 'rgba(222,161,75, 0.4)'], [0.9, 'rgba(228,190,61, 0.4)'], [1, 'rgba(240,249,33, 0.4)']];\nconst options = [{\n  name: '1993',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T0',\n  stops: stops\n}, {\n  name: '1994',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T1',\n  stops: stops\n}, {\n  name: '1995',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T2',\n  stops: stops\n}, {\n  name: '1996',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T3',\n  stops: stops\n}, {\n  name: '1997',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T4',\n  stops: stops\n}, {\n  name: '1998',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T5',\n  stops: stops\n}, {\n  name: '1999',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T6',\n  stops: stops\n}, {\n  name: '2000',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T7',\n  stops: stops\n}, {\n  name: '2001',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T8',\n  stops: stops\n}, {\n  name: '2002',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T9',\n  stops: stops\n}, {\n  name: '2003',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T10',\n  stops: stops\n}, {\n  name: '2004',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T11',\n  stops: stops\n}, {\n  name: '2005',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T12',\n  stops: stops\n}, {\n  name: '2006',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T13',\n  stops: stops\n}, {\n  name: '2007',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T14',\n  stops: stops\n}, {\n  name: '2008',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T15',\n  stops: stops\n}, {\n  name: '2009',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T16',\n  stops: stops\n}, {\n  name: '2010',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T17',\n  stops: stops\n}, {\n  name: '2011',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T18',\n  stops: stops\n}, {\n  name: '2012',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T19',\n  stops: stops\n}, {\n  name: '2013',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T20',\n  stops: stops\n}, {\n  name: '2014',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T21',\n  stops: stops\n}, {\n  name: '2015',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T22',\n  stops: stops\n}, {\n  name: '2016',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T23',\n  stops: stops\n}, {\n  name: '2017',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T24',\n  stops: stops\n}, {\n  name: '2018',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T25',\n  propertyPresence: 'Presence 1993',\n  stops: stops\n}];\nconst markerList = [{\n  name: '1993',\n  description: 'Presence',\n  property: 'Presence 1993'\n}, {\n  name: '1994',\n  description: 'Presence',\n  property: 'Presence 1994'\n}, {\n  name: '1995',\n  description: 'Presence',\n  property: 'Presence 1995'\n}, {\n  name: '1996',\n  description: 'Presence',\n  property: 'Presence 1996'\n}, {\n  name: '1997',\n  description: 'Presence',\n  property: 'Presence 1997'\n}, {\n  name: '1998',\n  description: 'Presence',\n  property: 'Presence 1998'\n}, {\n  name: '1999',\n  description: 'Presence',\n  property: 'Presence 1999'\n}, {\n  name: '2000',\n  description: 'Presence',\n  property: 'Presence 2000'\n}, {\n  name: '2001',\n  description: 'Presence',\n  property: 'Presence 2001'\n}, {\n  name: '2002',\n  description: 'Presence',\n  property: 'Presence 2002'\n}, {\n  name: '2003',\n  description: 'Presence',\n  property: 'Presence 2003'\n}, {\n  name: '2004',\n  description: 'Presence',\n  property: 'Presence 2004'\n}, {\n  name: '2005',\n  description: 'Presence',\n  property: 'Presence 2005'\n}, {\n  name: '2006',\n  description: 'Presence',\n  property: 'Presence 2006'\n}, {\n  name: '2007',\n  description: 'Presence',\n  property: 'Presence 2007'\n}, {\n  name: '2008',\n  description: 'Presence',\n  property: 'Presence 2008'\n}, {\n  name: '2009',\n  description: 'Presence',\n  property: 'Presence 2009'\n}, {\n  name: '2010',\n  description: 'Presence',\n  property: 'Presence 2010'\n}, {\n  name: '2011',\n  description: 'Presence',\n  property: 'Presence 2011'\n}, {\n  name: '2012',\n  description: 'Presence',\n  property: 'Presence 2012'\n}, {\n  name: '2013',\n  description: 'Presence',\n  property: 'Presence 2013'\n}, {\n  name: '2014',\n  description: 'Presence',\n  property: 'Presence 2014'\n}, {\n  name: '2015',\n  description: 'Presence',\n  property: 'Presence 2015'\n}, {\n  name: '2016',\n  description: 'Presence',\n  property: 'Presence 2016'\n}, {\n  name: '2017',\n  description: 'Presence',\n  property: 'Presence 2017'\n}, {\n  name: '2018',\n  description: 'Presence',\n  property: 'Presence 2018'\n}];\n\nclass App extends React.Component {\n  setTooltip(features) {\n    if (features.length) {\n      ReactDOM.render(React.createElement(Tooltip, {\n        features\n      }), this.tooltipContainer);\n    } else {\n      ReactDOM.unmountComponentAtNode(this.tooltipContainer);\n    }\n  }\n\n  constructor(props) {\n    super(props);\n    this.mapRef = React.createRef();\n    this.state = {\n      active: options[0],\n      viewport: {\n        latitude: 17.44212,\n        longitude: 78.391384,\n        zoom: 15,\n        bearing: 0,\n        pitch: 0,\n        width: \"100%\",\n        height: 500\n      },\n      popupInfo: null\n    };\n  }\n\n  componentDidUpdate() {\n    this.setFill();\n  }\n\n  componentDidMount() {\n    this.tooltipContainer = document.createElement('div');\n    this.map = new mapboxgl.Map({\n      container: this.mapRef.current,\n      style: 'mapbox://styles/gcmillar/ckc13n1qe3rgx1ilchl8u3xax',\n      // style: 'mapbox://styles/mapbox/dark-v10',\n      center: [12, 26],\n      zoom: 1.5\n    });\n    this.map.on('load', () => {\n      this.map.addSource('countries', {\n        type: 'geojson',\n        data\n      });\n      this.map.addSource('presence_data', {\n        type: 'geojson',\n        presence_data\n      });\n      this.map.addLayer({\n        id: 'countries',\n        type: 'fill',\n        source: 'countries'\n      }, 'country-label');\n      this.map.addLayer({\n        id: 'presence_data',\n        interactive: true,\n        type: \"symbol\",\n        source: 'presence_data',\n        layout: {\n          'icon-image': ['concat', ['get', 'icon'], '-15'],\n          'text-field': ['get', 'title'],\n          'text-font': ['Open Sans Semibold', 'Arial Unicode MS Bold'],\n          'text-offset': [0, 0.6],\n          'text-anchor': 'top'\n        }\n      });\n      this.setFill();\n      presence_data.features.forEach(marker => {\n        const markerEl = document.createElement('div');\n        markerEl.innerHTML = 'ðŸ•·';\n        new mapboxgl.Marker(markerEl, {\n          offset: [5, -5]\n        }).setLngLat(marker.geometry.coordinates).addTo(this.map);\n        markerEl.addEventListener('click', () => {\n          this.map.flyTo({\n            center: marker.geometry.coordinates,\n            zoom: 11\n          });\n        });\n      });\n    });\n    const tooltip = new mapboxgl.Marker(this.tooltipContainer, {\n      offset: [-120, 0]\n    }).setLngLat([0, 0]).addTo(this.map);\n    var popup = new mapboxgl.Popup({\n      closeButton: false,\n      closeOnClick: false\n    });\n    this.map.on('mouseenter', 'countries', e => {\n      this.map.getCanvas().style.cursor = 'pointer';\n    });\n    this.map.on('click', 'countries', e => {\n      const features = this.map.queryRenderedFeatures(e.point, {});\n      const {\n        name,\n        description,\n        stops,\n        property\n      } = this.state.active;\n      const prob_intro = features[0].properties[property];\n      this.map.getCanvas().style.cursor = features.length ? 'pointer' : '';\n      popup.setLngLat(e.lngLat).setHTML('<b><u>Country Information' + '</b></u>' + '<ul>' + '<li><b>Name: </b>' + features[0].properties[\"NAME\"] + '</li>' + '<li><b>Introduction Probability: </b>' + prob_intro + '</li>' + '</ul>').addTo(this.map);\n    });\n    this.map.on('click', 'presence_data', p => {\n      const presenceFeatures = this.map.queryRenderedFeatures(p.point, {}); // console.log(presenceFeatures)\n    });\n    this.map.on('mouseleave', 'countries', e => {\n      this.map.getCanvas().style.cursor = '';\n      popup.remove();\n    });\n  }\n\n  setFill() {\n    const {\n      property,\n      stops\n    } = this.state.active;\n    this.map.setPaintProperty('countries', 'fill-color', {\n      property,\n      stops\n    });\n    this.map.setPaintProperty('countries', 'fill-outline-color', {\n      property,\n      stops\n    }) // this.map.setTooltip('presence_data', '', {\n    //   property,\n    //   stops\n    // })  ;\n    ;\n  }\n\n  render() {\n    // return (\n    //   <Map\n    //     style=\"mapbox://styles/mapbox/streets-v9\"\n    //     containerStyle={{\n    //       height: '100vh',\n    //       width: '100vw'\n    //     }}\n    //   >\n    //     <Layer type=\"symbol\" id=\"marker\" layout={{ 'icon-image': 'marker-15' }}>\n    //       <Feature coordinates={[-0.481747846041145, 51.3233379650232]} />\n    //     </Layer>\n    //   </Map>\n    // );\n    // in render()\n    const {\n      name,\n      description,\n      stops,\n      property\n    } = this.state.active;\n\n    const renderLegendKeys = (stop, i) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: i,\n        className: \"txt-s \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \" round-full w12 h12 inline-block \",\n        style: {\n          backgroundColor: stop[1]\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 480,\n          columnNumber: 11\n        }\n      }, `${stop[0].toLocaleString()}`));\n    };\n\n    const renderOptions = (option, i) => {\n      return /*#__PURE__*/React.createElement(\"label\", {\n        key: i,\n        className: \"toggle-container  right  left px3 py3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 488,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        onChange: () => this.setState({\n          active: options[i]\n        }),\n        checked: option.property === property,\n        name: \"toggle\",\n        type: \"radio\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 489,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"toggle grid txt-s color-white right   left toggle--active-white\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 490,\n          columnNumber: 11\n        }\n      }, option.name));\n    };\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 496,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      ref: this.mapRef,\n      className: \"absolute top right left bottom align-middle grid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 497,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"ctxt-bold color-white absolute mt6 ml12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 498,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 498,\n        columnNumber: 69\n      }\n    }, \"Select Year:\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"toggle-group grid ctxt-bold color-white absolute mt36 ml12 border border--2 border--white bg-transparent  shadow-darken10  absolute  \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 499,\n        columnNumber: 9\n      }\n    }, options.map(renderOptions)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \" bg-transparent color-white absolute bottom right mr12 mb24 py12 px12 border--white round border border--2 round shadow-darken10 z1 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 502,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mb6 color-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 503,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"txt-bold txt-s block color-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 504,\n        columnNumber: 13\n      }\n    }, name), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"txt-s color-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 505,\n        columnNumber: 13\n      }\n    }, description)), stops.map(renderLegendKeys)));\n  } // constructor(props){\n  //   super(props)\n  //   this.state = {\n  //     addLinkArray: [], \n  //     name: \"\",\n  //     nodes:\n  //       [\n  //         {\"name\": \"fruit\", \"id\": 0},\n  //         {\"name\": \"apple\", \"id\": 1},\n  //         {\"name\": \"orange\", \"id\": 2},\n  //         {\"name\": \"banana\", \"id\": 3}\n  //       ],\n  //     links: \n  //       [\n  //         {\"source\": 0, \"target\": 1, \"id\": 0},\n  //         {\"source\": 0, \"target\": 2, \"id\": 1}\n  //       ]\n  //     }\n  //   this.handleAddNode = this.handleAddNode.bind(this)\n  //   this.addNode = this.addNode.bind(this)\n  // }\n\n\n  componentDidMount() {\n    const data = this.state;\n    FORCE.initForce(data.nodes, data.links);\n    FORCE.tick(this);\n    FORCE.drag();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.nodes !== this.state.nodes || prevState.links !== this.state.links) {\n      const data = this.state;\n      FORCE.initForce(data.nodes, data.links);\n      FORCE.tick(this);\n      FORCE.drag();\n    }\n  }\n\n  handleAddNode(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  }\n\n  addNode(e) {\n    e.preventDefault();\n    this.setState(prevState => ({\n      nodes: [...prevState.nodes, {\n        name: this.state.name,\n        id: prevState.nodes.length + 1\n      }],\n      name: ''\n    }));\n  }\n\n  render() {\n    var links = this.state.links.map(link => {\n      return /*#__PURE__*/React.createElement(Link, {\n        key: link.id,\n        data: link,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 565,\n          columnNumber: 17\n        }\n      });\n    });\n    var nodes = this.state.nodes.map(node => {\n      return /*#__PURE__*/React.createElement(Node, {\n        data: node,\n        name: node.name,\n        key: node.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 572,\n          columnNumber: 15\n        }\n      });\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"graph__container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 579,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"form-addSystem\",\n      onSubmit: this.addNode.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 580,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"form-addSystem__header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 581,\n        columnNumber: 15\n      }\n    }, \"New Node\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-addSystem__group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 582,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      value: this.state.name,\n      onChange: this.handleAddNode.bind(this),\n      name: \"name\",\n      className: \"form-addSystem__input\",\n      id: \"name\",\n      placeholder: \"Name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 583,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"form-addSystem__label\",\n      htmlFor: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 588,\n        columnNumber: 17\n      }\n    }, \"Name\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-addSystem__group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 590,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"btnn\",\n      type: \"submit\",\n      value: \"add node\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 591,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"svg\", {\n      className: \"graph\",\n      width: FORCE.width,\n      height: FORCE.height,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 594,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"g\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 595,\n        columnNumber: 17\n      }\n    }, links), /*#__PURE__*/React.createElement(\"g\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 598,\n        columnNumber: 17\n      }\n    }, nodes)));\n  }\n\n}\n\nvar FORCE = function (nsp) {\n  var width = 1080,\n      height = 250,\n      color = d3.scaleOrdinal(d3.schemeCategory10),\n      initForce = (nodes, links) => {\n    nsp.force = d3.forceSimulation(nodes).force(\"charge\", d3.forceManyBody().strength(-200)).force(\"link\", d3.forceLink(links).distance(70)).force(\"center\", d3.forceCenter().x(nsp.width / 2).y(nsp.height / 2)).force(\"collide\", d3.forceCollide([5]).iterations([5]));\n  },\n      enterNode = selection => {\n    var circle = selection.select('circle').attr(\"r\", 25).style(\"fill\", 'tomato').style(\"stroke\", \"bisque\").style(\"stroke-width\", \"3px\");\n    selection.select('text').style(\"fill\", \"honeydew\").style(\"font-weight\", \"600\").style(\"text-transform\", \"uppercase\").style(\"text-anchor\", \"middle\").style(\"alignment-baseline\", \"middle\").style(\"font-size\", \"10px\").style(\"font-family\", \"cursive\");\n  },\n      updateNode = selection => {\n    selection.attr(\"transform\", d => \"translate(\" + d.x + \",\" + d.y + \")\").attr(\"cx\", function (d) {\n      return d.x = Math.max(30, Math.min(width - 30, d.x));\n    }).attr(\"cy\", function (d) {\n      return d.y = Math.max(30, Math.min(height - 30, d.y));\n    });\n  },\n      enterLink = selection => {\n    selection.attr(\"stroke-width\", 3).attr(\"stroke\", \"bisque\");\n  },\n      updateLink = selection => {\n    selection.attr(\"x1\", d => d.source.x).attr(\"y1\", d => d.source.y).attr(\"x2\", d => d.target.x).attr(\"y2\", d => d.target.y);\n  },\n      updateGraph = selection => {\n    selection.selectAll('.node').call(updateNode);\n    selection.selectAll('.link').call(updateLink);\n  },\n      dragStarted = d => {\n    if (!d3.event.active) nsp.force.alphaTarget(0.3).restart();\n    d.fx = d.x;\n    d.fy = d.y;\n  },\n      dragging = d => {\n    d.fx = d3.event.x;\n    d.fy = d3.event.y;\n  },\n      dragEnded = d => {\n    if (!d3.event.active) nsp.force.alphaTarget(0);\n    d.fx = null;\n    d.fy = null;\n  },\n      drag = () => d3.selectAll('g.node').call(d3.drag().on(\"start\", dragStarted).on(\"drag\", dragging).on(\"end\", dragEnded)),\n      tick = that => {\n    that.d3Graph = d3.select(ReactDOM.findDOMNode(that));\n    nsp.force.on('tick', () => {\n      that.d3Graph.call(updateGraph);\n    });\n  };\n\n  nsp.width = width;\n  nsp.height = height;\n  nsp.enterNode = enterNode;\n  nsp.updateNode = updateNode;\n  nsp.enterLink = enterLink;\n  nsp.updateLink = updateLink;\n  nsp.updateGraph = updateGraph;\n  nsp.initForce = initForce;\n  nsp.dragStarted = dragStarted;\n  nsp.dragging = dragging;\n  nsp.dragEnded = dragEnded;\n  nsp.drag = drag;\n  nsp.tick = tick;\n  return nsp;\n}(FORCE || {}); ////////////////////////////////////////////////////////////////////////////\n/////// class App is the parent component of Link and Node\n////////////////////////////////////////////////////////////////////////////\n// class App extends React.Component {\n// }\n///////////////////////////////////////////////////////////\n/////// Link component\n///////////////////////////////////////////////////////////\n\n\nclass Link extends React.Component {\n  componentDidMount() {\n    this.d3Link = d3.select(ReactDOM.findDOMNode(this)).datum(this.props.data).call(FORCE.enterLink);\n  }\n\n  componentDidUpdate() {\n    this.d3Link.datum(this.props.data).call(FORCE.updateLink);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"line\", {\n      className: \"link\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 744,\n        columnNumber: 9\n      }\n    });\n  }\n\n} ///////////////////////////////////////////////////////////\n/////// Node component\n///////////////////////////////////////////////////////////\n\n\nclass Node extends React.Component {\n  componentDidMount() {\n    this.d3Node = d3.select(ReactDOM.findDOMNode(this)).datum(this.props.data).call(FORCE.enterNode);\n  }\n\n  componentDidUpdate() {\n    this.d3Node.datum(this.props.data).call(FORCE.updateNode);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"g\", {\n      className: \"node\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 768,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"circle\", {\n      onClick: this.props.addLink,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 769,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"text\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 770,\n        columnNumber: 11\n      }\n    }, this.props.data.name));\n  }\n\n}\n\nReactDOM.render( /*#__PURE__*/React.createElement(App, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 776,\n    columnNumber: 17\n  }\n}), document.querySelector('#root'));\nexport default App;","map":{"version":3,"sources":["/Users/garrettmillar/pandemic_dashboard/src/App.js"],"names":["React","mapboxgl","ReactMapboxGl","Layer","Feature","NavigationControl","Marker","Popup","Icon","data","presence_data","Tooltip","ReactDOM","ForceGraph","ForceGraphNode","ForceGraphLink","accessToken","Map","navStyle","position","top","left","padding","stops","options","name","description","property","propertyPresence","markerList","App","Component","setTooltip","features","length","render","createElement","tooltipContainer","unmountComponentAtNode","constructor","props","mapRef","createRef","state","active","viewport","latitude","longitude","zoom","bearing","pitch","width","height","popupInfo","componentDidUpdate","setFill","componentDidMount","document","map","container","current","style","center","on","addSource","type","addLayer","id","source","interactive","layout","forEach","marker","markerEl","innerHTML","offset","setLngLat","geometry","coordinates","addTo","addEventListener","flyTo","tooltip","popup","closeButton","closeOnClick","e","getCanvas","cursor","queryRenderedFeatures","point","prob_intro","properties","lngLat","setHTML","p","presenceFeatures","remove","setPaintProperty","renderLegendKeys","stop","i","backgroundColor","toLocaleString","renderOptions","option","setState","FORCE","initForce","nodes","links","tick","drag","prevProps","prevState","handleAddNode","target","value","addNode","preventDefault","link","node","bind","nsp","color","d3","scaleOrdinal","schemeCategory10","force","forceSimulation","forceManyBody","strength","forceLink","distance","forceCenter","x","y","forceCollide","iterations","enterNode","selection","circle","select","attr","updateNode","d","Math","max","min","enterLink","updateLink","updateGraph","selectAll","call","dragStarted","event","alphaTarget","restart","fx","fy","dragging","dragEnded","that","d3Graph","findDOMNode","Link","d3Link","datum","Node","d3Node","addLink","querySelector"],"mappings":"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","sourcesContent":["import React from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport mapboxgl from 'mapbox-gl'\nimport ReactMapboxGl, { Layer, Feature, NavigationControl, Marker, Popup } from 'react-mapbox-gl';\n\nimport { Icon } from \"semantic-ui-react\";\nimport data from './pandemic_output.json'\nimport presence_data from './presence_pandemic.json'\nimport Tooltip from './components/tooltip'\nimport ReactDOM from 'react-dom'\nimport {ForceGraph, ForceGraphNode, ForceGraphLink} from 'react-vis-force';\n\n// import ReactMapboxGl from 'react-mapbox-gl';\n\n\nmapboxgl.accessToken = 'pk.eyJ1IjoiZ2NtaWxsYXIiLCJhIjoiY2pvcDhrbGl4MDFvaTNrczR0d2hxcjdnNSJ9.JYgBw6y2pEq_AEAOCaoQpw';\nconst Map = ReactMapboxGl({\n  accessToken:\n    'pk.eyJ1IjoiZmFicmljOCIsImEiOiJjaWc5aTV1ZzUwMDJwdzJrb2w0dXRmc2d0In0.p6GGlfyV-WksaDV_KdN27A'\n});\n\n\nconst navStyle = {\n  position: \"absolute\",\n  top: 0,\n  left: 0,\n  padding: \"10px\"\n};\n// var draw;\nvar stops =  [\n  [0, 'rgba(45,69,132, 0.4)'],\t\n  [0.1, 'rgba(77,30,129, 0.4)'],\t\n  [0.2, 'rgba(109,41,126, 0.4)'],\t\t\t\n  [0.3, 'rgba(141,52,123, 0.4)'], \n  [0.4, 'rgba(173,63,120, 0.4)'],\t\n  [0.5, 'rgba(205,74,118, 0.4)'], \n  [0.6, 'rgba(210,103,103\t, 0.4)'],\t\t\n  [0.7, 'rgba(216,132,89,0.7)'], \n  [0.8, 'rgba(222,161,75, 0.4)'],\t\n  [0.9, 'rgba(228,190,61, 0.4)'],\n  [1, 'rgba(240,249,33, 0.4)']\n]\n\nconst options = [{\n  name: '1993',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T0',\n  stops: stops\n}, {\n  name: '1994',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T1',\n  stops: stops\n}, {\n  name: '1995',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T2',\n  stops: stops\n}, {\n  name: '1996',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T3',\n  stops: stops\n}, {\n  name: '1997',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T4',\n  stops: stops\n}, {\n  name: '1998',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T5',\n  stops: stops\n}, {\n  name: '1999',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T6',\n  stops: stops\n}, {\n  name: '2000',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T7',\n  stops: stops\n}, {\n  name: '2001',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T8',\n  stops: stops\n}, {\n  name: '2002',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T9',\n  stops: stops\n}, {\n  name: '2003',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T10',\n  stops: stops\n}, {\n  name: '2004',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T11',\n  stops: stops\n}, {\n  name: '2005',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T12',\n  stops: stops\n}, {\n  name: '2006',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T13',\n  stops: stops\n}, {\n  name: '2007',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T14',\n  stops: stops\n}, {\n  name: '2008',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T15',\n  stops: stops\n}, {\n  name: '2009',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T16',\n  stops: stops\n}, {\n  name: '2010',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T17',\n  stops: stops\n}, {\n  name: '2011',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T18',\n  stops: stops\n}, {\n  name: '2012',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T19',\n  stops: stops\n}, {\n  name: '2013',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T20',\n  stops: stops\n}, {\n  name: '2014',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T21',\n  stops: stops\n}, {\n  name: '2015',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T22',\n  stops: stops\n}, {\n  name: '2016',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T23',\n  stops: stops\n}, {\n  name: '2017',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T24',\n  stops: stops\n}, {\n  name: '2018',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T25',\n  propertyPresence: 'Presence 1993',\n  stops: stops\n}\n]\n\nconst markerList = [{\n  name: '1993',\n  description: 'Presence',\n  property: 'Presence 1993'\n}, {\n  name: '1994',\n  description: 'Presence',\n  property: 'Presence 1994'\n}, {\n  name: '1995',\n  description: 'Presence',\n  property: 'Presence 1995'\n}, {\n  name: '1996',\n  description: 'Presence',\n  property: 'Presence 1996'\n}, {\n  name: '1997',\n  description: 'Presence',\n  property: 'Presence 1997'\n}, {\n  name: '1998',\n  description: 'Presence',\n  property: 'Presence 1998'\n}, {\n  name: '1999',\n  description: 'Presence',\n  property: 'Presence 1999'\n}, {\n  name: '2000',\n  description: 'Presence',\n  property: 'Presence 2000'\n}, {\n  name: '2001',\n  description: 'Presence',\n  property: 'Presence 2001'\n}, {\n  name: '2002',\n  description: 'Presence',\n  property: 'Presence 2002'\n}, {\n  name: '2003',\n  description: 'Presence',\n  property: 'Presence 2003'\n}, {\n  name: '2004',\n  description: 'Presence',\n  property: 'Presence 2004'\n}, {\n  name: '2005',\n  description: 'Presence',\n  property: 'Presence 2005'\n}, {\n  name: '2006',\n  description: 'Presence',\n  property: 'Presence 2006'\n}, {\n  name: '2007',\n  description: 'Presence',\n  property: 'Presence 2007'\n}, {\n  name: '2008',\n  description: 'Presence',\n  property: 'Presence 2008'\n}, {\n  name: '2009',\n  description: 'Presence',\n  property: 'Presence 2009'\n}, {\n  name: '2010',\n  description: 'Presence',\n  property: 'Presence 2010'\n}, {\n  name: '2011',\n  description: 'Presence',\n  property: 'Presence 2011'\n}, {\n  name: '2012',\n  description: 'Presence',\n  property: 'Presence 2012'\n}, {\n  name: '2013',\n  description: 'Presence',\n  property: 'Presence 2013'\n}, {\n  name: '2014',\n  description: 'Presence',\n  property: 'Presence 2014'\n}, {\n  name: '2015',\n  description: 'Presence',\n  property: 'Presence 2015'\n}, {\n  name: '2016',\n  description: 'Presence',\n  property: 'Presence 2016'\n}, {\n  name: '2017',\n  description: 'Presence',\n  property: 'Presence 2017'\n}, {\n  name: '2018',\n  description: 'Presence',\n  property: 'Presence 2018'\n}\n]\n\nclass App extends React.Component {\n  mapRef = React.createRef();\n  map;\n  tooltipContainer;\n\n  setTooltip(features) {\n    if (features.length) {\n      ReactDOM.render(\n        React.createElement(\n          Tooltip, {\n            features\n          }\n        ),\n        this.tooltipContainer\n      );\n    } else {\n      ReactDOM.unmountComponentAtNode(this.tooltipContainer);\n    }\n  }\n\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      active: options[0],\n      viewport: {\n        latitude: 17.44212,\n        longitude: 78.391384,\n        zoom: 15,\n        bearing: 0,\n        pitch: 0,\n        width: \"100%\",\n        height: 500\n      },\n      popupInfo: null\n    };\n  }\n\n  componentDidUpdate() {\n    this.setFill();\n  }\n\n  componentDidMount() {\n    this.tooltipContainer = document.createElement('div');\n    this.map = new mapboxgl.Map({\n      container: this.mapRef.current,\n      style: 'mapbox://styles/gcmillar/ckc13n1qe3rgx1ilchl8u3xax',\n      // style: 'mapbox://styles/mapbox/dark-v10',\n      center: [12, 26],\n      zoom: 1.5,\n    });\n\n    this.map.on('load', () => {\n      this.map.addSource('countries', {\n        type: 'geojson',\n        data\n      });\n\n      this.map.addSource('presence_data', {\n        type: 'geojson',\n        presence_data\n      });\n\n      this.map.addLayer({\n        id: 'countries',\n        type: 'fill',\n        source: 'countries'\n      },'country-label'); \n\n      this.map.addLayer({\n        id: 'presence_data',\n        interactive: true,\n        type: \"symbol\",\n        source:  'presence_data',\n        layout: {\n          'icon-image': \n          ['concat', ['get', 'icon'], '-15'],\n          'text-field': ['get', 'title'],\n          'text-font': ['Open Sans Semibold', 'Arial Unicode MS Bold'],\n          'text-offset': [0, 0.6],\n          'text-anchor': 'top'\n        }\n      }); \n\n      this.setFill();\n\n      presence_data.features.forEach((marker) => {\n        const markerEl = document.createElement('div');\n        markerEl.innerHTML = 'ðŸ•·';\n        new mapboxgl.Marker(markerEl, { offset: [5,-5] })\n            .setLngLat(marker.geometry.coordinates)\n            .addTo(this.map);\n        markerEl.addEventListener('click', () => {\n          this.map.flyTo({\n              center: marker.geometry.coordinates,\n              zoom: 11,\n          });\n        });\n    });\n    \n    });\n      \n    \n\n    const tooltip = new mapboxgl.Marker(this.tooltipContainer, {\n      offset: [-120, 0]\n    }).setLngLat([0,0]).addTo(this.map);\n\n    var popup = new mapboxgl.Popup({\n      closeButton: false,\n      closeOnClick: false\n      });\n\n      this.map.on('mouseenter', 'countries', (e) => {\n        this.map.getCanvas().style.cursor =  'pointer';\n      });\n\n\n      this.map.on('click', 'countries', (e) => {\n        const features = this.map.queryRenderedFeatures(e.point, {\n      });\n      const { name, description, stops, property } = this.state.active;\n      const prob_intro = features[0].properties[property]\n      this.map.getCanvas().style.cursor = features.length ? 'pointer' : '';\n      popup \n      .setLngLat(e.lngLat)\n       .setHTML('<b><u>Country Information' + '</b></u>' +\n          '<ul>' +\n          '<li><b>Name: </b>' + features[0].properties[\"NAME\"] + '</li>' +\n          '<li><b>Introduction Probability: </b>' + prob_intro  + '</li>' +\n          '</ul>')\n      .addTo(this.map);\n    });\n\n    \n\n    this.map.on('click', 'presence_data', (p) => {\n      const presenceFeatures = this.map.queryRenderedFeatures(p.point, {\n    });\n    // console.log(presenceFeatures)\n  });\n    this.map.on('mouseleave', 'countries', (e) => {\n      this.map.getCanvas().style.cursor =  '';\n      popup.remove();\n    });\n\n   \n  }\n\n  \n\n  setFill() {\n    const { property, stops } = this.state.active;\n    this.map.setPaintProperty('countries', 'fill-color', {\n      property,\n      stops\n    },\n    )\n    this.map.setPaintProperty('countries', 'fill-outline-color', {\n      property,\n      stops\n    },\n    )\n      // this.map.setTooltip('presence_data', '', {\n      //   property,\n      //   stops\n      // })  ;\n      ;    \n  }\n\n\n\n  render() {\n    // return (\n    //   <Map\n    //     style=\"mapbox://styles/mapbox/streets-v9\"\n    //     containerStyle={{\n    //       height: '100vh',\n    //       width: '100vw'\n    //     }}\n    //   >\n    //     <Layer type=\"symbol\" id=\"marker\" layout={{ 'icon-image': 'marker-15' }}>\n    //       <Feature coordinates={[-0.481747846041145, 51.3233379650232]} />\n    //     </Layer>\n    //   </Map>\n    // );\n    // in render()\n      \n\n    const { name, description, stops, property } = this.state.active;\n    const renderLegendKeys = (stop, i) => {\n      return (\n        <div key={i} className='txt-s '>\n          <span className=' round-full w12 h12 inline-block ' style={{ backgroundColor: stop[1] }} />\n          <span >{`${stop[0].toLocaleString()}`}</span>\n        </div>\n      );\n    }\n\n   \n    const renderOptions = (option, i) => {\n      return (\n        <label key={i} className=\"toggle-container  right  left px3 py3\">\n          <input  onChange={() => this.setState({ active: options[i] })} checked={option.property === property} name=\"toggle\" type=\"radio\" />\n          <div  className=\"toggle grid txt-s color-white right   left toggle--active-white\">{option.name}</div>\n        </label>\n      );\n    }\n\n    return (\n      <div>\n        <div ref={this.mapRef} className=\"absolute top right left bottom align-middle grid\" />\n        <label className=\"ctxt-bold color-white absolute mt6 ml12\" ><b>Select Year:</b></label>\n        <div  className=\"toggle-group grid ctxt-bold color-white absolute mt36 ml12 border border--2 border--white bg-transparent  shadow-darken10  absolute  \">\n          {options.map(renderOptions)}\n        </div>\n        <div  className=\" bg-transparent color-white absolute bottom right mr12 mb24 py12 px12 border--white round border border--2 round shadow-darken10 z1 \">\n          <div className='mb6 color-white'>\n            <h2 className=\"txt-bold txt-s block color-white\">{name}</h2>\n            <p className='txt-s color-white'>{description}</p>\n          </div>\n          {stops.map(renderLegendKeys)}\n        </div>\n      </div>\n    );\n  }\n\n  // constructor(props){\n  //   super(props)\n  //   this.state = {\n  //     addLinkArray: [], \n  //     name: \"\",\n  //     nodes:\n  //       [\n  //         {\"name\": \"fruit\", \"id\": 0},\n  //         {\"name\": \"apple\", \"id\": 1},\n  //         {\"name\": \"orange\", \"id\": 2},\n  //         {\"name\": \"banana\", \"id\": 3}\n  //       ],\n  //     links: \n  //       [\n  //         {\"source\": 0, \"target\": 1, \"id\": 0},\n  //         {\"source\": 0, \"target\": 2, \"id\": 1}\n  //       ]\n  //     }\n  //   this.handleAddNode = this.handleAddNode.bind(this)\n  //   this.addNode = this.addNode.bind(this)\n  // }\n  \n    componentDidMount() {\n        const data = this.state;\n            FORCE.initForce(data.nodes, data.links)\n                FORCE.tick(this)\n                FORCE.drag()\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if (prevState.nodes !== this.state.nodes || prevState.links !== this.state.links) {\n            const data = this.state;\n                FORCE.initForce(data.nodes, data.links)\n                FORCE.tick(this)\n                FORCE.drag()\n        }\n    }\n  \n  handleAddNode(e) {\n        this.setState({ [e.target.name]: e.target.value });\n    }\n  \n  addNode(e) {\n        e.preventDefault();\n        this.setState(prevState => ({\n            nodes: [...prevState.nodes, { name:this.state.name, id: prevState.nodes.length + 1, }], name: ''\n        }));\n    }\n  \n    render() {\n        var links = this.state.links.map( (link) => {\n            return (\n                <Link\n                    key={link.id}\n                    data={link}\n                />);\n        });\n        var nodes = this.state.nodes.map( (node) => {\n              return (\n              <Node\n                  data={node}\n                  name={node.name}\n                  key={node.id}\n              />);\n          });\n        return (\n          <div className=\"graph__container\">\n            <form className=\"form-addSystem\" onSubmit={this.addNode.bind(this)}>\n              <h4 className=\"form-addSystem__header\">New Node</h4>\n              <div className=\"form-addSystem__group\">\n                <input value={this.state.name} onChange={this.handleAddNode.bind(this)}\n                  name=\"name\"\n                  className=\"form-addSystem__input\"\n                  id=\"name\"\n                  placeholder=\"Name\"/>\n                <label className=\"form-addSystem__label\" htmlFor=\"title\">Name</label>\n              </div>\n              <div className=\"form-addSystem__group\">\n                <input className=\"btnn\" type=\"submit\" value=\"add node\" />\n              </div>\n            </form>\n            <svg className=\"graph\" width={FORCE.width} height={FORCE.height}>\n                <g>\n                    {links}\n                </g>\n                <g>\n                    {nodes}\n                </g>\n            </svg>\n          </div>\n        );\n    }\n}\n\n\nvar FORCE = (function(nsp){\n  \n  var \n  width = 1080,\n  height = 250,\n  color = d3.scaleOrdinal(d3.schemeCategory10),\n      \n  initForce = (nodes, links) => {\n    nsp.force = d3.forceSimulation(nodes)\n      .force(\"charge\", d3.forceManyBody().strength(-200))\n      .force(\"link\", d3.forceLink(links).distance(70))\n      .force(\"center\", d3.forceCenter().x(nsp.width /2).y(nsp.height / 2))\n      .force(\"collide\", d3.forceCollide([5]).iterations([5]));\n  },\n\n  enterNode = (selection) => {\n    var circle = selection.select('circle')\n      .attr(\"r\", 25)\n      .style(\"fill\", 'tomato' ) \n      .style(\"stroke\", \"bisque\")\n      .style(\"stroke-width\", \"3px\")\n\n    selection.select('text')\n      .style(\"fill\", \"honeydew\")\n      .style(\"font-weight\", \"600\")\n      .style(\"text-transform\", \"uppercase\")\n      .style(\"text-anchor\", \"middle\")\n      .style(\"alignment-baseline\", \"middle\")\n      .style(\"font-size\", \"10px\")\n      .style(\"font-family\", \"cursive\")\n    },\n\n  updateNode = (selection) => {\n    selection\n      .attr(\"transform\", (d) => \"translate(\" + d.x + \",\" + d.y + \")\")\n      .attr(\"cx\", function(d) { return d.x = Math.max(30, Math.min(width - 30, d.x)); })\n      .attr(\"cy\", function(d) { return d.y = Math.max(30, Math.min(height - 30, d.y)); })\n    },\n\n  enterLink = (selection) => {\n    selection\n      .attr(\"stroke-width\", 3)\n      .attr(\"stroke\",\"bisque\")\n  },\n\n  updateLink = (selection) => {\n    selection\n      .attr(\"x1\", (d) => d.source.x)\n      .attr(\"y1\", (d) => d.source.y)\n      .attr(\"x2\", (d) => d.target.x)\n      .attr(\"y2\", (d) => d.target.y);\n  },\n\n  updateGraph = (selection) => {\n    selection.selectAll('.node')\n      .call(updateNode)\n    selection.selectAll('.link')\n      .call(updateLink);\n  },\n\n  dragStarted = (d) => {\n    if (!d3.event.active) nsp.force.alphaTarget(0.3).restart();\n    d.fx = d.x;\n    d.fy = d.y\n  },\n\n  dragging = (d) => {\n    d.fx = d3.event.x;\n    d.fy = d3.event.y\n  },\n      \n  dragEnded = (d) => {\n    if (!d3.event.active) nsp.force.alphaTarget(0);\n      d.fx = null;\n      d.fy = null\n  },\n\n  drag = () => d3.selectAll('g.node')\n    .call(d3.drag()\n      .on(\"start\", dragStarted)\n      .on(\"drag\", dragging)\n      .on(\"end\", dragEnded)\n  ),\n\n  tick = (that) => {\n    that.d3Graph = d3.select(ReactDOM.findDOMNode(that));\n    nsp.force.on('tick', () => {\n      that.d3Graph.call(updateGraph)\n    });\n  };\n  \n  nsp.width = width;\n  nsp.height = height;\n  nsp.enterNode = enterNode;\n  nsp.updateNode = updateNode;\n  nsp.enterLink = enterLink;\n  nsp.updateLink = updateLink;\n  nsp.updateGraph = updateGraph;\n  nsp.initForce = initForce;\n  nsp.dragStarted = dragStarted;\n  nsp.dragging = dragging;\n  nsp.dragEnded = dragEnded;\n  nsp.drag = drag;\n  nsp.tick = tick;\n  \n  return nsp\n  \n})(FORCE || {})\n\n////////////////////////////////////////////////////////////////////////////\n/////// class App is the parent component of Link and Node\n////////////////////////////////////////////////////////////////////////////\n\n// class App extends React.Component {\n  \n// }\n\n///////////////////////////////////////////////////////////\n/////// Link component\n///////////////////////////////////////////////////////////\n\nclass Link extends React.Component {\n\n    componentDidMount() {\n      this.d3Link = d3.select(ReactDOM.findDOMNode(this))\n        .datum(this.props.data)\n        .call(FORCE.enterLink);\n    }\n  \n    componentDidUpdate() {\n      this.d3Link.datum(this.props.data)\n        .call(FORCE.updateLink);\n    }\n\n    render() {\n      return (\n        <line className='link' />\n      );\n    }\n}\n\n///////////////////////////////////////////////////////////\n/////// Node component\n///////////////////////////////////////////////////////////\n\nclass Node extends React.Component {\n\n    componentDidMount() {\n      this.d3Node = d3.select(ReactDOM.findDOMNode(this))\n        .datum(this.props.data)\n        .call(FORCE.enterNode)\n    }\n\n    componentDidUpdate() {\n      this.d3Node.datum(this.props.data)\n        .call(FORCE.updateNode)\n    }\n\n    render() {\n      return (\n        <g className='node'>\n          <circle onClick={this.props.addLink}/>\n          <text>{this.props.data.name}</text>\n        </g>\n      );\n    }\n}\n\nReactDOM.render(<App />, document.querySelector('#root'))\nexport default App;\n"]},"metadata":{},"sourceType":"module"}