{"ast":null,"code":"import { range } from 'd3-array';\nimport { scaleQuantile } from 'd3-scale';\nexport function updatePercentiles(featureCollection, accessor) {\n  const {\n    features\n  } = featureCollection;\n  const scale = scaleQuantile().domain(features.map(accessor)).range(range(9));\n  return {\n    type: 'FeatureCollection',\n    features: features.map(f => {\n      const value = accessor(f);\n      const properties = { ...f.properties,\n        value,\n        percentile: scale(value)\n      };\n      return { ...f,\n        properties\n      };\n    })\n  };\n}","map":{"version":3,"sources":["/Users/garrettmillar/pandemic_dashboard/src/utils.js"],"names":["range","scaleQuantile","updatePercentiles","featureCollection","accessor","features","scale","domain","map","type","f","value","properties","percentile"],"mappings":"AAAA,SAAQA,KAAR,QAAoB,UAApB;AACA,SAAQC,aAAR,QAA4B,UAA5B;AAEA,OAAO,SAASC,iBAAT,CAA2BC,iBAA3B,EAA8CC,QAA9C,EAAwD;AAC7D,QAAM;AAACC,IAAAA;AAAD,MAAaF,iBAAnB;AACA,QAAMG,KAAK,GAAGL,aAAa,GACxBM,MADW,CACJF,QAAQ,CAACG,GAAT,CAAaJ,QAAb,CADI,EAEXJ,KAFW,CAELA,KAAK,CAAC,CAAD,CAFA,CAAd;AAGA,SAAO;AACLS,IAAAA,IAAI,EAAE,mBADD;AAELJ,IAAAA,QAAQ,EAAEA,QAAQ,CAACG,GAAT,CAAaE,CAAC,IAAI;AAC1B,YAAMC,KAAK,GAAGP,QAAQ,CAACM,CAAD,CAAtB;AACA,YAAME,UAAU,GAAG,EACjB,GAAGF,CAAC,CAACE,UADY;AAEjBD,QAAAA,KAFiB;AAGjBE,QAAAA,UAAU,EAAEP,KAAK,CAACK,KAAD;AAHA,OAAnB;AAKA,aAAO,EAAC,GAAGD,CAAJ;AAAOE,QAAAA;AAAP,OAAP;AACD,KARS;AAFL,GAAP;AAYD","sourcesContent":["import {range} from 'd3-array';\nimport {scaleQuantile} from 'd3-scale';\n\nexport function updatePercentiles(featureCollection, accessor) {\n  const {features} = featureCollection;\n  const scale = scaleQuantile()\n    .domain(features.map(accessor))\n    .range(range(9));\n  return {\n    type: 'FeatureCollection',\n    features: features.map(f => {\n      const value = accessor(f);\n      const properties = {\n        ...f.properties,\n        value,\n        percentile: scale(value)\n      };\n      return {...f, properties};\n    })\n  };\n}\n"]},"metadata":{},"sourceType":"module"}