{"ast":null,"code":"var _jsxFileName = \"/Users/garrettmillar/pandemic_dashboard/src/App.js\";\nimport React, { useState, useRef, useCallback, Component } from 'react';\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport mapboxgl from 'mapbox-gl';\nimport * as MapboxGeocoder from '@mapbox/mapbox-gl-geocoder';\nimport MapGL, { NavigationControl, Marker, Popup } from \"react-map-gl\";\nimport { render } from \"react-dom\";\nimport { Icon } from \"semantic-ui-react\";\nimport data from './pandemic_output.json';\nimport presence_data from './presence_pandemic.json';\nimport Tooltip from './components/tooltip';\nimport ReactDOM from 'react-dom';\nimport ReactMapboxGl from 'react-mapbox-gl';\nimport DeckGL from '@deck.gl/react';\nimport { ScatterplotLayer, GeoJsonLayer, ArcLayer } from '@deck.gl/layers';\nimport { StaticMap } from 'react-map-gl';\nimport { MapboxLayer } from '@deck.gl/mapbox';\nimport \"mapbox-gl/dist/mapbox-gl.css\";\nimport \"react-map-gl-geocoder/dist/mapbox-gl-geocoder.css\";\nimport StylesControl from 'mapbox-gl-controls/lib/styles';\nimport CompassControl from 'mapbox-gl-controls/lib/compass';\nimport RulerControl from 'mapbox-gl-controls/lib/ruler';\nimport ZoomControl from 'mapbox-gl-controls/lib/zoom';\nimport LanguageControl from 'mapbox-gl-controls/lib/language';\nimport InspectControl from 'mapbox-gl-controls/lib/inspect';\nimport TooltipControl from 'mapbox-gl-controls/lib/tooltip';\nimport arcData from './arcs.json';\nimport { json } from 'd3-request';\nimport { COORDINATE_SYSTEM } from '@deck.gl/core';\nmapboxgl.accessToken = 'pk.eyJ1IjoiZ2NtaWxsYXIiLCJhIjoiY2pvcDhrbGl4MDFvaTNrczR0d2hxcjdnNSJ9.JYgBw6y2pEq_AEAOCaoQpw';\nconst MAPBOX_TOKEN = 'pk.eyJ1IjoiZ2NtaWxsYXIiLCJhIjoiY2pvcDhrbGl4MDFvaTNrczR0d2hxcjdnNSJ9.JYgBw6y2pEq_AEAOCaoQpw';\nvar stops = [[0, 'rgba(45,69,132, 0.4)'], [0.1, 'rgba(77,30,129, 0.4)'], [0.2, 'rgba(109,41,126, 0.4)'], [0.3, 'rgba(141,52,123, 0.4)'], [0.4, 'rgba(173,63,120, 0.4)'], [0.5, 'rgba(205,74,118, 0.4)'], [0.6, 'rgba(210,103,103\t, 0.4)'], [0.7, 'rgba(216,132,89,0.7)'], [0.8, 'rgba(222,161,75, 0.4)'], [0.9, 'rgba(228,190,61, 0.4)'], [1, 'rgba(240,249,33, 0.4)']];\nconst options = [{\n  name: '1993',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T0',\n  stops: stops\n}, {\n  name: '1994',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T1',\n  stops: stops\n}, {\n  name: '1995',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T2',\n  stops: stops\n}, {\n  name: '1996',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T3',\n  stops: stops\n}, {\n  name: '1997',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T4',\n  stops: stops\n}, {\n  name: '1998',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T5',\n  stops: stops\n}, {\n  name: '1999',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T6',\n  stops: stops\n}, {\n  name: '2000',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T7',\n  stops: stops\n}, {\n  name: '2001',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T8',\n  stops: stops\n}, {\n  name: '2002',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T9',\n  stops: stops\n}, {\n  name: '2003',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T10',\n  stops: stops\n}, {\n  name: '2004',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T11',\n  stops: stops\n}, {\n  name: '2005',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T12',\n  stops: stops\n}, {\n  name: '2006',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T13',\n  stops: stops\n}, {\n  name: '2007',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T14',\n  stops: stops\n}, {\n  name: '2008',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T15',\n  stops: stops\n}, {\n  name: '2009',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T16',\n  stops: stops\n}, {\n  name: '2010',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T17',\n  stops: stops\n}, {\n  name: '2011',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T18',\n  stops: stops\n}, {\n  name: '2012',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T19',\n  stops: stops\n}, {\n  name: '2013',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T20',\n  stops: stops\n}, {\n  name: '2014',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T21',\n  stops: stops\n}, {\n  name: '2015',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T22',\n  stops: stops\n}, {\n  name: '2016',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T23',\n  stops: stops\n}, {\n  name: '2017',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T24',\n  stops: stops\n}, {\n  name: '2018',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T25',\n  propertyPresence: 'Presence 1993',\n  stops: stops\n}];\nconst markerList = [{\n  name: '1993',\n  description: 'Presence',\n  property: 'Presence 1993'\n}, {\n  name: '1994',\n  description: 'Presence',\n  property: 'Presence 1994'\n}, {\n  name: '1995',\n  description: 'Presence',\n  property: 'Presence 1995'\n}, {\n  name: '1996',\n  description: 'Presence',\n  property: 'Presence 1996'\n}, {\n  name: '1997',\n  description: 'Presence',\n  property: 'Presence 1997'\n}, {\n  name: '1998',\n  description: 'Presence',\n  property: 'Presence 1998'\n}, {\n  name: '1999',\n  description: 'Presence',\n  property: 'Presence 1999'\n}, {\n  name: '2000',\n  description: 'Presence',\n  property: 'Presence 2000'\n}, {\n  name: '2001',\n  description: 'Presence',\n  property: 'Presence 2001'\n}, {\n  name: '2002',\n  description: 'Presence',\n  property: 'Presence 2002'\n}, {\n  name: '2003',\n  description: 'Presence',\n  property: 'Presence 2003'\n}, {\n  name: '2004',\n  description: 'Presence',\n  property: 'Presence 2004'\n}, {\n  name: '2005',\n  description: 'Presence',\n  property: 'Presence 2005'\n}, {\n  name: '2006',\n  description: 'Presence',\n  property: 'Presence 2006'\n}, {\n  name: '2007',\n  description: 'Presence',\n  property: 'Presence 2007'\n}, {\n  name: '2008',\n  description: 'Presence',\n  property: 'Presence 2008'\n}, {\n  name: '2009',\n  description: 'Presence',\n  property: 'Presence 2009'\n}, {\n  name: '2010',\n  description: 'Presence',\n  property: 'Presence 2010'\n}, {\n  name: '2011',\n  description: 'Presence',\n  property: 'Presence 2011'\n}, {\n  name: '2012',\n  description: 'Presence',\n  property: 'Presence 2012'\n}, {\n  name: '2013',\n  description: 'Presence',\n  property: 'Presence 2013'\n}, {\n  name: '2014',\n  description: 'Presence',\n  property: 'Presence 2014'\n}, {\n  name: '2015',\n  description: 'Presence',\n  property: 'Presence 2015'\n}, {\n  name: '2016',\n  description: 'Presence',\n  property: 'Presence 2016'\n}, {\n  name: '2017',\n  description: 'Presence',\n  property: 'Presence 2017'\n}, {\n  name: '2018',\n  description: 'Presence',\n  property: 'Presence 2018'\n}]; // console.log(arcData);\n// var arcDataString = JSON.stringify(arcData);\n// var arcData_Array = JSON.parse(arcDataString);\n// console.log(arcData_Array);\n\nconst myDeckLayer = new MapboxLayer({\n  coordinateSystem: COORDINATE_SYSTEM.LNGLAT_OFFSETS,\n  id: 'my-scatterplot',\n  type: ArcLayer,\n  data: arcData,\n  getSourceColor: d => [144, 238, 144],\n  getTargetColor: d => [0, 128, 200],\n  // getSourceColor: d => [255,127,80],\n  // getTargetColor: d => [240,230,140],\n  // getFillColor: [255, 0, 0],\n  strokeWidth: 0.1,\n  getSourcePosition: d => d.START,\n  getTargetPosition: d => d.END,\n  pickable: true,\n  auto_highlight: true\n}); // // });\n// const myDeckLayer =  new ArcLayer({\n//   id: 'arcs',\n//   data: \n//        {\n//          inbound: 72633,\n//          outbound: 74735,\n//          from: {\n//            name: '19th St. Oakland (19TH)',\n//            coordinates: [-122.269029, 37.80787]\n//          },\n//          to: {\n//            name: '12th St. Oakland City Center (12TH)',\n//            coordinates: [-122.271604, 37.803664]\n//        },\n//   // dataTransform: d => d.features.filter(f => f.properties.scalerank < 4),\n//   // Styles\n//   getSourcePosition: d.coordinates\n//   getTargetPosition: f => f.geometry.coordinates,\n//   getSourceColor: [0, 128, 200],\n//   getTargetColor: [200, 0, 80],\n//   getWidth: 1\n// })\n// const myDeckLayer =  new ArcLayer({\n//   id: 'arcs',\n//   data: AIR_PORTS,\n//   dataTransform: d => d.features.filter(f => f.properties.scalerank < 4),\n//   // Styles\n//   getSourcePosition: f => [-0.4531566, 51.4709959], // London\n//   getTargetPosition: f => f.geometry.coordinates,\n//   getSourceColor: [0, 128, 200],\n//   getTargetColor: [200, 0, 80],\n//   getWidth: 1\n// })\n\nconsole.log(myDeckLayer);\n\nclass App extends React.Component {\n  setTooltip(features) {\n    if (features.length) {\n      ReactDOM.render(React.createElement(Tooltip, {\n        features\n      }), this.tooltipContainer);\n    } else {\n      ReactDOM.unmountComponentAtNode(this.tooltipContainer);\n    }\n  }\n\n  constructor(props) {\n    super(props);\n    this.mapRef = React.createRef();\n\n    this.handleViewportChange = viewport => {\n      this.setState({\n        viewport: { ...this.state.viewport,\n          ...viewport\n        }\n      });\n    };\n\n    this.handleGeocoderViewportChange = viewport => {\n      const geocoderDefaultOverrides = {\n        transitionDuration: 1000\n      };\n      return this.handleViewportChange({ ...viewport,\n        ...geocoderDefaultOverrides\n      });\n    };\n\n    this.mapRef = React.createRef();\n\n    this.onViewportChange = viewport => {\n      const {\n        width,\n        height,\n        ...etc\n      } = viewport;\n      this.setState({\n        viewport: etc\n      });\n    };\n\n    this.state = {\n      active: options[0],\n      layers: [{\n        name: 'countries',\n        layer: {\n          'id': 'countries',\n          'type': 'fill',\n          'source': 'countries',\n          'layout': {}\n        }\n      }, {\n        name: myDeckLayer,\n        layer: myDeckLayer\n      }]\n    };\n    this.map = null; // width: 0, \n    // height: 0 ,\n  }\n\n  componentDidUpdate() {\n    this.setFill();\n  }\n\n  componentDidMount() {\n    this.tooltipContainer = document.createElement('div');\n    this.map = new mapboxgl.Map({\n      container: this.mapRef.current,\n      style: 'mapbox://styles/gcmillar/ckc13n1qe3rgx1ilchl8u3xax',\n      // style: 'mapbox://styles/mapbox/dark-v10',\n      center: [20, 40],\n      zoom: 1.45,\n      pitch: 80\n    });\n    /* Zoom */\n    // this.map.addControl(new ZoomControl(), 'top-right');\n    // /* Ruler */\n    // this.map.addControl(new RulerControl(), 'bottom-left');\n    // /* Inspect */\n    // this.map.addControl(new InspectControl(), 'bottom-left');\n\n    /* Compass */\n    // this.map.addControl(new CompassControl(), 'top-right');\n\n    this.map.on('load', () => {\n      this.map.addLayer(myDeckLayer); // this.map.addLayer({\n      //           id: 'my-arc',\n      //           type: 'ArcLayer',\n      //           data: arcData,\n      //           getSourcePosition: d => d.START,\n      //           getTargetPosition: d => d.END,\n      //           getSourceColor: d => [64, 255, 0],\n      //           getTargetColor: d => [0, 128, 200]\n      //       // });\n      //       //Add the deck.gl arc layer to the map \n      //       // .addLayer(arclayer, 'waterway-label')\n      // });\n      // if (this.map.getLayer(\"countries\")) {\n      //   this.map.removeLayer(\"countries\");\n      // };\n      // if (this.map.getSource(\"countries\")) {\n      //   this.map.removeSource(\"countries\");\n      // };\n\n      this.map.addSource('countries', {\n        type: 'geojson',\n        data\n      });\n      this.map.addSource('presence_data', {\n        type: 'geojson',\n        presence_data\n      });\n      this.map.addLayer({\n        id: 'countries',\n        type: 'fill',\n        source: 'countries'\n      }, 'country-label');\n      this.map.addLayer({\n        id: 'presence_data',\n        interactive: true,\n        type: \"symbol\",\n        source: 'presence_data',\n        layout: {\n          'icon-image': ['concat', ['get', 'icon'], '-15'],\n          'text-field': ['get', 'title'],\n          'text-font': ['Open Sans Semibold', 'Arial Unicode MS Bold'],\n          'text-offset': [0, 0.6],\n          'text-anchor': 'top'\n        }\n      }); // this.map.addLayer(arclayer, 'waterway-label');\n\n      this.setFill(); // this.map.on('styledata', function () {\n      //   // Triggered when `setStyle` is called.\n      //   if (data) addLayer();\n      // });\n      // this.map.addControl(new mapboxgl.FullscreenControl());\n      //   presence_data.features.forEach((marker) => {\n      //     const markerEl = document.createElement('div');\n      //     markerEl.innerHTML = 'ðŸ¦Ÿ';\n      //     new mapboxgl.Marker(markerEl, { offset: [5,-5] })\n      //         .setLngLat(marker.geometry.coordinates)\n      //         .addTo(this.map);\n      //     markerEl.addEventListener('click', () => {\n      //       this.map.flyTo({\n      //           center: marker.geometry.coordinates,\n      //           zoom: 11,\n      //       });\n      //     });\n      // });\n    }); // Original ES6 Classâ€”Â https://github.com/tobinbradley/mapbox-gl-pitch-toggle-control\n    // export default class PitchToggle {\n\n    class PitchToggle {\n      constructor({\n        bearing = -20,\n        pitch = 70,\n        minpitchzoom = null\n      }) {\n        this._bearing = bearing;\n        this._pitch = pitch;\n        this._minpitchzoom = minpitchzoom;\n      }\n\n      onAdd(map) {\n        this._map = map;\n\n        let _this = this;\n\n        this._btn = document.createElement(\"button\");\n        this._btn.className = \"mapboxgl-ctrl-icon mapboxgl-ctrl-pitchtoggle-3d\";\n        this._btn.type = \"button\";\n        this._btn[\"aria-label\"] = \"Toggle Pitch\";\n\n        this._btn.onclick = function () {\n          if (map.getPitch() === 0) {\n            let options = {\n              pitch: _this._pitch,\n              bearing: _this._bearing\n            };\n\n            if (_this._minpitchzoom && map.getZoom() > _this._minpitchzoom) {\n              options.zoom = _this._minpitchzoom;\n            }\n\n            map.easeTo(options);\n            _this._btn.className = \"mapboxgl-ctrl-icon mapboxgl-ctrl-pitchtoggle-2d\";\n          } else {\n            map.easeTo({\n              pitch: 0,\n              bearing: 0\n            });\n            _this._btn.className = \"mapboxgl-ctrl-icon mapboxgl-ctrl-pitchtoggle-3d\";\n          }\n        };\n\n        this._container = document.createElement(\"div\");\n        this._container.className = \"mapboxgl-ctrl-group mapboxgl-ctrl\";\n\n        this._container.appendChild(this._btn);\n\n        return this._container;\n      }\n\n      onRemove() {\n        this._container.parentNode.removeChild(this._container);\n\n        this._map = undefined;\n      }\n\n    }\n    /* Idea from Stack Overflow https://stackoverflow.com/a/51683226  */\n\n\n    class MapboxGLButtonControl {\n      constructor({\n        className = \"\",\n        title = \"\",\n        eventHandler = \"\"\n      }) {\n        this._className = className;\n        this._title = title;\n        this._eventHandler = eventHandler;\n      }\n\n      onAdd(map) {\n        this._btn = document.createElement(\"button\");\n        this._btn.className = \"mapboxgl-ctrl-icon\" + \" \" + this._className;\n        this._btn.type = \"button\";\n        this._btn.title = this._title;\n        this._btn.onclick = this._eventHandler;\n        this._container = document.createElement(\"div\");\n        this._container.className = \"mapboxgl-ctrl-group mapboxgl-ctrl\";\n\n        this._container.appendChild(this._btn);\n\n        return this._container;\n      }\n\n      onRemove() {\n        this._container.parentNode.removeChild(this._container);\n\n        this._map = undefined;\n      }\n\n    }\n    /* Event Handlers */\n\n\n    function one(event) {\n      alert(\"Event handler when clicking on \\r\\n\" + event.target.className);\n      console.log(\"event number 1\", event);\n    }\n\n    function two(event) {\n      alert(\"Event handler when clicking on \\r\\n\" + event.target.className);\n      console.log(\"event number 2\", event);\n    }\n\n    function three(event) {\n      alert(\"Event handler when clicking on \\r\\n\" + event.target.className);\n      console.log(\"event number 3\", event);\n    }\n    /* Instantiate new controls with custom event handlers */\n\n\n    const ctrlPoint = new MapboxGLButtonControl({\n      className: \"mapbox-gl-draw_point\",\n      title: \"Draw Point\",\n      eventHandler: one\n    });\n    const ctrlLine = new MapboxGLButtonControl({\n      className: \"mapbox-gl-draw_line\",\n      title: \"Draw Line\",\n      eventHandler: two\n    });\n    const ctrlPolygon = new MapboxGLButtonControl({\n      className: \"mapbox-gl-draw_polygon\",\n      title: \"Draw Polygon\",\n      eventHandler: three\n    });\n    /* Add Controls to the Map */\n    // this.map.addControl(new mapboxgl.NavigationControl(), \"top-left\");\n\n    this.map.addControl(new MapboxGeocoder({\n      accessToken: 'pk.eyJ1IjoiZ2NtaWxsYXIiLCJhIjoiY2pvcDhrbGl4MDFvaTNrczR0d2hxcjdnNSJ9.JYgBw6y2pEq_AEAOCaoQpw',\n      mapboxgl: mapboxgl,\n      placeholder: 'Search for a Location'\n    }), 'top-right');\n    this.map.addControl(new PitchToggle({\n      minpitchzoom: 11\n    }), \"top-right\"); // this.map.addControl(ctrlPoint, \"bottom-left\");\n    // this.map.addControl(ctrlLine, \"bottom-right\");\n    // this.map.addControl(ctrlPolygon, \"top-left\");\n\n    const tooltip = new mapboxgl.Marker(this.tooltipContainer, {\n      offset: [-120, 0]\n    }).setLngLat([0, 0]).addTo(this.map);\n    var popup = new mapboxgl.Popup({\n      closeButton: false,\n      closeOnClick: false\n    });\n    this.map.on('mouseenter', 'countries', e => {\n      this.map.getCanvas().style.cursor = 'pointer';\n    });\n    this.map.on('click', 'countries', e => {\n      const features = this.map.queryRenderedFeatures(e.point, {});\n      const {\n        name,\n        description,\n        stops,\n        property\n      } = this.state.active;\n      const prob_intro = features[0].properties[property];\n      this.map.getCanvas().style.cursor = features.length ? 'pointer' : '';\n      popup.setLngLat(e.lngLat).setHTML('<b><u>Country Information' + '</b></u>' + '<ul>' + '<li><b>Name: </b>' + features[0].properties[\"NAME\"] + '</li>' + '<li><b>Introduction Probability: </b>' + prob_intro + '</li>' + '</ul>').addTo(this.map);\n    }); //// with custom styles:\n    // this.map.addControl(new StylesControl({\n    //   styles: [\n    //     {\n    //       label: 'Streets',\n    //       styleName: 'Mapbox Streets',\n    //       styleUrl: 'mapbox://styles/mapbox/streets-v9',\n    //     }, {\n    //       label: 'Satellite',\n    //       styleName: 'Satellite',\n    //       styleUrl: 'mapbox://styles/mapbox/satellite-v9',\n    //     },\n    //   ],\n    //   onChange: (style) => console.log(style),\n    // }, \n    // // this.map.getSource('countries').setData(data)\n    // // this.map.addLayer('countries','country-label')\n    // ), 'top-right');\n\n    this.map.on('click', 'presence_data', p => {\n      const presenceFeatures = this.map.queryRenderedFeatures(p.point, {}); // console.log(presenceFeatures)\n    });\n    this.map.on('mouseleave', 'countries', e => {\n      this.map.getCanvas().style.cursor = '';\n      popup.remove();\n    });\n  }\n\n  handleLayers(e, layer) {\n    if (e.target.checked) {\n      this.map.addLayer(layer);\n    } else {\n      this.map.removeLayer(layer.id);\n      this.map.removeSource(layer.id);\n    }\n  }\n\n  setFill() {\n    const {\n      property,\n      stops\n    } = this.state.active;\n    this.map.setPaintProperty('countries', 'fill-color', {\n      property,\n      stops\n    });\n    this.map.setPaintProperty('countries', 'fill-outline-color', {\n      property,\n      stops\n    }) // this.map.setTooltip('presence_data', '', {\n    //   property,\n    //   stops\n    // })  ;\n    ;\n  }\n\n  render() {\n    const {\n      layers\n    } = this.state;\n    const {\n      viewport\n    } = this.state;\n    const {\n      name,\n      description,\n      stops,\n      property\n    } = this.state.active;\n\n    const renderLegendKeys = (stop, i) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: i,\n        className: \"txt-xs \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 755,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \" round-full w12 h12 inline-block \",\n        style: {\n          backgroundColor: stop[1]\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 756,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"px12 py12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 757,\n          columnNumber: 11\n        }\n      }, `${stop[0].toLocaleString()}`));\n    };\n\n    const renderOptions = (option, i) => {\n      return /*#__PURE__*/React.createElement(\"label\", {\n        key: i,\n        className: \"toggle-container w36 maxw60 pa24\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 765,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        onChange: () => this.setState({\n          active: options[i]\n        }),\n        checked: option.property === property,\n        name: \"toggle\",\n        type: \"radio\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 766,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"toggle txt-xs color-white toggle--gray  toggle--active-darken100 maxw60 w50 pl6 pr6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 767,\n          columnNumber: 11\n        }\n      }, option.name));\n    };\n\n    console.log(layers);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 776,\n        columnNumber: 7\n      }\n    }, layers.map((item, i) => /*#__PURE__*/React.createElement(\"label\", {\n      style: {\n        marginRight: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 777,\n        columnNumber: 34\n      }\n    }, \"  \", /*#__PURE__*/React.createElement(\"input\", {\n      type: \"checkbox\",\n      style: {\n        marginRight: 5\n      },\n      onChange: e => this.handleLayers(e, item.i),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 777,\n        columnNumber: 71\n      }\n    }), item.name, \" \")), /*#__PURE__*/React.createElement(\"div\", {\n      ref: this.mapRef,\n      width: \"100%\",\n      height: \"100%\",\n      className: \"absolute top right left bottom align-middle grid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 781,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      className: \" align-middle top  txt-s mb30 mt3 ml18 ctxt-bold pa0 color-white absolute bg-transparent shadow-darken50 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 782,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 782,\n        columnNumber: 135\n      }\n    }, \"Select Year:\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"toggle-group grid-2 grid mt24 pl3 pr3 align-middle top ctxt-bold  color-white absolute border border--2 border--white bg-transparent shadow-darken10  \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 783,\n        columnNumber: 9\n      }\n    }, options.map(renderOptions)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \" bg-transparent px3  grid-3 color-white absolute align-middle bottom w100 left border--white round border border--2 round shadow-darken10  txt-xs\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 786,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \" color-gray-light px3 txt-xs\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 787,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"txt-bold txt-xs block color-white px0 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 788,\n        columnNumber: 13\n      }\n    }, name), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"txt-xs color-white px0 py0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 789,\n        columnNumber: 13\n      }\n    }, description)), stops.map(renderLegendKeys))); //absolute top left ml12 mt12 border border--2 border--white bg-white shadow-darken10 z1\n  }\n\n}\n\n;\nexport default App;","map":{"version":3,"sources":["/Users/garrettmillar/pandemic_dashboard/src/App.js"],"names":["React","useState","useRef","useCallback","Component","mapboxgl","MapboxGeocoder","MapGL","NavigationControl","Marker","Popup","render","Icon","data","presence_data","Tooltip","ReactDOM","ReactMapboxGl","DeckGL","ScatterplotLayer","GeoJsonLayer","ArcLayer","StaticMap","MapboxLayer","StylesControl","CompassControl","RulerControl","ZoomControl","LanguageControl","InspectControl","TooltipControl","arcData","json","COORDINATE_SYSTEM","accessToken","MAPBOX_TOKEN","stops","options","name","description","property","propertyPresence","markerList","myDeckLayer","coordinateSystem","LNGLAT_OFFSETS","id","type","getSourceColor","d","getTargetColor","strokeWidth","getSourcePosition","START","getTargetPosition","END","pickable","auto_highlight","console","log","App","setTooltip","features","length","createElement","tooltipContainer","unmountComponentAtNode","constructor","props","mapRef","createRef","handleViewportChange","viewport","setState","state","handleGeocoderViewportChange","geocoderDefaultOverrides","transitionDuration","onViewportChange","width","height","etc","active","layers","layer","map","componentDidUpdate","setFill","componentDidMount","document","Map","container","current","style","center","zoom","pitch","on","addLayer","addSource","source","interactive","layout","PitchToggle","bearing","minpitchzoom","_bearing","_pitch","_minpitchzoom","onAdd","_map","_this","_btn","className","onclick","getPitch","getZoom","easeTo","_container","appendChild","onRemove","parentNode","removeChild","undefined","MapboxGLButtonControl","title","eventHandler","_className","_title","_eventHandler","one","event","alert","target","two","three","ctrlPoint","ctrlLine","ctrlPolygon","addControl","placeholder","tooltip","offset","setLngLat","addTo","popup","closeButton","closeOnClick","e","getCanvas","cursor","queryRenderedFeatures","point","prob_intro","properties","lngLat","setHTML","p","presenceFeatures","remove","handleLayers","checked","removeLayer","removeSource","setPaintProperty","renderLegendKeys","stop","i","backgroundColor","toLocaleString","renderOptions","option","item","marginRight"],"mappings":"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","sourcesContent":["import React, {useState, useRef, useCallback, Component }  from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport mapboxgl from 'mapbox-gl'\nimport * as MapboxGeocoder from '@mapbox/mapbox-gl-geocoder';\nimport MapGL, { NavigationControl, Marker, Popup } from \"react-map-gl\";\nimport { render } from \"react-dom\";\nimport { Icon } from \"semantic-ui-react\";\nimport data from './pandemic_output.json'\nimport presence_data from './presence_pandemic.json'\nimport Tooltip from './components/tooltip'\nimport ReactDOM from 'react-dom'\nimport ReactMapboxGl from 'react-mapbox-gl';\nimport DeckGL from '@deck.gl/react';\nimport {ScatterplotLayer, GeoJsonLayer, ArcLayer} from '@deck.gl/layers';\nimport {StaticMap} from 'react-map-gl';\nimport {MapboxLayer} from '@deck.gl/mapbox';\nimport \"mapbox-gl/dist/mapbox-gl.css\";\nimport  \"react-map-gl-geocoder/dist/mapbox-gl-geocoder.css\";\nimport StylesControl from 'mapbox-gl-controls/lib/styles';\nimport CompassControl from 'mapbox-gl-controls/lib/compass';\nimport RulerControl from 'mapbox-gl-controls/lib/ruler';\nimport ZoomControl from 'mapbox-gl-controls/lib/zoom';\nimport LanguageControl from 'mapbox-gl-controls/lib/language';\nimport InspectControl from 'mapbox-gl-controls/lib/inspect';\nimport TooltipControl from 'mapbox-gl-controls/lib/tooltip';\nimport arcData from './arcs.json'\nimport { json } from 'd3-request';\nimport {COORDINATE_SYSTEM} from '@deck.gl/core';\n\n\n\nmapboxgl.accessToken = 'pk.eyJ1IjoiZ2NtaWxsYXIiLCJhIjoiY2pvcDhrbGl4MDFvaTNrczR0d2hxcjdnNSJ9.JYgBw6y2pEq_AEAOCaoQpw'\n\n\nconst MAPBOX_TOKEN = 'pk.eyJ1IjoiZ2NtaWxsYXIiLCJhIjoiY2pvcDhrbGl4MDFvaTNrczR0d2hxcjdnNSJ9.JYgBw6y2pEq_AEAOCaoQpw'\n\nvar stops =  [\n  [0, 'rgba(45,69,132, 0.4)'],\t\n  [0.1, 'rgba(77,30,129, 0.4)'],\t\n  [0.2, 'rgba(109,41,126, 0.4)'],\t\t\t\n  [0.3, 'rgba(141,52,123, 0.4)'], \n  [0.4, 'rgba(173,63,120, 0.4)'],\t\n  [0.5, 'rgba(205,74,118, 0.4)'], \n  [0.6, 'rgba(210,103,103\t, 0.4)'],\t\t\n  [0.7, 'rgba(216,132,89,0.7)'], \n  [0.8, 'rgba(222,161,75, 0.4)'],\t\n  [0.9, 'rgba(228,190,61, 0.4)'],\n  [1, 'rgba(240,249,33, 0.4)']\n]\n\n\nconst options = [{\n  name: '1993',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T0',\n  stops: stops\n}, {\n  name: '1994',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T1',\n  stops: stops\n}, {\n  name: '1995',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T2',\n  stops: stops\n}, {\n  name: '1996',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T3',\n  stops: stops\n}, {\n  name: '1997',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T4',\n  stops: stops\n}, {\n  name: '1998',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T5',\n  stops: stops\n}, {\n  name: '1999',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T6',\n  stops: stops\n}, {\n  name: '2000',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T7',\n  stops: stops\n}, {\n  name: '2001',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T8',\n  stops: stops\n}, {\n  name: '2002',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T9',\n  stops: stops\n}, {\n  name: '2003',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T10',\n  stops: stops\n}, {\n  name: '2004',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T11',\n  stops: stops\n}, {\n  name: '2005',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T12',\n  stops: stops\n}, {\n  name: '2006',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T13',\n  stops: stops\n}, {\n  name: '2007',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T14',\n  stops: stops\n}, {\n  name: '2008',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T15',\n  stops: stops\n}, {\n  name: '2009',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T16',\n  stops: stops\n}, {\n  name: '2010',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T17',\n  stops: stops\n}, {\n  name: '2011',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T18',\n  stops: stops\n}, {\n  name: '2012',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T19',\n  stops: stops\n}, {\n  name: '2013',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T20',\n  stops: stops\n}, {\n  name: '2014',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T21',\n  stops: stops\n}, {\n  name: '2015',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T22',\n  stops: stops\n}, {\n  name: '2016',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T23',\n  stops: stops\n}, {\n  name: '2017',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T24',\n  stops: stops\n}, {\n  name: '2018',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T25',\n  propertyPresence: 'Presence 1993',\n  stops: stops\n}\n]\n\nconst markerList = [{\n  name: '1993',\n  description: 'Presence',\n  property: 'Presence 1993'\n}, {\n  name: '1994',\n  description: 'Presence',\n  property: 'Presence 1994'\n}, {\n  name: '1995',\n  description: 'Presence',\n  property: 'Presence 1995'\n}, {\n  name: '1996',\n  description: 'Presence',\n  property: 'Presence 1996'\n}, {\n  name: '1997',\n  description: 'Presence',\n  property: 'Presence 1997'\n}, {\n  name: '1998',\n  description: 'Presence',\n  property: 'Presence 1998'\n}, {\n  name: '1999',\n  description: 'Presence',\n  property: 'Presence 1999'\n}, {\n  name: '2000',\n  description: 'Presence',\n  property: 'Presence 2000'\n}, {\n  name: '2001',\n  description: 'Presence',\n  property: 'Presence 2001'\n}, {\n  name: '2002',\n  description: 'Presence',\n  property: 'Presence 2002'\n}, {\n  name: '2003',\n  description: 'Presence',\n  property: 'Presence 2003'\n}, {\n  name: '2004',\n  description: 'Presence',\n  property: 'Presence 2004'\n}, {\n  name: '2005',\n  description: 'Presence',\n  property: 'Presence 2005'\n}, {\n  name: '2006',\n  description: 'Presence',\n  property: 'Presence 2006'\n}, {\n  name: '2007',\n  description: 'Presence',\n  property: 'Presence 2007'\n}, {\n  name: '2008',\n  description: 'Presence',\n  property: 'Presence 2008'\n}, {\n  name: '2009',\n  description: 'Presence',\n  property: 'Presence 2009'\n}, {\n  name: '2010',\n  description: 'Presence',\n  property: 'Presence 2010'\n}, {\n  name: '2011',\n  description: 'Presence',\n  property: 'Presence 2011'\n}, {\n  name: '2012',\n  description: 'Presence',\n  property: 'Presence 2012'\n}, {\n  name: '2013',\n  description: 'Presence',\n  property: 'Presence 2013'\n}, {\n  name: '2014',\n  description: 'Presence',\n  property: 'Presence 2014'\n}, {\n  name: '2015',\n  description: 'Presence',\n  property: 'Presence 2015'\n}, {\n  name: '2016',\n  description: 'Presence',\n  property: 'Presence 2016'\n}, {\n  name: '2017',\n  description: 'Presence',\n  property: 'Presence 2017'\n}, {\n  name: '2018',\n  description: 'Presence',\n  property: 'Presence 2018'\n}\n]\n\n// console.log(arcData);\n\n// var arcDataString = JSON.stringify(arcData);\n// var arcData_Array = JSON.parse(arcDataString);\n// console.log(arcData_Array);\n\nconst myDeckLayer = new MapboxLayer({\n  coordinateSystem: COORDINATE_SYSTEM.LNGLAT_OFFSETS,\n  id: 'my-scatterplot',\n  type: ArcLayer,\n  data: arcData,\n  getSourceColor: d => [144,238,144],\n  getTargetColor: d => [0, 128, 200],\n   // getSourceColor: d => [255,127,80],\n  // getTargetColor: d => [240,230,140],\n  // getFillColor: [255, 0, 0],\n  strokeWidth:0.1,\n  getSourcePosition: d => d.START,\n  getTargetPosition: d => d.END,\n  pickable: true,\n  auto_highlight: true\n});\n  \n// // });\n// const myDeckLayer =  new ArcLayer({\n//   id: 'arcs',\n//   data: \n//        {\n//          inbound: 72633,\n//          outbound: 74735,\n//          from: {\n//            name: '19th St. Oakland (19TH)',\n//            coordinates: [-122.269029, 37.80787]\n//          },\n//          to: {\n//            name: '12th St. Oakland City Center (12TH)',\n//            coordinates: [-122.271604, 37.803664]\n//        },\n//   // dataTransform: d => d.features.filter(f => f.properties.scalerank < 4),\n//   // Styles\n//   getSourcePosition: d.coordinates\n//   getTargetPosition: f => f.geometry.coordinates,\n//   getSourceColor: [0, 128, 200],\n//   getTargetColor: [200, 0, 80],\n//   getWidth: 1\n// })\n// const myDeckLayer =  new ArcLayer({\n//   id: 'arcs',\n//   data: AIR_PORTS,\n//   dataTransform: d => d.features.filter(f => f.properties.scalerank < 4),\n//   // Styles\n//   getSourcePosition: f => [-0.4531566, 51.4709959], // London\n//   getTargetPosition: f => f.geometry.coordinates,\n//   getSourceColor: [0, 128, 200],\n//   getTargetColor: [200, 0, 80],\n//   getWidth: 1\n// })\n\nconsole.log(myDeckLayer);\n\n\nclass App extends React.Component {\n  mapRef = React.createRef();\n\n  handleViewportChange = viewport => {\n    this.setState({\n      viewport: { ...this.state.viewport, ...viewport }\n    });\n  };\n\n  handleGeocoderViewportChange = viewport => {\n    const geocoderDefaultOverrides = { transitionDuration: 1000 };\n    return this.handleViewportChange({\n      ...viewport,\n      ...geocoderDefaultOverrides\n    });\n  };\n\n\n  mapRef = React.createRef();\n  map;\n  tooltipContainer;\n\n  setTooltip(features) {\n    if (features.length) {\n      ReactDOM.render(\n        React.createElement(\n          Tooltip, {\n            features\n          }\n        ),\n        this.tooltipContainer\n      );\n    } else {\n      ReactDOM.unmountComponentAtNode(this.tooltipContainer);\n    }\n  }\n\n  constructor(props: Props) {\n    super(props);\n      this.state = {\n        active: options[0],\n        layers: [\n          {\n            name: 'countries',\n            layer: {\n              'id': 'countries',\n              'type': 'fill',\n              'source': 'countries',\n              'layout': {},\n            },\n          },\n          {\n            name: myDeckLayer,\n            layer: myDeckLayer\n          },\n        ]\n      };\n      this.map = null;\n      // width: 0, \n      // height: 0 ,\n      \n    };\n  // }\n\n  onViewportChange = viewport => { \n    const {width, height, ...etc} = viewport\n    this.setState({viewport: etc})\n  } \n\n  componentDidUpdate() {\n    this.setFill();\n  }\n\n  componentDidMount() {    \n    this.tooltipContainer = document.createElement('div');\n    this.map = new mapboxgl.Map({\n      container: this.mapRef.current,\n      style: 'mapbox://styles/gcmillar/ckc13n1qe3rgx1ilchl8u3xax',\n      // style: 'mapbox://styles/mapbox/dark-v10',\n      center: [20, 40],\n      zoom: 1.45,\n      pitch: 80\n      });\n          /* Zoom */\n      // this.map.addControl(new ZoomControl(), 'top-right');\n      // /* Ruler */\n      // this.map.addControl(new RulerControl(), 'bottom-left');\n      // /* Inspect */\n      // this.map.addControl(new InspectControl(), 'bottom-left');\n      /* Compass */\n      // this.map.addControl(new CompassControl(), 'top-right');\n\n    this.map.on('load', () => {\n      this.map.addLayer(myDeckLayer);\n      // this.map.addLayer({\n      //           id: 'my-arc',\n      //           type: 'ArcLayer',\n      //           data: arcData,\n      //           getSourcePosition: d => d.START,\n      //           getTargetPosition: d => d.END,\n      //           getSourceColor: d => [64, 255, 0],\n      //           getTargetColor: d => [0, 128, 200]\n      //       // });\n      \n      //       //Add the deck.gl arc layer to the map \n      //       // .addLayer(arclayer, 'waterway-label')\n      // });\n      // if (this.map.getLayer(\"countries\")) {\n      //   this.map.removeLayer(\"countries\");\n      // };\n\n      // if (this.map.getSource(\"countries\")) {\n      //   this.map.removeSource(\"countries\");\n      // };\n      this.map.addSource('countries', {\n        type: 'geojson',\n        data\n      });\n\n      this.map.addSource('presence_data', {\n        type: 'geojson',\n        presence_data\n      });\n\n      this.map.addLayer({\n        id: 'countries',\n        type: 'fill',\n        source: 'countries'\n      },'country-label'); \n\n      this.map.addLayer({\n        id: 'presence_data',\n        interactive: true,\n        type: \"symbol\",\n        source:  'presence_data',\n        layout: {\n          'icon-image': \n          ['concat', ['get', 'icon'], '-15'],\n          'text-field': ['get', 'title'],\n          'text-font': ['Open Sans Semibold', 'Arial Unicode MS Bold'],\n          'text-offset': [0, 0.6],\n          'text-anchor': 'top'\n        }\n      }); \n      // this.map.addLayer(arclayer, 'waterway-label');\n      this.setFill();\n      // this.map.on('styledata', function () {\n      //   // Triggered when `setStyle` is called.\n      //   if (data) addLayer();\n      // });\n      // this.map.addControl(new mapboxgl.FullscreenControl());\n      \n    //   presence_data.features.forEach((marker) => {\n    //     const markerEl = document.createElement('div');\n    //     markerEl.innerHTML = 'ðŸ¦Ÿ';\n    //     new mapboxgl.Marker(markerEl, { offset: [5,-5] })\n    //         .setLngLat(marker.geometry.coordinates)\n    //         .addTo(this.map);\n    //     markerEl.addEventListener('click', () => {\n    //       this.map.flyTo({\n    //           center: marker.geometry.coordinates,\n    //           zoom: 11,\n    //       });\n    //     });\n    // });\n    });\n\n     // Original ES6 Classâ€”Â https://github.com/tobinbradley/mapbox-gl-pitch-toggle-control\n      // export default class PitchToggle {\n        class PitchToggle {\n          constructor({ bearing = -20, pitch = 70, minpitchzoom = null }) {\n            this._bearing = bearing;\n            this._pitch = pitch;\n            this._minpitchzoom = minpitchzoom;\n          }\n  \n          onAdd(map) {\n            this._map = map;\n            let _this = this;\n  \n            this._btn = document.createElement(\"button\");\n            this._btn.className = \"mapboxgl-ctrl-icon mapboxgl-ctrl-pitchtoggle-3d\";\n            this._btn.type = \"button\";\n            this._btn[\"aria-label\"] = \"Toggle Pitch\";\n            this._btn.onclick = function() {\n              if (map.getPitch() === 0) {\n                let options = { pitch: _this._pitch, bearing: _this._bearing };\n                if (_this._minpitchzoom && map.getZoom() > _this._minpitchzoom) {\n                  options.zoom = _this._minpitchzoom;\n                }\n                map.easeTo(options);\n                _this._btn.className =\n                  \"mapboxgl-ctrl-icon mapboxgl-ctrl-pitchtoggle-2d\";\n              } else {\n                map.easeTo({ pitch: 0, bearing: 0 });\n                _this._btn.className =\n                  \"mapboxgl-ctrl-icon mapboxgl-ctrl-pitchtoggle-3d\";\n              }\n            };\n  \n            this._container = document.createElement(\"div\");\n            this._container.className = \"mapboxgl-ctrl-group mapboxgl-ctrl\";\n            this._container.appendChild(this._btn);\n  \n            return this._container;\n          }\n  \n          onRemove() {\n            this._container.parentNode.removeChild(this._container);\n            this._map = undefined;\n          }\n        }\n  \n        /* Idea from Stack Overflow https://stackoverflow.com/a/51683226  */\n        class MapboxGLButtonControl {\n          constructor({\n            className = \"\",\n            title = \"\",\n            eventHandler = \"\"\n          }) {\n            this._className = className;\n            this._title = title;\n            this._eventHandler = eventHandler;\n          }\n  \n          onAdd(map) {\n            this._btn = document.createElement(\"button\");\n            this._btn.className = \"mapboxgl-ctrl-icon\" + \" \" + this._className;\n            this._btn.type = \"button\";\n            this._btn.title = this._title;\n            this._btn.onclick = this._eventHandler;\n  \n            this._container = document.createElement(\"div\");\n            this._container.className = \"mapboxgl-ctrl-group mapboxgl-ctrl\";\n            this._container.appendChild(this._btn);\n  \n            return this._container;\n          }\n  \n          onRemove() {\n            this._container.parentNode.removeChild(this._container);\n            this._map = undefined;\n          }\n        }\n  \n        /* Event Handlers */\n        function one(event) {\n          alert(\"Event handler when clicking on \\r\\n\" + event.target.className);\n          console.log(\"event number 1\", event);\n        }\n  \n        function two(event) {\n          alert(\"Event handler when clicking on \\r\\n\" + event.target.className);\n          console.log(\"event number 2\", event);\n        }\n  \n        function three(event) {\n          alert(\"Event handler when clicking on \\r\\n\" + event.target.className);\n          console.log(\"event number 3\", event);\n        }\n  \n        /* Instantiate new controls with custom event handlers */\n        const ctrlPoint = new MapboxGLButtonControl({\n          className: \"mapbox-gl-draw_point\",\n          title: \"Draw Point\",\n          eventHandler: one\n        });\n  \n        const ctrlLine = new MapboxGLButtonControl({\n          className: \"mapbox-gl-draw_line\",\n          title: \"Draw Line\",\n          eventHandler: two\n        });\n  \n        const ctrlPolygon = new MapboxGLButtonControl({\n          className: \"mapbox-gl-draw_polygon\",\n          title: \"Draw Polygon\",\n          eventHandler: three\n        });\n  \n        /* Add Controls to the Map */\n        // this.map.addControl(new mapboxgl.NavigationControl(), \"top-left\");\n        this.map.addControl(new MapboxGeocoder({\n          accessToken: 'pk.eyJ1IjoiZ2NtaWxsYXIiLCJhIjoiY2pvcDhrbGl4MDFvaTNrczR0d2hxcjdnNSJ9.JYgBw6y2pEq_AEAOCaoQpw',\n          mapboxgl: mapboxgl,\n          placeholder: 'Search for a Location'\n        }), 'top-right');\n        this.map.addControl(new PitchToggle({ minpitchzoom: 11 }), \"top-right\");\n        \n        \n        // this.map.addControl(ctrlPoint, \"bottom-left\");\n        // this.map.addControl(ctrlLine, \"bottom-right\");\n        // this.map.addControl(ctrlPolygon, \"top-left\");\n  \n\n    const tooltip = new mapboxgl.Marker(this.tooltipContainer, {\n      offset: [-120, 0]\n    }).setLngLat([0,0]).addTo(this.map);\n\n    var popup = new mapboxgl.Popup({\n      closeButton: false,\n      closeOnClick: false\n      });\n\n      this.map.on('mouseenter', 'countries', (e) => {\n        this.map.getCanvas().style.cursor =  'pointer';\n      });\n\n\n      this.map.on('click', 'countries', (e) => {\n        const features = this.map.queryRenderedFeatures(e.point, {\n      });\n      const { name, description, stops, property } = this.state.active;\n      const prob_intro = features[0].properties[property]\n      this.map.getCanvas().style.cursor = features.length ? 'pointer' : '';\n      popup \n      .setLngLat(e.lngLat)\n       .setHTML('<b><u>Country Information' + '</b></u>' +\n          '<ul>' +\n          '<li><b>Name: </b>' + features[0].properties[\"NAME\"] + '</li>' +\n          '<li><b>Introduction Probability: </b>' + prob_intro  + '</li>' +\n          '</ul>')\n      .addTo(this.map);\n    });\n    //// with custom styles:\n      // this.map.addControl(new StylesControl({\n      //   styles: [\n      //     {\n      //       label: 'Streets',\n      //       styleName: 'Mapbox Streets',\n      //       styleUrl: 'mapbox://styles/mapbox/streets-v9',\n      //     }, {\n      //       label: 'Satellite',\n      //       styleName: 'Satellite',\n      //       styleUrl: 'mapbox://styles/mapbox/satellite-v9',\n      //     },\n      //   ],\n      //   onChange: (style) => console.log(style),\n       \n      // }, \n      // // this.map.getSource('countries').setData(data)\n      // // this.map.addLayer('countries','country-label')\n      // ), 'top-right');\n\n     \n\n\n    this.map.on('click', 'presence_data', (p) => {\n      const presenceFeatures = this.map.queryRenderedFeatures(p.point, {\n    });\n    // console.log(presenceFeatures)\n  });\n    this.map.on('mouseleave', 'countries', (e) => {\n      this.map.getCanvas().style.cursor =  '';\n      popup.remove();\n    });\n\n   \n  }\n\n  handleLayers(e, layer) {\n    if (e.target.checked) {\n      this.map.addLayer(layer);\n    }\n    else {\n      this.map.removeLayer(layer.id);\n      this.map.removeSource(layer.id);\n    }\n  }\n\n  setFill() {\n    const { property, stops } = this.state.active;\n    this.map.setPaintProperty('countries', 'fill-color', {\n      property,\n      stops\n    },\n    )\n    this.map.setPaintProperty('countries', 'fill-outline-color', {\n      property,\n      stops\n    },\n    )\n      // this.map.setTooltip('presence_data', '', {\n      //   property,\n      //   stops\n      // })  ;\n      ;    \n  }\n\n\n  render() {\n    const { layers } = this.state;\n    const { \n      viewport,\n    } = this.state;\n    const { name, description, stops, property } = this.state.active;\n   \n    const renderLegendKeys = (stop, i) => {\n    return ( \n      \n        <div key={i} className='txt-xs '>\n          <span className=' round-full w12 h12 inline-block ' style={{ backgroundColor: stop[1] }} />\n          <span className='px12 py12' >{`${stop[0].toLocaleString()}`}</span>\n        </div>\n      );\n    }\n\n   \n    const renderOptions = (option, i) => {\n      return (\n        <label key={i} className=\"toggle-container w36 maxw60 pa24\">\n          <input  onChange={() => this.setState({ active: options[i] })} checked={option.property === property} name=\"toggle\" type=\"radio\" />\n          <div  className=\"toggle txt-xs color-white toggle--gray  toggle--active-darken100 maxw60 w50 pl6 pr6\">{option.name}</div>\n        </label>\n      );\n    }\n\n    console.log(layers);\n    return (\n      \n      \n      <div>\n        {layers.map((item, i) => <label style={{ marginRight: 20 }}>  <input type=\"checkbox\" style={{ marginRight: 5 }} \n        onChange={\n          e => this.handleLayers(e, item.i)} />\n        {item.name} </label>)}\n        <div ref={this.mapRef} width='100%' height='100%' className=\"absolute top right left bottom align-middle grid\" />\n        <label className=\" align-middle top  txt-s mb30 mt3 ml18 ctxt-bold pa0 color-white absolute bg-transparent shadow-darken50 \" ><b>Select Year:</b></label>\n        <div className=\"toggle-group grid-2 grid mt24 pl3 pr3 align-middle top ctxt-bold  color-white absolute border border--2 border--white bg-transparent shadow-darken10  \">\n        {options.map(renderOptions)} \n        </div>\n        <div  className=\" bg-transparent px3  grid-3 color-white absolute align-middle bottom w100 left border--white round border border--2 round shadow-darken10  txt-xs\">\n          <div className=' color-gray-light px3 txt-xs'>\n            <h2 className=\"txt-bold txt-xs block color-white px0 \">{name}</h2>\n            <p className='txt-xs color-white px0 py0'>{description}</p>\n          </div>\n          {stops.map(renderLegendKeys)}\n        </div>\n      </div>\n    );//absolute top left ml12 mt12 border border--2 border--white bg-white shadow-darken10 z1\n  };\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}