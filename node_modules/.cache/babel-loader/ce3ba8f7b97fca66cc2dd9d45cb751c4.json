{"ast":null,"code":"var _jsxFileName = \"/Users/garrettmillar/pandemic_dashboard/src/App.js\";\nimport * as React from 'react';\nimport { Component } from 'react';\nimport { render } from 'react-dom';\nimport MapGL, { Source, Layer } from 'react-map-gl';\nimport ControlPanel from './control-panel';\nimport { dataLayer } from './map-style.js';\nimport { updatePercentiles } from './utils';\nimport { json as requestJson } from 'd3-request';\nimport mapboxgl, { Marker, Popup, NavigationControl, GeoJSONLayer } from 'mapbox-gl';\nimport data from './pandemic_output.json';\nimport presence_data from './presence_pandemic.json'; // import Tooltip from './components/tooltip'\n// import ReactDOM from 'react-dom'\n// var MapboxDraw = require('@mapbox/mapbox-gl-draw');\n// import ReactMapGL, { Marker } from \"react-map-gl\";\n// import logo from './logo.svg';\n// import turf from 'turf-jsts'\n\nmapboxgl.accessToken = 'pk.eyJ1IjoiZ2NtaWxsYXIiLCJhIjoiY2pvcDhrbGl4MDFvaTNrczR0d2hxcjdnNSJ9.JYgBw6y2pEq_AEAOCaoQpw';\nconst MAPBOX_TOKEN = 'pk.eyJ1IjoiZ2NtaWxsYXIiLCJhIjoiY2pvcDhrbGl4MDFvaTNrczR0d2hxcjdnNSJ9.JYgBw6y2pEq_AEAOCaoQpw';\nvar draw;\nvar stops = [[0, 'rgba(45,69,132, 0.4)'], [0.1, 'rgba(77,30,129, 0.4)'], [0.2, 'rgba(109,41,126, 0.4)'], [0.3, 'rgba(141,52,123, 0.4)'], [0.4, 'rgba(173,63,120, 0.4)'], [0.5, 'rgba(205,74,118, 0.4)'], [0.6, 'rgba(210,103,103\t, 0.4)'], [0.7, 'rgba(216,132,89,0.7)'], [0.8, 'rgba(222,161,75, 0.4)'], [0.9, 'rgba(228,190,61, 0.4)'], [1, 'rgba(240,249,33, 0.4)']];\nconst options = [{\n  name: '1993',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T0',\n  propertyPresence: 'Presence 1993',\n  stops: stops\n}, {\n  name: '1994',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T1',\n  stops: stops\n}, {\n  name: '1995',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T2',\n  stops: stops\n}, {\n  name: '1996',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T3',\n  stops: stops\n}, {\n  name: '1997',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T4',\n  stops: stops\n}, {\n  name: '1998',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T5',\n  stops: stops\n}, {\n  name: '1999',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T6',\n  stops: stops\n}, {\n  name: '2000',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T7',\n  stops: stops\n}, {\n  name: '2001',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T8',\n  stops: stops\n}, {\n  name: '2002',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T9',\n  stops: stops\n}, {\n  name: '2003',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T10',\n  stops: stops\n}, {\n  name: '2004',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T11',\n  stops: stops\n}, {\n  name: '2005',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T12',\n  stops: stops\n}, {\n  name: '2006',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T13',\n  stops: stops\n}, {\n  name: '2007',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T14',\n  stops: stops\n}, {\n  name: '2008',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T15',\n  stops: stops\n}, {\n  name: '2009',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T16',\n  stops: stops\n}, {\n  name: '2010',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T17',\n  stops: stops\n}, {\n  name: '2011',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T18',\n  stops: stops\n}, {\n  name: '2012',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T19',\n  stops: stops\n}, {\n  name: '2013',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T20',\n  stops: stops\n}, {\n  name: '2014',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T21',\n  stops: stops\n}, {\n  name: '2015',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T22',\n  stops: stops\n}, {\n  name: '2016',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T23',\n  stops: stops\n}, {\n  name: '2017',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T24',\n  stops: stops\n}, {\n  name: '2018',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T25',\n  propertyPresence: 'Presence 1993',\n  stops: stops\n}];\nconst markerList = [{\n  name: \"title\",\n  info: \"icon\"\n}, {\n  name: \"title\",\n  info: \"icon\"\n}, {\n  name: \"title\",\n  info: \"icon\"\n}]; // const presence_options = [{\n//   name: '1993',\n//   description: 'Presence',\n//   property: 'Presence 1993'\n// }, {\n//   name: '1994',\n//   description: 'Presence',\n//   property: 'Presence 1994'\n// }, {\n//   name: '1995',\n//   description: 'Presence',\n//   property: 'Presence 1995'\n// }, {\n//   name: '1996',\n//   description: 'Presence',\n//   property: 'Presence 1996'\n// }, {\n//   name: '1997',\n//   description: 'Presence',\n//   property: 'Presence 1997'\n// }, {\n//   name: '1998',\n//   description: 'Presence',\n//   property: 'Presence 1998'\n// }, {\n//   name: '1999',\n//   description: 'Presence',\n//   property: 'Presence 1999'\n// }, {\n//   name: '2000',\n//   description: 'Presence',\n//   property: 'Presence 2000'\n// }, {\n//   name: '2001',\n//   description: 'Presence',\n//   property: 'Presence 2001'\n// }, {\n//   name: '2002',\n//   description: 'Presence',\n//   property: 'Presence 2002'\n// }, {\n//   name: '2003',\n//   description: 'Presence',\n//   property: 'Presence 2003'\n// }, {\n//   name: '2004',\n//   description: 'Presence',\n//   property: 'Presence 2004'\n// }, {\n//   name: '2005',\n//   description: 'Presence',\n//   property: 'Presence 2005'\n// }, {\n//   name: '2006',\n//   description: 'Presence',\n//   property: 'Presence 2006'\n// }, {\n//   name: '2007',\n//   description: 'Presence',\n//   property: 'Presence 2007'\n// }, {\n//   name: '2008',\n//   description: 'Presence',\n//   property: 'Presence 2008'\n// }, {\n//   name: '2009',\n//   description: 'Presence',\n//   property: 'Presence 2009'\n// }, {\n//   name: '2010',\n//   description: 'Presence',\n//   property: 'Presence 2010'\n// }, {\n//   name: '2011',\n//   description: 'Presence',\n//   property: 'Presence 2011'\n// }, {\n//   name: '2012',\n//   description: 'Presence',\n//   property: 'Presence 2012'\n// }, {\n//   name: '2013',\n//   description: 'Presence',\n//   property: 'Presence 2013'\n// }, {\n//   name: '2014',\n//   description: 'Presence',\n//   property: 'Presence 2014'\n// }, {\n//   name: '2015',\n//   description: 'Presence',\n//   property: 'Presence 2015'\n// }, {\n//   name: '2016',\n//   description: 'Presence',\n//   property: 'Presence 2016'\n// }, {\n//   name: '2017',\n//   description: 'Presence',\n//   property: 'Presence 2017'\n// }, {\n//   name: '2018',\n//   description: 'Presence',\n//   property: 'Presence 2018'\n// }\n// ]\n\nconst navStyle = {\n  position: 'absolute',\n  top: 0,\n  left: 0,\n  padding: '10px'\n};\nconst CITIES = {\n  name: \"title\",\n  info: \"icon\"\n};\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.mapRef = React.createRef();\n\n    this._loadData = data => {\n      this.setState({\n        data: updatePercentiles(data, f => f.properties.income[this.state.year])\n      });\n    };\n\n    this._updateSettings = (name, value) => {\n      if (name === 'year') {\n        this.setState({\n          year: value\n        });\n        const {\n          data\n        } = this.state;\n\n        if (data) {\n          // trigger update\n          this.setState({\n            data: updatePercentiles(data, f => f.properties.income[value])\n          });\n        }\n      }\n    };\n\n    this._onViewportChange = viewport => this.setState({\n      viewport\n    });\n\n    this._onHover = event => {\n      const {\n        features,\n        srcEvent: {\n          offsetX,\n          offsetY\n        }\n      } = event;\n      const hoveredFeature = features && features.find(f => f.layer.id === 'data');\n      this.setState({\n        hoveredFeature,\n        x: offsetX,\n        y: offsetY\n      });\n    };\n\n    this.state = {\n      active: options[0],\n      // active: options_presence[0],\n      viewport: {\n        latitude: 37.785164,\n        longitude: -100,\n        zoom: 2.8,\n        bearing: 0,\n        pitch: 0,\n        width: 500,\n        height: 500\n      },\n      popupInfo: null\n    };\n    this.renderPopup = this.renderPopup.bind(this);\n  }\n\n  // renderPopup(){\n  //     return this.state.popupInfo && (\n  //       <Popup tipSize={5}\n  //         anchor=\"bottom-right\"\n  //         longitude={this.state.popupInfo.state.longitude}\n  //         latitude={this.state.popupInfo.state.latitude}\n  //         onClose={() => this.setState({popupInfo: null})}\n  //         closeOnClick={true}>\n  //         <p>{}</p>\n  //       </Popup>\n  //     )\n  //   }\n  //   renderPopup(index) {\n  //     return (\n  //       this.state.popupInfo && (\n  //         <Popup\n  //           tipSize={5}\n  //           anchor=\"bottom-right\"\n  //           longitude={markerList[index].long}\n  //           latitude={markerList[index].lat}\n  //           onMouseLeave={() => this.setState({ popupInfo: null })}\n  //           closeOnClick={true}\n  //         >\n  //           <p>\n  //             <strong>{markerList[index].name}</strong>\n  //             <br />\n  //             Available beds:{markerList[index].info}\n  //           </p>\n  //         </Popup>\n  //       )\n  //     );\n  //   }\n  componentDidUpdate() {\n    this.setFill();\n  }\n\n  componentDidMount() {\n    this.tooltipContainer = document.createElement('div');\n    requestJson('https://raw.githubusercontent.com/uber/react-map-gl/master/examples/.data/us-income.geojson', (error, response) => {\n      if (!error) {\n        this._loadData(response);\n      }\n    });\n    this.map = new mapboxgl.Map({\n      container: this.mapRef.current,\n      style: 'mapbox://styles/gcmillar/ckc13n1qe3rgx1ilchl8u3xax',\n      // style: 'mapbox://styles/mapbox/dark-v10',\n      center: [12, 26],\n      zoom: 1.5\n    });\n    this.map.on('load', e => {\n      this.map.addSource('countries', {\n        type: 'geojson',\n        data\n      });\n      this.map.addSource('presence_data', {\n        type: 'geojson',\n        presence_data\n      });\n      this.map.addLayer({\n        id: 'countries',\n        type: 'fill',\n        source: 'countries'\n      }, 'country-label');\n      this.map.addLayer({\n        id: 'presence_data',\n        interactive: true,\n        type: \"symbol\",\n        source: {\n          \"type\": \"geojson\",\n          \"data\": presence_data\n        },\n        layout: {\n          'icon-image': ['concat', ['get', 'icon'], '-15'],\n          'text-field': ['get', 'title'],\n          'text-font': ['Open Sans Semibold', 'Arial Unicode MS Bold'],\n          'text-offset': [0, 0.6],\n          'text-anchor': 'top'\n        }\n      });\n      this.this.setFill(); // const features = this.map.queryRenderedFeatures(e.point, {\n      // pestMarker \n      //   .setLngLat(e.lngLat)\n      //   .setHTML('<b><u>Country Information' + '</b></u>' +\n      //     '<ul>' +\n      //     '<li><b>Name: </b>' + features[0].properties[\"NAME\"] + '</li>' +\n      //     '<li><b>Introduction Probability: </b>' + prob_intro  + '</li>' +\n      //     '</ul>')\n      // .addTo(this.map);\n      // // });\n      // this.set\n    });\n    const tooltip = new mapboxgl.Marker(this.tooltipContainer, {\n      offset: [-120, 0]\n    }).setLngLat([0, 0]).addTo(this.map);\n    var popup = new mapboxgl.Popup({\n      closeButton: false,\n      closeOnClick: false\n    });\n    var pestMarker = new mapboxgl.Marker({\n      offset: [-120, 0]\n    }).setLngLat([0, 0]).addTo(this.map);\n    console.log(pestMarker);\n    this.map.on('mouseenter', 'countries', e => {\n      this.map.getCanvas().style.cursor = 'pointer';\n    });\n    this.map.on('click', 'countries', e => {\n      const features = this.map.queryRenderedFeatures(e.point, {});\n      const {\n        name,\n        description,\n        stops,\n        property\n      } = this.state.active;\n      const prob_intro = features[0].properties[property];\n      this.map.getCanvas().style.cursor = features.length ? 'pointer' : '';\n      popup.setLngLat(e.lngLat).setHTML('<b><u>Country Information' + '</b></u>' + '<ul>' + '<li><b>Name: </b>' + features[0].properties[\"NAME\"] + '</li>' + '<li><b>Introduction Probability: </b>' + prob_intro + '</li>' + '</ul>').addTo(this.map);\n    });\n    this.map.on('mouseleave', 'countries', e => {\n      this.map.getCanvas().style.cursor = '';\n      popup.remove();\n    });\n  }\n\n  _renderTooltip() {\n    const {\n      hoveredFeature,\n      x,\n      y\n    } = this.state;\n    return hoveredFeature && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tooltip\",\n      style: {\n        left: x,\n        top: y\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 532,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 533,\n        columnNumber: 11\n      }\n    }, \"State: \", hoveredFeature.properties.name), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 534,\n        columnNumber: 11\n      }\n    }, \"Median Household Income: \", hoveredFeature.properties.value), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 535,\n        columnNumber: 11\n      }\n    }, \"Percentile: \", hoveredFeature.properties.percentile / 8 * 100));\n  }\n\n  render() {\n    const {\n      viewport,\n      data\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        height: '100%',\n        position: 'relative'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 545,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(MapGL, Object.assign({}, viewport, {\n      width: \"100%\",\n      height: \"100%\",\n      mapStyle: \"mapbox://styles/mapbox/light-v9\",\n      onViewportChange: this._onViewportChange,\n      mapboxApiAccessToken: MAPBOX_TOKEN,\n      onHover: this._onHover,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 546,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Source, {\n      type: \"geojson\",\n      data: data,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 555,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Layer, Object.assign({}, dataLayer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 556,\n        columnNumber: 13\n      }\n    }))), this._renderTooltip()), /*#__PURE__*/React.createElement(ControlPanel, {\n      containerComponent: this.props.containerComponent,\n      settings: this.state,\n      onChange: this._updateSettings,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 561,\n        columnNumber: 9\n      }\n    }));\n  } // }\n\n\n  setFill() {\n    const {\n      property,\n      stops\n    } = this.state.active;\n    this.map.setPaintProperty('countries', 'fill-color', {\n      property,\n      stops\n    });\n    this.map.setPaintProperty('countries', 'fill-outline-color', {\n      property,\n      stops\n    }); // this.map.setTooltip('presence_data', '', {\n    //   property,\n    //   stops\n    // })  ;\n  }\n\n  render() {\n    const {\n      viewport\n    } = this.state;\n    return /*#__PURE__*/React.createElement(GeoJSONLayer, {\n      data: presence_data,\n      type: \"symbol\",\n      anchor: \"bottom-right\",\n      longitude: this.state.popupInfo.state.longitude,\n      latitude: this.state.popupInfo.state.latitude,\n      onClose: () => this.setState({\n        popupInfo: null\n      }),\n      closeOnClick: true,\n      symbolLayout: {\n        \"text-field\": \"{title}\",\n        \"text-font\": [\"Open Sans Semibold\", \"Arial Unicode MS Bold\"],\n        \"text-offset\": [0, 0.6],\n        \"text-anchor\": \"top\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 591,\n        columnNumber: 7\n      }\n    });\n  }\n\n  render() {\n    const {\n      name,\n      description,\n      stops,\n      property\n    } = this.state.active;\n\n    const renderLegendKeys = (stop, i) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: i,\n        className: \"txt-s \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 612,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \" round-full w12 h12 inline-block \",\n        style: {\n          backgroundColor: stop[1]\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 613,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 614,\n          columnNumber: 11\n        }\n      }, `${stop[0].toLocaleString()}`));\n    };\n\n    const renderOptions = (option, i) => {\n      return /*#__PURE__*/React.createElement(\"label\", {\n        key: i,\n        className: \"toggle-container  right  left px3 py3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 622,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        onChange: () => this.setState({\n          active: options[i]\n        }),\n        checked: option.property === property,\n        name: \"toggle\",\n        type: \"radio\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 623,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"toggle grid txt-s color-white right   left toggle--active-white\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 624,\n          columnNumber: 11\n        }\n      }, option.name));\n    };\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 630,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      ref: this.mapRef,\n      className: \"absolute top right left bottom align-middle grid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 631,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"ctxt-bold color-white absolute mt6 ml12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 632,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 632,\n        columnNumber: 69\n      }\n    }, \"Select Year:\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"toggle-group grid ctxt-bold color-white absolute mt36 ml12 border border--2 border--white bg-transparent  shadow-darken10  absolute  \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 633,\n        columnNumber: 9\n      }\n    }, options.map(renderOptions)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \" bg-transparent color-white absolute bottom right mr12 mb24 py12 px12 border--white round border border--2 round shadow-darken10 z1 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 636,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mb6 color-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 637,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"txt-bold txt-s block color-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 638,\n        columnNumber: 13\n      }\n    }, name), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"txt-s color-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 639,\n        columnNumber: 13\n      }\n    }, description)), stops.map(renderLegendKeys))) // <MapGL\n    //   {...viewport}\n    //   mapStyle=\"mapbox://styles/mapbox/dark-v9\"\n    //   mapboxApiAccessToken={TOKEN} >\n    //   {markers}\n    //   {this.renderPopup()}\n    //   <div className=\"nav\" style={navStyle}>\n    //     <NavigationControl/>\n    //     <Marker longitude={} latitude={} offsetTop={} offsetLeft={}>\n    //       <Pin onClick={() => this.setState({popupInfo: popupInfo})}/>\n    //     </Marker>\n    //     </div>\n    //   </div>\n    // </MapGL>\n    ;\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/garrettmillar/pandemic_dashboard/src/App.js"],"names":["React","Component","render","MapGL","Source","Layer","ControlPanel","dataLayer","updatePercentiles","json","requestJson","mapboxgl","Marker","Popup","NavigationControl","GeoJSONLayer","data","presence_data","accessToken","MAPBOX_TOKEN","draw","stops","options","name","description","property","propertyPresence","markerList","info","navStyle","position","top","left","padding","CITIES","App","constructor","props","mapRef","createRef","_loadData","setState","f","properties","income","state","year","_updateSettings","value","_onViewportChange","viewport","_onHover","event","features","srcEvent","offsetX","offsetY","hoveredFeature","find","layer","id","x","y","active","latitude","longitude","zoom","bearing","pitch","width","height","popupInfo","renderPopup","bind","componentDidUpdate","setFill","componentDidMount","tooltipContainer","document","createElement","error","response","map","Map","container","current","style","center","on","e","addSource","type","addLayer","source","interactive","layout","this","tooltip","offset","setLngLat","addTo","popup","closeButton","closeOnClick","pestMarker","console","log","getCanvas","cursor","queryRenderedFeatures","point","prob_intro","length","lngLat","setHTML","remove","_renderTooltip","percentile","containerComponent","setPaintProperty","renderLegendKeys","stop","i","backgroundColor","toLocaleString","renderOptions","option"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {Component} from 'react';\nimport {render} from 'react-dom';\nimport MapGL, {Source, Layer} from 'react-map-gl';\nimport ControlPanel from './control-panel';\n\nimport {dataLayer} from './map-style.js';\nimport {updatePercentiles} from './utils';\nimport {json as requestJson} from 'd3-request';\n\nimport mapboxgl, {Marker, Popup, NavigationControl, GeoJSONLayer} from 'mapbox-gl'\nimport data from './pandemic_output.json'\nimport presence_data from './presence_pandemic.json'\n// import Tooltip from './components/tooltip'\n// import ReactDOM from 'react-dom'\n// var MapboxDraw = require('@mapbox/mapbox-gl-draw');\n// import ReactMapGL, { Marker } from \"react-map-gl\";\n// import logo from './logo.svg';\n\n\n// import turf from 'turf-jsts'\n\nmapboxgl.accessToken = 'pk.eyJ1IjoiZ2NtaWxsYXIiLCJhIjoiY2pvcDhrbGl4MDFvaTNrczR0d2hxcjdnNSJ9.JYgBw6y2pEq_AEAOCaoQpw';\nconst MAPBOX_TOKEN = 'pk.eyJ1IjoiZ2NtaWxsYXIiLCJhIjoiY2pvcDhrbGl4MDFvaTNrczR0d2hxcjdnNSJ9.JYgBw6y2pEq_AEAOCaoQpw';\n\nvar draw;\n\nvar stops =  [\n  [0, 'rgba(45,69,132, 0.4)'],\t\n  [0.1, 'rgba(77,30,129, 0.4)'],\t\n  [0.2, 'rgba(109,41,126, 0.4)'],\t\t\t\n  [0.3, 'rgba(141,52,123, 0.4)'], \n  [0.4, 'rgba(173,63,120, 0.4)'],\t\n  [0.5, 'rgba(205,74,118, 0.4)'], \n  [0.6, 'rgba(210,103,103\t, 0.4)'],\t\t\n  [0.7, 'rgba(216,132,89,0.7)'], \n  [0.8, 'rgba(222,161,75, 0.4)'],\t\n  [0.9, 'rgba(228,190,61, 0.4)'],\n  [1, 'rgba(240,249,33, 0.4)']\n]\n\nconst options = [{\n  name: '1993',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T0',\n  propertyPresence: 'Presence 1993',\n  stops: stops\n}, {\n  name: '1994',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T1',\n  stops: stops\n}, {\n  name: '1995',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T2',\n  stops: stops\n}, {\n  name: '1996',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T3',\n  stops: stops\n}, {\n  name: '1997',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T4',\n  stops: stops\n}, {\n  name: '1998',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T5',\n  stops: stops\n}, {\n  name: '1999',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T6',\n  stops: stops\n}, {\n  name: '2000',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T7',\n  stops: stops\n}, {\n  name: '2001',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T8',\n  stops: stops\n}, {\n  name: '2002',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T9',\n  stops: stops\n}, {\n  name: '2003',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T10',\n  stops: stops\n}, {\n  name: '2004',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T11',\n  stops: stops\n}, {\n  name: '2005',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T12',\n  stops: stops\n}, {\n  name: '2006',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T13',\n  stops: stops\n}, {\n  name: '2007',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T14',\n  stops: stops\n}, {\n  name: '2008',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T15',\n  stops: stops\n}, {\n  name: '2009',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T16',\n  stops: stops\n}, {\n  name: '2010',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T17',\n  stops: stops\n}, {\n  name: '2011',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T18',\n  stops: stops\n}, {\n  name: '2012',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T19',\n  stops: stops\n}, {\n  name: '2013',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T20',\n  stops: stops\n}, {\n  name: '2014',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T21',\n  stops: stops\n}, {\n  name: '2015',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T22',\n  stops: stops\n}, {\n  name: '2016',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T23',\n  stops: stops\n}, {\n  name: '2017',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T24',\n  stops: stops\n}, {\n  name: '2018',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T25',\n  propertyPresence: 'Presence 1993',\n  stops: stops\n}\n]\n\nconst markerList = [\n  {\n    name: \"title\",\n    info: \"icon\"\n  },\n  {\n    name: \"title\",\n    info: \"icon\"\n  },\n  {\n    name: \"title\",\n    info: \"icon\"\n  }\n];\n\n// const presence_options = [{\n//   name: '1993',\n//   description: 'Presence',\n//   property: 'Presence 1993'\n// }, {\n//   name: '1994',\n//   description: 'Presence',\n//   property: 'Presence 1994'\n// }, {\n//   name: '1995',\n//   description: 'Presence',\n//   property: 'Presence 1995'\n// }, {\n//   name: '1996',\n//   description: 'Presence',\n//   property: 'Presence 1996'\n// }, {\n//   name: '1997',\n//   description: 'Presence',\n//   property: 'Presence 1997'\n// }, {\n//   name: '1998',\n//   description: 'Presence',\n//   property: 'Presence 1998'\n// }, {\n//   name: '1999',\n//   description: 'Presence',\n//   property: 'Presence 1999'\n// }, {\n//   name: '2000',\n//   description: 'Presence',\n//   property: 'Presence 2000'\n// }, {\n//   name: '2001',\n//   description: 'Presence',\n//   property: 'Presence 2001'\n// }, {\n//   name: '2002',\n//   description: 'Presence',\n//   property: 'Presence 2002'\n// }, {\n//   name: '2003',\n//   description: 'Presence',\n//   property: 'Presence 2003'\n// }, {\n//   name: '2004',\n//   description: 'Presence',\n//   property: 'Presence 2004'\n// }, {\n//   name: '2005',\n//   description: 'Presence',\n//   property: 'Presence 2005'\n// }, {\n//   name: '2006',\n//   description: 'Presence',\n//   property: 'Presence 2006'\n// }, {\n//   name: '2007',\n//   description: 'Presence',\n//   property: 'Presence 2007'\n// }, {\n//   name: '2008',\n//   description: 'Presence',\n//   property: 'Presence 2008'\n// }, {\n//   name: '2009',\n//   description: 'Presence',\n//   property: 'Presence 2009'\n// }, {\n//   name: '2010',\n//   description: 'Presence',\n//   property: 'Presence 2010'\n// }, {\n//   name: '2011',\n//   description: 'Presence',\n//   property: 'Presence 2011'\n// }, {\n//   name: '2012',\n//   description: 'Presence',\n//   property: 'Presence 2012'\n// }, {\n//   name: '2013',\n//   description: 'Presence',\n//   property: 'Presence 2013'\n// }, {\n//   name: '2014',\n//   description: 'Presence',\n//   property: 'Presence 2014'\n// }, {\n//   name: '2015',\n//   description: 'Presence',\n//   property: 'Presence 2015'\n// }, {\n//   name: '2016',\n//   description: 'Presence',\n//   property: 'Presence 2016'\n// }, {\n//   name: '2017',\n//   description: 'Presence',\n//   property: 'Presence 2017'\n// }, {\n//   name: '2018',\n//   description: 'Presence',\n//   property: 'Presence 2018'\n// }\n// ]\n\n\nconst navStyle = {\n  position: 'absolute',\n  top: 0,\n  left: 0,\n  padding: '10px'\n};\n\nconst CITIES =  {\n  name: \"title\",\n  info: \"icon\"\n}\n\n\nclass App extends React.Component {\n  mapRef = React.createRef();\n  map;\n  tooltipContainer;\n\n  \n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      active: options[0],\n      // active: options_presence[0],\n      viewport: {\n        latitude: 37.785164,\n        longitude: -100,\n        zoom: 2.8,\n        bearing: 0,\n        pitch: 0,\n        width: 500,\n        height: 500,\n      },\n      popupInfo: null\n    };\n    this.renderPopup = this.renderPopup.bind(this)\n    };\n\n// renderPopup(){\n//     return this.state.popupInfo && (\n//       <Popup tipSize={5}\n//         anchor=\"bottom-right\"\n//         longitude={this.state.popupInfo.state.longitude}\n//         latitude={this.state.popupInfo.state.latitude}\n//         onClose={() => this.setState({popupInfo: null})}\n//         closeOnClick={true}>\n//         <p>{}</p>\n//       </Popup>\n//     )\n//   }\n//   renderPopup(index) {\n//     return (\n//       this.state.popupInfo && (\n//         <Popup\n//           tipSize={5}\n//           anchor=\"bottom-right\"\n//           longitude={markerList[index].long}\n//           latitude={markerList[index].lat}\n//           onMouseLeave={() => this.setState({ popupInfo: null })}\n//           closeOnClick={true}\n//         >\n//           <p>\n//             <strong>{markerList[index].name}</strong>\n//             <br />\n//             Available beds:{markerList[index].info}\n//           </p>\n//         </Popup>\n//       )\n//     );\n//   }\n\n  componentDidUpdate() {\n    this.setFill();\n  }\n\n  componentDidMount() {\n    this.tooltipContainer = document.createElement('div');\n\n    \n    requestJson(\n      'https://raw.githubusercontent.com/uber/react-map-gl/master/examples/.data/us-income.geojson',\n      (error, response) => {\n        if (!error) {\n          this._loadData(response);\n        }\n      }\n    );\n\n    \n    \n    this.map = new mapboxgl.Map({\n      container: this.mapRef.current,\n      style: 'mapbox://styles/gcmillar/ckc13n1qe3rgx1ilchl8u3xax', // style: 'mapbox://styles/mapbox/dark-v10',\n      center: [12, 26],\n      zoom: 1.5,\n    });\n\n    this.map.on('load',  (e) => {\n      this.map.addSource('countries', {\n        type: 'geojson',\n        data\n      });\n\n      this.map.addSource('presence_data', {\n        type: 'geojson',\n        presence_data\n      });\n\n      this.map.addLayer({\n        id: 'countries',\n        type: 'fill',\n        source: 'countries'\n      },'country-label'); \n\n      this.map.addLayer({\n        id: 'presence_data',\n        interactive: true,\n        type: \"symbol\",\n        source: {\n          \"type\": \"geojson\",\n          \"data\": presence_data\n        },\n        layout: {\n          'icon-image': \n          ['concat', ['get', 'icon'], '-15'],\n          'text-field': ['get', 'title'],\n          'text-font': ['Open Sans Semibold', 'Arial Unicode MS Bold'],\n          'text-offset': [0, 0.6],\n          'text-anchor': 'top'\n        }\n      }); \n      this.\n\n      this.setFill();\n      // const features = this.map.queryRenderedFeatures(e.point, {\n\n      // pestMarker \n      //   .setLngLat(e.lngLat)\n      //   .setHTML('<b><u>Country Information' + '</b></u>' +\n      //     '<ul>' +\n      //     '<li><b>Name: </b>' + features[0].properties[\"NAME\"] + '</li>' +\n      //     '<li><b>Introduction Probability: </b>' + prob_intro  + '</li>' +\n      //     '</ul>')\n      // .addTo(this.map);\n      // // });\n      // this.set\n    });\n    \n    const tooltip = new mapboxgl.Marker(this.tooltipContainer, {\n      offset: [-120, 0]\n    }).setLngLat([0,0]).addTo(this.map);\n\n    var popup = new mapboxgl.Popup({\n      closeButton: false,\n      closeOnClick: false\n      });\n\n    var pestMarker = new mapboxgl.Marker({\n      offset: [-120, 0]\n    }).setLngLat([0,0]).addTo(this.map);\n    console.log(pestMarker);\n\n\n      this.map.on('mouseenter', 'countries', (e) => {\n        this.map.getCanvas().style.cursor =  'pointer';\n      });\n\n      this.map.on('click', 'countries', (e) => {\n        const features = this.map.queryRenderedFeatures(e.point, {\n       \n      });\n\n      const { name, description, stops, property } = this.state.active;\n\n      const prob_intro = features[0].properties[property];\n\n      this.map.getCanvas().style.cursor = features.length ? 'pointer' : '';\n      popup \n      .setLngLat(e.lngLat)\n      .setHTML('<b><u>Country Information' + '</b></u>' +\n        '<ul>' +\n        '<li><b>Name: </b>' + features[0].properties[\"NAME\"] + '</li>' +\n        '<li><b>Introduction Probability: </b>' + prob_intro  + '</li>' +\n        '</ul>')\n    .addTo(this.map);\n    });\n\n    this.map.on('mouseleave', 'countries', (e) => {\n      this.map.getCanvas().style.cursor =  '';\n      popup.remove();\n    });\n\n  }\n\n  _loadData = data => {\n    this.setState({\n      data: updatePercentiles(data, f => f.properties.income[this.state.year])\n    });\n  };\n\n  _updateSettings = (name, value) => {\n    if (name === 'year') {\n      this.setState({year: value});\n\n      const {data} = this.state;\n      if (data) {\n        // trigger update\n        this.setState({\n          data: updatePercentiles(data, f => f.properties.income[value])\n        });\n      }\n    }\n  };\n\n  _onViewportChange = viewport => this.setState({viewport});\n\n  _onHover = event => {\n    const {\n      features,\n      srcEvent: {offsetX, offsetY}\n    } = event;\n    const hoveredFeature = features && features.find(f => f.layer.id === 'data');\n\n    this.setState({hoveredFeature, x: offsetX, y: offsetY});\n  };\n\n  _renderTooltip() {\n    const {hoveredFeature, x, y} = this.state;\n\n    return (\n      hoveredFeature && (\n        <div className=\"tooltip\" style={{left: x, top: y}}>\n          <div>State: {hoveredFeature.properties.name}</div>\n          <div>Median Household Income: {hoveredFeature.properties.value}</div>\n          <div>Percentile: {(hoveredFeature.properties.percentile / 8) * 100}</div>\n        </div>\n      )\n    );\n  }\n\n  render() {\n    const {viewport, data} = this.state;\n\n    return (\n      <div style={{height: '100%', position: 'relative'}}>\n        <MapGL\n          {...viewport}\n          width=\"100%\"\n          height=\"100%\"\n          mapStyle=\"mapbox://styles/mapbox/light-v9\"\n          onViewportChange={this._onViewportChange}\n          mapboxApiAccessToken={MAPBOX_TOKEN}\n          onHover={this._onHover}\n        >\n          <Source type=\"geojson\" data={data}>\n            <Layer {...dataLayer} />\n          </Source>\n          {this._renderTooltip()}\n        </MapGL>\n\n        <ControlPanel\n          containerComponent={this.props.containerComponent}\n          settings={this.state}\n          onChange={this._updateSettings}\n        />\n      </div>\n    );\n  }\n// }\n\n  setFill() {\n    const { property, stops } = this.state.active;\n    this.map.setPaintProperty('countries', 'fill-color', {\n      property,\n      stops\n    },\n    )\n    this.map.setPaintProperty('countries', 'fill-outline-color', {\n      property,\n      stops\n    })\n    // this.map.setTooltip('presence_data', '', {\n    //   property,\n    //   stops\n    // })  ;\n  }\n\n  render() {\n    const {viewport} = this.state;\n    return (\n      <GeoJSONLayer\n        data={presence_data}\n        type=\"symbol\"\n        anchor=\"bottom-right\"\n        longitude={this.state.popupInfo.state.longitude}\n        latitude={this.state.popupInfo.state.latitude}\n        onClose={() => this.setState({popupInfo: null})}\n        closeOnClick={true}\n        symbolLayout={{\n          \"text-field\": \"{title}\",\n          \"text-font\": [\"Open Sans Semibold\", \"Arial Unicode MS Bold\"],\n          \"text-offset\": [0, 0.6],\n          \"text-anchor\": \"top\"\n        }}/>\n    );\n  }\n\n  render() {\n    const { name, description, stops, property } = this.state.active;\n    const renderLegendKeys = (stop, i) => {\n      return (\n        <div key={i} className='txt-s '>\n          <span className=' round-full w12 h12 inline-block ' style={{ backgroundColor: stop[1] }} />\n          <span >{`${stop[0].toLocaleString()}`}</span>\n        </div>\n      );\n    }\n\n   \n    const renderOptions = (option, i) => {\n      return (\n        <label key={i} className=\"toggle-container  right  left px3 py3\">\n          <input  onChange={() => this.setState({ active: options[i] })} checked={option.property === property} name=\"toggle\" type=\"radio\" />\n          <div  className=\"toggle grid txt-s color-white right   left toggle--active-white\">{option.name}</div>\n        </label>\n      );\n    }\n\n    return (\n      <div>\n        <div ref={this.mapRef} className=\"absolute top right left bottom align-middle grid\" />\n        <label className=\"ctxt-bold color-white absolute mt6 ml12\" ><b>Select Year:</b></label>\n        <div  className=\"toggle-group grid ctxt-bold color-white absolute mt36 ml12 border border--2 border--white bg-transparent  shadow-darken10  absolute  \">\n          {options.map(renderOptions)}\n        </div>\n        <div  className=\" bg-transparent color-white absolute bottom right mr12 mb24 py12 px12 border--white round border border--2 round shadow-darken10 z1 \">\n          <div className='mb6 color-white'>\n            <h2 className=\"txt-bold txt-s block color-white\">{name}</h2>\n            <p className='txt-s color-white'>{description}</p>\n          </div>\n          {stops.map(renderLegendKeys)}\n        </div>\n      </div>\n    \n\n      // <MapGL\n      //   {...viewport}\n      //   mapStyle=\"mapbox://styles/mapbox/dark-v9\"\n      //   mapboxApiAccessToken={TOKEN} >\n      //   {markers}\n      //   {this.renderPopup()}\n      //   <div className=\"nav\" style={navStyle}>\n      //     <NavigationControl/>\n      //     <Marker longitude={} latitude={} offsetTop={} offsetLeft={}>\n      //       <Pin onClick={() => this.setState({popupInfo: popupInfo})}/>\n      //     </Marker>\n      //     </div>\n      //   </div>\n      // </MapGL>\n\n      );\n      \n  }\n}\n\nexport default App;\n\n"]},"metadata":{},"sourceType":"module"}