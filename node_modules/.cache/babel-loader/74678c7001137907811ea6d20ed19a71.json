{"ast":null,"code":"var _jsxFileName = \"/Users/garrettmillar/pandemic_dashboard/src/App.js\";\nimport * as React from 'react';\nimport { Component } from 'react';\nimport { render } from 'react-dom';\nimport MapGL, { Source, Layer } from 'react-map-gl';\nimport ControlPanel from './control-panel';\nimport { dataLayer } from './map-style.js';\nimport { updatePercentiles } from './utils';\nimport { json as requestJson } from 'd3-request';\nconst MAPBOX_TOKEN = ''; // Set your mapbox token here\n\nexport default class App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      year: 2015,\n      data: null,\n      hoveredFeature: null,\n      viewport: {\n        latitude: 40,\n        longitude: -100,\n        zoom: 3,\n        bearing: 0,\n        pitch: 0\n      }\n    };\n\n    this._loadData = data => {\n      this.setState({\n        data: updatePercentiles(data, f => f.properties.income[this.state.year])\n      });\n    };\n\n    this._updateSettings = (name, value) => {\n      if (name === 'year') {\n        this.setState({\n          year: value\n        });\n        const {\n          data\n        } = this.state;\n\n        if (data) {\n          // trigger update\n          this.setState({\n            data: updatePercentiles(data, f => f.properties.income[value])\n          });\n        }\n      }\n    };\n\n    this._onViewportChange = viewport => this.setState({\n      viewport\n    });\n\n    this._onHover = event => {\n      const {\n        features,\n        srcEvent: {\n          offsetX,\n          offsetY\n        }\n      } = event;\n      const hoveredFeature = features && features.find(f => f.layer.id === 'data');\n      this.setState({\n        hoveredFeature,\n        x: offsetX,\n        y: offsetY\n      });\n    };\n  }\n\n  componentDidMount() {\n    requestJson('https://raw.githubusercontent.com/uber/react-map-gl/master/examples/.data/us-income.geojson', (error, response) => {\n      if (!error) {\n        this._loadData(response);\n      }\n    });\n  }\n\n  _renderTooltip() {\n    const {\n      hoveredFeature,\n      x,\n      y\n    } = this.state;\n    return hoveredFeature && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tooltip\",\n      style: {\n        left: x,\n        top: y\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }\n    }, \"State: \", hoveredFeature.properties.name), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }\n    }, \"Median Household Income: \", hoveredFeature.properties.value), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }\n    }, \"Percentile: \", hoveredFeature.properties.percentile / 8 * 100));\n  }\n\n  render() {\n    const {\n      viewport,\n      data\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        height: '100%',\n        position: 'relative'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(MapGL, Object.assign({}, viewport, {\n      width: \"100%\",\n      height: \"100%\",\n      mapStyle: \"mapbox://styles/mapbox/light-v9\",\n      onViewportChange: this._onViewportChange,\n      mapboxApiAccessToken: MAPBOX_TOKEN,\n      onHover: this._onHover,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Source, {\n      type: \"geojson\",\n      data: data,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Layer, Object.assign({}, dataLayer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }\n    }))), this._renderTooltip()), /*#__PURE__*/React.createElement(ControlPanel, {\n      containerComponent: this.props.containerComponent,\n      settings: this.state,\n      onChange: this._updateSettings,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }\n    }));\n  }\n\n} // import React from 'react';\n// import logo from './logo.svg';\n// import './App.css';\n// import mapboxgl from 'mapbox-gl'\n// import data from './pandemic_output.json'\n// import presence_data from './presence_pandemic.json'\n// import Tooltip from './components/tooltip'\n// import ReactDOM from 'react-dom'\n// import {Component} from 'react';\n// import {render} from 'react-dom';\n// import MapGL, {Source, Layer} from 'react-map-gl';\n// import ControlPanel from './control-panel';\n// import {dataLayer} from './map-style.js';\n// import {updatePercentiles} from './utils';\n// import {json as requestJson} from 'd3-request';\n// mapboxgl.accessToken = 'pk.eyJ1IjoiZ2NtaWxsYXIiLCJhIjoiY2pvcDhrbGl4MDFvaTNrczR0d2hxcjdnNSJ9.JYgBw6y2pEq_AEAOCaoQpw';\n// const MAPBOX_TOKEN = 'pk.eyJ1IjoiZ2NtaWxsYXIiLCJhIjoiY2pvcDhrbGl4MDFvaTNrczR0d2hxcjdnNSJ9.JYgBw6y2pEq_AEAOCaoQpw';\n// // var draw;\n// var stops =  [\n//   [0, 'rgba(45,69,132, 0.4)'],\t\n//   [0.1, 'rgba(77,30,129, 0.4)'],\t\n//   [0.2, 'rgba(109,41,126, 0.4)'],\t\t\t\n//   [0.3, 'rgba(141,52,123, 0.4)'], \n//   [0.4, 'rgba(173,63,120, 0.4)'],\t\n//   [0.5, 'rgba(205,74,118, 0.4)'], \n//   [0.6, 'rgba(210,103,103\t, 0.4)'],\t\t\n//   [0.7, 'rgba(216,132,89,0.7)'], \n//   [0.8, 'rgba(222,161,75, 0.4)'],\t\n//   [0.9, 'rgba(228,190,61, 0.4)'],\n//   [1, 'rgba(240,249,33, 0.4)']\n// ]\n// const options = [{\n//   name: '1993',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T0',\n//   propertyPresence: 'Presence 1993',\n//   stops: stops\n// }, {\n//   name: '1994',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T1',\n//   stops: stops\n// }, {\n//   name: '1995',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T2',\n//   stops: stops\n// }, {\n//   name: '1996',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T3',\n//   stops: stops\n// }, {\n//   name: '1997',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T4',\n//   stops: stops\n// }, {\n//   name: '1998',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T5',\n//   stops: stops\n// }, {\n//   name: '1999',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T6',\n//   stops: stops\n// }, {\n//   name: '2000',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T7',\n//   stops: stops\n// }, {\n//   name: '2001',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T8',\n//   stops: stops\n// }, {\n//   name: '2002',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T9',\n//   stops: stops\n// }, {\n//   name: '2003',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T10',\n//   stops: stops\n// }, {\n//   name: '2004',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T11',\n//   stops: stops\n// }, {\n//   name: '2005',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T12',\n//   stops: stops\n// }, {\n//   name: '2006',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T13',\n//   stops: stops\n// }, {\n//   name: '2007',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T14',\n//   stops: stops\n// }, {\n//   name: '2008',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T15',\n//   stops: stops\n// }, {\n//   name: '2009',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T16',\n//   stops: stops\n// }, {\n//   name: '2010',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T17',\n//   stops: stops\n// }, {\n//   name: '2011',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T18',\n//   stops: stops\n// }, {\n//   name: '2012',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T19',\n//   stops: stops\n// }, {\n//   name: '2013',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T20',\n//   stops: stops\n// }, {\n//   name: '2014',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T21',\n//   stops: stops\n// }, {\n//   name: '2015',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T22',\n//   stops: stops\n// }, {\n//   name: '2016',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T23',\n//   stops: stops\n// }, {\n//   name: '2017',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T24',\n//   stops: stops\n// }, {\n//   name: '2018',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T25',\n//   propertyPresence: 'Presence 1993',\n//   stops: stops\n// }\n// ]\n// const markerList = [\n//   {\n//     name: \"title\",\n//     info: \"icon\"\n//   },\n//   {\n//     name: \"title\",\n//     info: \"icon\"\n//   },\n//   {\n//     name: \"title\",\n//     info: \"icon\"\n//   }\n// ];\n// // const presence_options = [{\n// //   name: '1993',\n// //   description: 'Presence',\n// //   property: 'Presence 1993'\n// // }, {\n// //   name: '1994',\n// //   description: 'Presence',\n// //   property: 'Presence 1994'\n// // }, {\n// //   name: '1995',\n// //   description: 'Presence',\n// //   property: 'Presence 1995'\n// // }, {\n// //   name: '1996',\n// //   description: 'Presence',\n// //   property: 'Presence 1996'\n// // }, {\n// //   name: '1997',\n// //   description: 'Presence',\n// //   property: 'Presence 1997'\n// // }, {\n// //   name: '1998',\n// //   description: 'Presence',\n// //   property: 'Presence 1998'\n// // }, {\n// //   name: '1999',\n// //   description: 'Presence',\n// //   property: 'Presence 1999'\n// // }, {\n// //   name: '2000',\n// //   description: 'Presence',\n// //   property: 'Presence 2000'\n// // }, {\n// //   name: '2001',\n// //   description: 'Presence',\n// //   property: 'Presence 2001'\n// // }, {\n// //   name: '2002',\n// //   description: 'Presence',\n// //   property: 'Presence 2002'\n// // }, {\n// //   name: '2003',\n// //   description: 'Presence',\n// //   property: 'Presence 2003'\n// // }, {\n// //   name: '2004',\n// //   description: 'Presence',\n// //   property: 'Presence 2004'\n// // }, {\n// //   name: '2005',\n// //   description: 'Presence',\n// //   property: 'Presence 2005'\n// // }, {\n// //   name: '2006',\n// //   description: 'Presence',\n// //   property: 'Presence 2006'\n// // }, {\n// //   name: '2007',\n// //   description: 'Presence',\n// //   property: 'Presence 2007'\n// // }, {\n// //   name: '2008',\n// //   description: 'Presence',\n// //   property: 'Presence 2008'\n// // }, {\n// //   name: '2009',\n// //   description: 'Presence',\n// //   property: 'Presence 2009'\n// // }, {\n// //   name: '2010',\n// //   description: 'Presence',\n// //   property: 'Presence 2010'\n// // }, {\n// //   name: '2011',\n// //   description: 'Presence',\n// //   property: 'Presence 2011'\n// // }, {\n// //   name: '2012',\n// //   description: 'Presence',\n// //   property: 'Presence 2012'\n// // }, {\n// //   name: '2013',\n// //   description: 'Presence',\n// //   property: 'Presence 2013'\n// // }, {\n// //   name: '2014',\n// //   description: 'Presence',\n// //   property: 'Presence 2014'\n// // }, {\n// //   name: '2015',\n// //   description: 'Presence',\n// //   property: 'Presence 2015'\n// // }, {\n// //   name: '2016',\n// //   description: 'Presence',\n// //   property: 'Presence 2016'\n// // }, {\n// //   name: '2017',\n// //   description: 'Presence',\n// //   property: 'Presence 2017'\n// // }, {\n// //   name: '2018',\n// //   description: 'Presence',\n// //   property: 'Presence 2018'\n// // }\n// // ]\n// const navStyle = {\n//   position: 'absolute',\n//   top: 0,\n//   left: 0,\n//   padding: '10px'\n// };\n// const CITIES =  {\n//   name: \"title\",\n//   info: \"icon\"\n// }\n// class App extends React.Component {\n//   mapRef = React.createRef();\n//   map;\n//   tooltipContainer;\n//   constructor(props: Props) {\n//     super(props);\n//     this.state = {\n//       active: options[0],\n//       // active: options_presence[0],\n//       year: 1993,\n//       data: null,\n//       hoveredFeature: null,\n//       viewport: {\n//         latitude: 40,\n//         longitude: -100,\n//         zoom: 3,\n//         bearing: 0,\n//         pitch: 0\n//       },\n//       // popupInfo: null\n//     };\n//     // this.renderPopup = this.renderPopup.bind(this)\n//     };\n//   componentDidUpdate() {\n//     this.setFill();\n//   }\n//   componentDidMount() {\n//     this.tooltipContainer = document.createElement('div');\n//     requestJson(\n//       'https://raw.githubusercontent.com/uber/react-map-gl/master/examples/.data/us-income.geojson',\n//       (error, response) => {\n//         if (!error) {\n//           this._loadData(response);\n//         }\n//       }\n//     );\n//     this.map = new mapboxgl.Map({\n//       container: this.mapRef.current,\n//       style: 'mapbox://styles/gcmillar/ckc13n1qe3rgx1ilchl8u3xax', // style: 'mapbox://styles/mapbox/dark-v10',\n//       center: [12, 26],\n//       zoom: 1.5,\n//     });\n//     this.map.on('load',  (e) => {\n//       this.map.addSource('countries', {\n//         type: 'geojson',\n//         data\n//       });\n//       this.map.addSource('presence_data', {\n//         type: 'geojson',\n//         presence_data\n//       });\n//       this.map.addLayer({\n//         id: 'countries',\n//         type: 'fill',\n//         source: 'countries'\n//       },'country-label'); \n//       this.map.addLayer({\n//         id: 'presence_data',\n//         interactive: true,\n//         type: \"symbol\",\n//         source: {\n//           \"type\": \"geojson\",\n//           \"data\": presence_data\n//         },\n//         layout: {\n//           'icon-image': \n//           ['concat', ['get', 'icon'], '-15'],\n//           'text-field': ['get', 'title'],\n//           'text-font': ['Open Sans Semibold', 'Arial Unicode MS Bold'],\n//           'text-offset': [0, 0.6],\n//           'text-anchor': 'top'\n//         }\n//       }); \n//       // this.\n//       this.map.on('styledata', function() {\n//         this.addLayer();\n//       });\n//       this.setFill();\n//       // const features = this.map.queryRenderedFeatures(e.point, {\n//       // pestMarker \n//       //   .setLngLat(e.lngLat)\n//       //   .setHTML('<b><u>Country Information' + '</b></u>' +\n//       //     '<ul>' +\n//       //     '<li><b>Name: </b>' + features[0].properties[\"NAME\"] + '</li>' +\n//       //     '<li><b>Introduction Probability: </b>' + prob_intro  + '</li>' +\n//       //     '</ul>')\n//       // .addTo(this.map);\n//       // // });\n//       // this.set\n//     });\n//     const tooltip = new mapboxgl.Marker(this.tooltipContainer, {\n//       offset: [-120, 0]\n//     }).setLngLat([0,0]).addTo(this.map);\n//     var popup = new mapboxgl.Popup({\n//       closeButton: false,\n//       closeOnClick: false\n//       });\n//     var pestMarker = new mapboxgl.Marker({\n//       offset: [-120, 0]\n//     }).setLngLat([0,0]).addTo(this.map);\n//     console.log(pestMarker);\n//       this.map.on('mouseenter', 'countries', (e) => {\n//         this.map.getCanvas().style.cursor =  'pointer';\n//       });\n//       this.map.on('click', 'countries', (e) => {\n//         const features = this.map.queryRenderedFeatures(e.point, {\n//       });\n//       const { name, description, stops, property } = this.state.active;\n//       const prob_intro = features[0].properties[property];\n//       this.map.getCanvas().style.cursor = features.length ? 'pointer' : '';\n//       popup \n//       .setLngLat(e.lngLat)\n//       .setHTML('<b><u>Country Information' + '</b></u>' +\n//         '<ul>' +\n//         '<li><b>Name: </b>' + features[0].properties[\"NAME\"] + '</li>' +\n//         '<li><b>Introduction Probability: </b>' + prob_intro  + '</li>' +\n//         '</ul>')\n//     .addTo(this.map);\n//     });\n//     this.map.on('mouseleave', 'countries', (e) => {\n//       this.map.getCanvas().style.cursor =  '';\n//       popup.remove();\n//     });\n//   }\n//   _loadData = data => {\n//     this.map.setState({\n//       data: updatePercentiles(data, f => f.properties.income[this.state.year])\n//     });\n//   };\n//   _updateSettings = (name, value) => {\n//     if (name === 'year') {\n//       this.map.setState({year: value});\n//       const {data} = this.state;\n//       if (data) {\n//         // trigger update\n//         this.setState({\n//           data: updatePercentiles(data, f => f.properties.income[value])\n//         });\n//       }\n//     }\n//   };\n//   _onViewportChange = viewport => this.setState({viewport});\n//   _onHover = event => {\n//     const {\n//       features,\n//       srcEvent: {offsetX, offsetY}\n//     } = event;\n//     const hoveredFeature = features && features.find(f => f.layer.id === 'data');\n//     this.setState({hoveredFeature, x: offsetX, y: offsetY});\n//   };\n//   _renderTooltip() {\n//     const {hoveredFeature, x, y} = this.state;\n//     return (\n//       hoveredFeature && (\n//         <div className=\"tooltip\" style={{left: x, top: y}}>\n//           <div>State: {hoveredFeature.properties.name}</div>\n//           <div>Median Household Income: {hoveredFeature.properties.value}</div>\n//           <div>Percentile: {(hoveredFeature.properties.percentile / 8) * 100}</div>\n//         </div>\n//       )\n//     );\n//   }\n//   render() {\n//     const {viewport, data} = this.state;\n//     return (\n//       <div style={{height: '100%', position: 'relative'}}>\n//         <MapGL\n//           {...viewport}\n//           width=\"100%\"\n//           height=\"100%\"\n//           mapStyle=\"mapbox://styles/mapbox/light-v9\"\n//           onViewportChange={this._onViewportChange}\n//           mapboxApiAccessToken={MAPBOX_TOKEN}\n//           onHover={this._onHover}\n//         >\n//           <Source type=\"geojson\" data={data}>\n//             <Layer {...dataLayer} />\n//           </Source>\n//           {this._renderTooltip()}\n//         </MapGL>\n//         <ControlPanel\n//           containerComponent={this.props.containerComponent}\n//           settings={this.state}\n//           onChange={this._updateSettings}\n//         />\n//       </div>\n//     );\n//   }\n//   render() {\n//     const {viewport, data} = this.state;\n//     return (\n//       <div style={{height: '100%', position: 'relative'}}>\n//         <MapGL\n//           {...viewport}\n//           width=\"100%\"\n//           height=\"100%\"\n//           mapStyle=\"mapbox://styles/mapbox/light-v9\"\n//           onViewportChange={this._onViewportChange}\n//           mapboxApiAccessToken={MAPBOX_TOKEN}\n//           onHover={this._onHover}\n//         >\n//           <Source type=\"geojson\" data={data}>\n//             <Layer {...dataLayer} />\n//           </Source>\n//           {this._renderTooltip()}\n//         </MapGL>\n//         <ControlPanel\n//           containerComponent={this.props.containerComponent}\n//           settings={this.state}\n//           onChange={this._updateSettings}\n//         />\n//       </div>\n//     );\n//   }\n// // }\n//   setFill() {\n//     const { property, stops } = this.state.active;\n//     this.map.setPaintProperty('countries', 'fill-color', {\n//       property,\n//       stops\n//     },\n//     )\n//     this.map.setPaintProperty('countries', 'fill-outline-color', {\n//       property,\n//       stops\n//     })\n//     // this.map.setTooltip('presence_data', '', {\n//     //   property,\n//     //   stops\n//     // })  ;\n//   }\n//   // render() {\n//   //   const {viewport} = this.state;\n//   //   return (\n//   //     <GeoJSONLayer\n//   //       data={presence_data}\n//   //       type=\"symbol\"\n//   //       anchor=\"bottom-right\"\n//   //       longitude={this.state.popupInfo.state.longitude}\n//   //       latitude={this.state.popupInfo.state.latitude}\n//   //       onClose={() => this.setState({popupInfo: null})}\n//   //       closeOnClick={true}\n//   //       symbolLayout={{\n//   //         \"text-field\": \"{title}\",\n//   //         \"text-font\": [\"Open Sans Semibold\", \"Arial Unicode MS Bold\"],\n//   //         \"text-offset\": [0, 0.6],\n//   //         \"text-anchor\": \"top\"\n//   //       }}/>\n//   //   );\n//   // }\n//   render() {\n//     const { name, description, stops, property } = this.state.active;\n//     const renderLegendKeys = (stop, i) => {\n//       return (\n//         <div key={i} className='txt-s '>\n//           <span className=' round-full w12 h12 inline-block ' style={{ backgroundColor: stop[1] }} />\n//           <span >{`${stop[0].toLocaleString()}`}</span>\n//         </div>\n//       );\n//     }\n//     const renderOptions = (option, i) => {\n//       return (\n//         <label key={i} className=\"toggle-container  right  left px3 py3\">\n//           <input  onChange={() => this.setState({ active: options[i] })} checked={option.property === property} name=\"toggle\" type=\"radio\" />\n//           <div  className=\"toggle grid txt-s color-white right   left toggle--active-white\">{option.name}</div>\n//         </label>\n//       );\n//     }\n//     return (\n//       <div>\n//         <div ref={this.mapRef} className=\"absolute top right left bottom align-middle grid\" />\n//         <label className=\"ctxt-bold color-white absolute mt6 ml12\" ><b>Select Year:</b></label>\n//         <div  className=\"toggle-group grid ctxt-bold color-white absolute mt36 ml12 border border--2 border--white bg-transparent  shadow-darken10  absolute  \">\n//           {options.map(renderOptions)}\n//         </div>\n//         <div  className=\" bg-transparent color-white absolute bottom right mr12 mb24 py12 px12 border--white round border border--2 round shadow-darken10 z1 \">\n//           <div className='mb6 color-white'>\n//             <h2 className=\"txt-bold txt-s block color-white\">{name}</h2>\n//             <p className='txt-s color-white'>{description}</p>\n//           </div>\n//           {stops.map(renderLegendKeys)}\n//         </div>\n//       </div>\n//       // <MapGL\n//       //   {...viewport}\n//       //   mapStyle=\"mapbox://styles/mapbox/dark-v9\"\n//       //   mapboxApiAccessToken={TOKEN} >\n//       //   {markers}\n//       //   {this.renderPopup()}\n//       //   <div className=\"nav\" style={navStyle}>\n//       //     <NavigationControl/>\n//       //     <Marker longitude={} latitude={} offsetTop={} offsetLeft={}>\n//       //       <Pin onClick={() => this.setState({popupInfo: popupInfo})}/>\n//       //     </Marker>\n//       //     </div>\n//       //   </div>\n//       // </MapGL>\n//       );\n//   }\n// }\n// export default App;\n// export function renderToDom(container) {\n//   render(<App />, container);\n// }","map":{"version":3,"sources":["/Users/garrettmillar/pandemic_dashboard/src/App.js"],"names":["React","Component","render","MapGL","Source","Layer","ControlPanel","dataLayer","updatePercentiles","json","requestJson","MAPBOX_TOKEN","App","state","year","data","hoveredFeature","viewport","latitude","longitude","zoom","bearing","pitch","_loadData","setState","f","properties","income","_updateSettings","name","value","_onViewportChange","_onHover","event","features","srcEvent","offsetX","offsetY","find","layer","id","x","y","componentDidMount","error","response","_renderTooltip","left","top","percentile","height","position","props","containerComponent"],"mappings":"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;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAGA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAGA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AACA","sourcesContent":["import * as React from 'react';\nimport {Component} from 'react';\nimport {render} from 'react-dom';\nimport MapGL, {Source, Layer} from 'react-map-gl';\nimport ControlPanel from './control-panel';\n\nimport {dataLayer} from './map-style.js';\nimport {updatePercentiles} from './utils';\nimport {json as requestJson} from 'd3-request';\n\nconst MAPBOX_TOKEN = ''; // Set your mapbox token here\n\nexport default class App extends Component {\n  state = {\n    year: 2015,\n    data: null,\n    hoveredFeature: null,\n    viewport: {\n      latitude: 40,\n      longitude: -100,\n      zoom: 3,\n      bearing: 0,\n      pitch: 0\n    }\n  };\n  \n  componentDidMount() {\n    requestJson(\n      'https://raw.githubusercontent.com/uber/react-map-gl/master/examples/.data/us-income.geojson',\n      (error, response) => {\n        if (!error) {\n          this._loadData(response);\n        }\n      }\n    );\n  }\n\n  _loadData = data => {\n    this.setState({\n      data: updatePercentiles(data, f => f.properties.income[this.state.year])\n    });\n  };\n\n  _updateSettings = (name, value) => {\n    if (name === 'year') {\n      this.setState({year: value});\n\n      const {data} = this.state;\n      if (data) {\n        // trigger update\n        this.setState({\n          data: updatePercentiles(data, f => f.properties.income[value])\n        });\n      }\n    }\n  };\n\n  _onViewportChange = viewport => this.setState({viewport});\n\n  _onHover = event => {\n    const {\n      features,\n      srcEvent: {offsetX, offsetY}\n    } = event;\n    const hoveredFeature = features && features.find(f => f.layer.id === 'data');\n\n    this.setState({hoveredFeature, x: offsetX, y: offsetY});\n  };\n\n  _renderTooltip() {\n    const {hoveredFeature, x, y} = this.state;\n\n    return (\n      hoveredFeature && (\n        <div className=\"tooltip\" style={{left: x, top: y}}>\n          <div>State: {hoveredFeature.properties.name}</div>\n          <div>Median Household Income: {hoveredFeature.properties.value}</div>\n          <div>Percentile: {(hoveredFeature.properties.percentile / 8) * 100}</div>\n        </div>\n      )\n    );\n  }\n\n  render() {\n    const {viewport, data} = this.state;\n\n    return (\n      <div style={{height: '100%', position: 'relative'}}>\n        <MapGL\n          {...viewport}\n          width=\"100%\"\n          height=\"100%\"\n          mapStyle=\"mapbox://styles/mapbox/light-v9\"\n          onViewportChange={this._onViewportChange}\n          mapboxApiAccessToken={MAPBOX_TOKEN}\n          onHover={this._onHover}\n        >\n          <Source type=\"geojson\" data={data}>\n            <Layer {...dataLayer} />\n          </Source>\n          {this._renderTooltip()}\n        </MapGL>\n\n        <ControlPanel\n          containerComponent={this.props.containerComponent}\n          settings={this.state}\n          onChange={this._updateSettings}\n        />\n      </div>\n    );\n  }\n}\n\n// import React from 'react';\n// import logo from './logo.svg';\n// import './App.css';\n// import mapboxgl from 'mapbox-gl'\n// import data from './pandemic_output.json'\n// import presence_data from './presence_pandemic.json'\n// import Tooltip from './components/tooltip'\n// import ReactDOM from 'react-dom'\n\n// import {Component} from 'react';\n// import {render} from 'react-dom';\n// import MapGL, {Source, Layer} from 'react-map-gl';\n// import ControlPanel from './control-panel';\n\n// import {dataLayer} from './map-style.js';\n// import {updatePercentiles} from './utils';\n// import {json as requestJson} from 'd3-request';\n\n\n// mapboxgl.accessToken = 'pk.eyJ1IjoiZ2NtaWxsYXIiLCJhIjoiY2pvcDhrbGl4MDFvaTNrczR0d2hxcjdnNSJ9.JYgBw6y2pEq_AEAOCaoQpw';\n// const MAPBOX_TOKEN = 'pk.eyJ1IjoiZ2NtaWxsYXIiLCJhIjoiY2pvcDhrbGl4MDFvaTNrczR0d2hxcjdnNSJ9.JYgBw6y2pEq_AEAOCaoQpw';\n\n// // var draw;\n// var stops =  [\n//   [0, 'rgba(45,69,132, 0.4)'],\t\n//   [0.1, 'rgba(77,30,129, 0.4)'],\t\n//   [0.2, 'rgba(109,41,126, 0.4)'],\t\t\t\n//   [0.3, 'rgba(141,52,123, 0.4)'], \n//   [0.4, 'rgba(173,63,120, 0.4)'],\t\n//   [0.5, 'rgba(205,74,118, 0.4)'], \n//   [0.6, 'rgba(210,103,103\t, 0.4)'],\t\t\n//   [0.7, 'rgba(216,132,89,0.7)'], \n//   [0.8, 'rgba(222,161,75, 0.4)'],\t\n//   [0.9, 'rgba(228,190,61, 0.4)'],\n//   [1, 'rgba(240,249,33, 0.4)']\n// ]\n\n// const options = [{\n//   name: '1993',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T0',\n//   propertyPresence: 'Presence 1993',\n//   stops: stops\n// }, {\n//   name: '1994',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T1',\n//   stops: stops\n// }, {\n//   name: '1995',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T2',\n//   stops: stops\n// }, {\n//   name: '1996',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T3',\n//   stops: stops\n// }, {\n//   name: '1997',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T4',\n//   stops: stops\n// }, {\n//   name: '1998',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T5',\n//   stops: stops\n// }, {\n//   name: '1999',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T6',\n//   stops: stops\n// }, {\n//   name: '2000',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T7',\n//   stops: stops\n// }, {\n//   name: '2001',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T8',\n//   stops: stops\n// }, {\n//   name: '2002',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T9',\n//   stops: stops\n// }, {\n//   name: '2003',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T10',\n//   stops: stops\n// }, {\n//   name: '2004',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T11',\n//   stops: stops\n// }, {\n//   name: '2005',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T12',\n//   stops: stops\n// }, {\n//   name: '2006',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T13',\n//   stops: stops\n// }, {\n//   name: '2007',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T14',\n//   stops: stops\n// }, {\n//   name: '2008',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T15',\n//   stops: stops\n// }, {\n//   name: '2009',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T16',\n//   stops: stops\n// }, {\n//   name: '2010',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T17',\n//   stops: stops\n// }, {\n//   name: '2011',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T18',\n//   stops: stops\n// }, {\n//   name: '2012',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T19',\n//   stops: stops\n// }, {\n//   name: '2013',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T20',\n//   stops: stops\n// }, {\n//   name: '2014',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T21',\n//   stops: stops\n// }, {\n//   name: '2015',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T22',\n//   stops: stops\n// }, {\n//   name: '2016',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T23',\n//   stops: stops\n// }, {\n//   name: '2017',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T24',\n//   stops: stops\n// }, {\n//   name: '2018',\n//   description: 'Introduction Probability',\n//   property: 'Probability of introduction T25',\n//   propertyPresence: 'Presence 1993',\n//   stops: stops\n// }\n// ]\n\n// const markerList = [\n//   {\n//     name: \"title\",\n//     info: \"icon\"\n//   },\n//   {\n//     name: \"title\",\n//     info: \"icon\"\n//   },\n//   {\n//     name: \"title\",\n//     info: \"icon\"\n//   }\n// ];\n\n// // const presence_options = [{\n// //   name: '1993',\n// //   description: 'Presence',\n// //   property: 'Presence 1993'\n// // }, {\n// //   name: '1994',\n// //   description: 'Presence',\n// //   property: 'Presence 1994'\n// // }, {\n// //   name: '1995',\n// //   description: 'Presence',\n// //   property: 'Presence 1995'\n// // }, {\n// //   name: '1996',\n// //   description: 'Presence',\n// //   property: 'Presence 1996'\n// // }, {\n// //   name: '1997',\n// //   description: 'Presence',\n// //   property: 'Presence 1997'\n// // }, {\n// //   name: '1998',\n// //   description: 'Presence',\n// //   property: 'Presence 1998'\n// // }, {\n// //   name: '1999',\n// //   description: 'Presence',\n// //   property: 'Presence 1999'\n// // }, {\n// //   name: '2000',\n// //   description: 'Presence',\n// //   property: 'Presence 2000'\n// // }, {\n// //   name: '2001',\n// //   description: 'Presence',\n// //   property: 'Presence 2001'\n// // }, {\n// //   name: '2002',\n// //   description: 'Presence',\n// //   property: 'Presence 2002'\n// // }, {\n// //   name: '2003',\n// //   description: 'Presence',\n// //   property: 'Presence 2003'\n// // }, {\n// //   name: '2004',\n// //   description: 'Presence',\n// //   property: 'Presence 2004'\n// // }, {\n// //   name: '2005',\n// //   description: 'Presence',\n// //   property: 'Presence 2005'\n// // }, {\n// //   name: '2006',\n// //   description: 'Presence',\n// //   property: 'Presence 2006'\n// // }, {\n// //   name: '2007',\n// //   description: 'Presence',\n// //   property: 'Presence 2007'\n// // }, {\n// //   name: '2008',\n// //   description: 'Presence',\n// //   property: 'Presence 2008'\n// // }, {\n// //   name: '2009',\n// //   description: 'Presence',\n// //   property: 'Presence 2009'\n// // }, {\n// //   name: '2010',\n// //   description: 'Presence',\n// //   property: 'Presence 2010'\n// // }, {\n// //   name: '2011',\n// //   description: 'Presence',\n// //   property: 'Presence 2011'\n// // }, {\n// //   name: '2012',\n// //   description: 'Presence',\n// //   property: 'Presence 2012'\n// // }, {\n// //   name: '2013',\n// //   description: 'Presence',\n// //   property: 'Presence 2013'\n// // }, {\n// //   name: '2014',\n// //   description: 'Presence',\n// //   property: 'Presence 2014'\n// // }, {\n// //   name: '2015',\n// //   description: 'Presence',\n// //   property: 'Presence 2015'\n// // }, {\n// //   name: '2016',\n// //   description: 'Presence',\n// //   property: 'Presence 2016'\n// // }, {\n// //   name: '2017',\n// //   description: 'Presence',\n// //   property: 'Presence 2017'\n// // }, {\n// //   name: '2018',\n// //   description: 'Presence',\n// //   property: 'Presence 2018'\n// // }\n// // ]\n\n\n// const navStyle = {\n//   position: 'absolute',\n//   top: 0,\n//   left: 0,\n//   padding: '10px'\n// };\n\n// const CITIES =  {\n//   name: \"title\",\n//   info: \"icon\"\n// }\n\n\n// class App extends React.Component {\n//   mapRef = React.createRef();\n//   map;\n//   tooltipContainer;\n\n//   constructor(props: Props) {\n//     super(props);\n//     this.state = {\n//       active: options[0],\n//       // active: options_presence[0],\n//       year: 1993,\n//       data: null,\n//       hoveredFeature: null,\n//       viewport: {\n//         latitude: 40,\n//         longitude: -100,\n//         zoom: 3,\n//         bearing: 0,\n//         pitch: 0\n//       },\n//       // popupInfo: null\n//     };\n//     // this.renderPopup = this.renderPopup.bind(this)\n//     };\n\n\n//   componentDidUpdate() {\n//     this.setFill();\n//   }\n\n//   componentDidMount() {\n//     this.tooltipContainer = document.createElement('div');\n\n//     requestJson(\n//       'https://raw.githubusercontent.com/uber/react-map-gl/master/examples/.data/us-income.geojson',\n//       (error, response) => {\n//         if (!error) {\n//           this._loadData(response);\n//         }\n//       }\n//     );\n  \n//     this.map = new mapboxgl.Map({\n//       container: this.mapRef.current,\n//       style: 'mapbox://styles/gcmillar/ckc13n1qe3rgx1ilchl8u3xax', // style: 'mapbox://styles/mapbox/dark-v10',\n//       center: [12, 26],\n//       zoom: 1.5,\n//     });\n\n//     this.map.on('load',  (e) => {\n//       this.map.addSource('countries', {\n//         type: 'geojson',\n//         data\n//       });\n\n//       this.map.addSource('presence_data', {\n//         type: 'geojson',\n//         presence_data\n//       });\n\n//       this.map.addLayer({\n//         id: 'countries',\n//         type: 'fill',\n//         source: 'countries'\n//       },'country-label'); \n\n//       this.map.addLayer({\n//         id: 'presence_data',\n//         interactive: true,\n//         type: \"symbol\",\n//         source: {\n//           \"type\": \"geojson\",\n//           \"data\": presence_data\n//         },\n//         layout: {\n//           'icon-image': \n//           ['concat', ['get', 'icon'], '-15'],\n//           'text-field': ['get', 'title'],\n//           'text-font': ['Open Sans Semibold', 'Arial Unicode MS Bold'],\n//           'text-offset': [0, 0.6],\n//           'text-anchor': 'top'\n//         }\n//       }); \n//       // this.\n//       this.map.on('styledata', function() {\n//         this.addLayer();\n//       });\n\n//       this.setFill();\n//       // const features = this.map.queryRenderedFeatures(e.point, {\n\n//       // pestMarker \n//       //   .setLngLat(e.lngLat)\n//       //   .setHTML('<b><u>Country Information' + '</b></u>' +\n//       //     '<ul>' +\n//       //     '<li><b>Name: </b>' + features[0].properties[\"NAME\"] + '</li>' +\n//       //     '<li><b>Introduction Probability: </b>' + prob_intro  + '</li>' +\n//       //     '</ul>')\n//       // .addTo(this.map);\n//       // // });\n//       // this.set\n//     });\n    \n//     const tooltip = new mapboxgl.Marker(this.tooltipContainer, {\n//       offset: [-120, 0]\n//     }).setLngLat([0,0]).addTo(this.map);\n\n//     var popup = new mapboxgl.Popup({\n//       closeButton: false,\n//       closeOnClick: false\n//       });\n\n//     var pestMarker = new mapboxgl.Marker({\n//       offset: [-120, 0]\n//     }).setLngLat([0,0]).addTo(this.map);\n//     console.log(pestMarker);\n\n\n//       this.map.on('mouseenter', 'countries', (e) => {\n//         this.map.getCanvas().style.cursor =  'pointer';\n//       });\n\n//       this.map.on('click', 'countries', (e) => {\n//         const features = this.map.queryRenderedFeatures(e.point, {\n       \n//       });\n\n//       const { name, description, stops, property } = this.state.active;\n\n//       const prob_intro = features[0].properties[property];\n\n//       this.map.getCanvas().style.cursor = features.length ? 'pointer' : '';\n//       popup \n//       .setLngLat(e.lngLat)\n//       .setHTML('<b><u>Country Information' + '</b></u>' +\n//         '<ul>' +\n//         '<li><b>Name: </b>' + features[0].properties[\"NAME\"] + '</li>' +\n//         '<li><b>Introduction Probability: </b>' + prob_intro  + '</li>' +\n//         '</ul>')\n//     .addTo(this.map);\n//     });\n\n//     this.map.on('mouseleave', 'countries', (e) => {\n//       this.map.getCanvas().style.cursor =  '';\n//       popup.remove();\n//     });\n\n//   }\n\n\n//   _loadData = data => {\n//     this.map.setState({\n//       data: updatePercentiles(data, f => f.properties.income[this.state.year])\n//     });\n//   };\n\n//   _updateSettings = (name, value) => {\n//     if (name === 'year') {\n//       this.map.setState({year: value});\n\n//       const {data} = this.state;\n//       if (data) {\n//         // trigger update\n//         this.setState({\n//           data: updatePercentiles(data, f => f.properties.income[value])\n//         });\n//       }\n//     }\n//   };\n\n//   _onViewportChange = viewport => this.setState({viewport});\n\n//   _onHover = event => {\n//     const {\n//       features,\n//       srcEvent: {offsetX, offsetY}\n//     } = event;\n//     const hoveredFeature = features && features.find(f => f.layer.id === 'data');\n\n//     this.setState({hoveredFeature, x: offsetX, y: offsetY});\n//   };\n\n//   _renderTooltip() {\n//     const {hoveredFeature, x, y} = this.state;\n\n//     return (\n//       hoveredFeature && (\n//         <div className=\"tooltip\" style={{left: x, top: y}}>\n//           <div>State: {hoveredFeature.properties.name}</div>\n//           <div>Median Household Income: {hoveredFeature.properties.value}</div>\n//           <div>Percentile: {(hoveredFeature.properties.percentile / 8) * 100}</div>\n//         </div>\n//       )\n//     );\n//   }\n\n//   render() {\n//     const {viewport, data} = this.state;\n\n//     return (\n//       <div style={{height: '100%', position: 'relative'}}>\n//         <MapGL\n//           {...viewport}\n//           width=\"100%\"\n//           height=\"100%\"\n//           mapStyle=\"mapbox://styles/mapbox/light-v9\"\n//           onViewportChange={this._onViewportChange}\n//           mapboxApiAccessToken={MAPBOX_TOKEN}\n//           onHover={this._onHover}\n//         >\n//           <Source type=\"geojson\" data={data}>\n//             <Layer {...dataLayer} />\n//           </Source>\n//           {this._renderTooltip()}\n//         </MapGL>\n\n//         <ControlPanel\n//           containerComponent={this.props.containerComponent}\n//           settings={this.state}\n//           onChange={this._updateSettings}\n//         />\n//       </div>\n//     );\n//   }\n\n \n\n//   render() {\n//     const {viewport, data} = this.state;\n\n//     return (\n//       <div style={{height: '100%', position: 'relative'}}>\n//         <MapGL\n//           {...viewport}\n//           width=\"100%\"\n//           height=\"100%\"\n//           mapStyle=\"mapbox://styles/mapbox/light-v9\"\n//           onViewportChange={this._onViewportChange}\n//           mapboxApiAccessToken={MAPBOX_TOKEN}\n//           onHover={this._onHover}\n//         >\n//           <Source type=\"geojson\" data={data}>\n//             <Layer {...dataLayer} />\n//           </Source>\n//           {this._renderTooltip()}\n//         </MapGL>\n\n//         <ControlPanel\n//           containerComponent={this.props.containerComponent}\n//           settings={this.state}\n//           onChange={this._updateSettings}\n//         />\n//       </div>\n//     );\n//   }\n// // }\n\n//   setFill() {\n//     const { property, stops } = this.state.active;\n//     this.map.setPaintProperty('countries', 'fill-color', {\n//       property,\n//       stops\n//     },\n//     )\n//     this.map.setPaintProperty('countries', 'fill-outline-color', {\n//       property,\n//       stops\n//     })\n//     // this.map.setTooltip('presence_data', '', {\n//     //   property,\n//     //   stops\n//     // })  ;\n//   }\n\n//   // render() {\n//   //   const {viewport} = this.state;\n//   //   return (\n//   //     <GeoJSONLayer\n//   //       data={presence_data}\n//   //       type=\"symbol\"\n//   //       anchor=\"bottom-right\"\n//   //       longitude={this.state.popupInfo.state.longitude}\n//   //       latitude={this.state.popupInfo.state.latitude}\n//   //       onClose={() => this.setState({popupInfo: null})}\n//   //       closeOnClick={true}\n//   //       symbolLayout={{\n//   //         \"text-field\": \"{title}\",\n//   //         \"text-font\": [\"Open Sans Semibold\", \"Arial Unicode MS Bold\"],\n//   //         \"text-offset\": [0, 0.6],\n//   //         \"text-anchor\": \"top\"\n//   //       }}/>\n//   //   );\n//   // }\n\n//   render() {\n//     const { name, description, stops, property } = this.state.active;\n//     const renderLegendKeys = (stop, i) => {\n//       return (\n//         <div key={i} className='txt-s '>\n//           <span className=' round-full w12 h12 inline-block ' style={{ backgroundColor: stop[1] }} />\n//           <span >{`${stop[0].toLocaleString()}`}</span>\n//         </div>\n//       );\n//     }\n\n   \n//     const renderOptions = (option, i) => {\n//       return (\n//         <label key={i} className=\"toggle-container  right  left px3 py3\">\n//           <input  onChange={() => this.setState({ active: options[i] })} checked={option.property === property} name=\"toggle\" type=\"radio\" />\n//           <div  className=\"toggle grid txt-s color-white right   left toggle--active-white\">{option.name}</div>\n//         </label>\n//       );\n//     }\n\n//     return (\n//       <div>\n//         <div ref={this.mapRef} className=\"absolute top right left bottom align-middle grid\" />\n//         <label className=\"ctxt-bold color-white absolute mt6 ml12\" ><b>Select Year:</b></label>\n//         <div  className=\"toggle-group grid ctxt-bold color-white absolute mt36 ml12 border border--2 border--white bg-transparent  shadow-darken10  absolute  \">\n//           {options.map(renderOptions)}\n//         </div>\n//         <div  className=\" bg-transparent color-white absolute bottom right mr12 mb24 py12 px12 border--white round border border--2 round shadow-darken10 z1 \">\n//           <div className='mb6 color-white'>\n//             <h2 className=\"txt-bold txt-s block color-white\">{name}</h2>\n//             <p className='txt-s color-white'>{description}</p>\n//           </div>\n//           {stops.map(renderLegendKeys)}\n//         </div>\n//       </div>\n    \n\n//       // <MapGL\n//       //   {...viewport}\n//       //   mapStyle=\"mapbox://styles/mapbox/dark-v9\"\n//       //   mapboxApiAccessToken={TOKEN} >\n//       //   {markers}\n//       //   {this.renderPopup()}\n//       //   <div className=\"nav\" style={navStyle}>\n//       //     <NavigationControl/>\n//       //     <Marker longitude={} latitude={} offsetTop={} offsetLeft={}>\n//       //       <Pin onClick={() => this.setState({popupInfo: popupInfo})}/>\n//       //     </Marker>\n//       //     </div>\n//       //   </div>\n//       // </MapGL>\n\n//       );\n      \n//   }\n// }\n\n// export default App;\n// export function renderToDom(container) {\n//   render(<App />, container);\n// }\n"]},"metadata":{},"sourceType":"module"}