{"version":3,"sources":["logo.svg","components/tooltip.js","App.js","index.js"],"names":["module","exports","Tooltip","features","this","props","className","map","feature","i","key","layer","id","React","Component","mapboxgl","accessToken","stops","options","name","description","property","App","mapRef","createRef","state","active","length","ReactDOM","render","createElement","tooltipContainer","unmountComponentAtNode","setFill","document","Map","container","current","style","center","zoom","on","addSource","type","data","addLayer","source","Marker","offset","setLngLat","addTo","popup","Popup","closeButton","closeOnClick","e","getCanvas","cursor","queryRenderedFeatures","point","prob_intro","properties","lngLat","setHTML","remove","setPaintProperty","ref","option","onChange","setState","checked","stop","backgroundColor","toLocaleString","getElementById"],"mappings":"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","file":"static/js/main.c0843b2e.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.1094cb6d.svg\";","import React from 'react'\nimport PropTypes from 'prop-types'\n\nexport default class Tooltip extends React.Component {\n\n  static propTypes = {\n    features: PropTypes.array.isRequired\n  };\n\n  render() {\n    const { features } = this.props;\n\n    const renderFeature = (feature, i) => {\n      return (\n        <div key={i}>\n          <strong className='mr3'>{feature.layer['source-layer']}:</strong>\n          <span className='color-gray-light'>{feature.layer.id}</span>\n        </div>\n      )\n    };\n\n    return (\n      <div className=\"flex-parent-inline flex-parent--center-cross flex-parent--column absolute bottom\">\n        <div className=\"flex-child px12 py12 bg-gray-dark color-white shadow-darken10 round txt-s w240 clip txt-truncate\">\n          {features.map(renderFeature)}\n        </div>\n        <span className=\"flex-child color-gray-dark triangle triangle--d\"></span>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport mapboxgl from 'mapbox-gl'\nimport data from './pandemic_output.json'\nimport Tooltip from './components/tooltip'\nimport ReactDOM from 'react-dom'\n\n\n\n  // return (\n  //   <div className=\"App\">\n  //     <header className=\"App-header\">\n  //       <img src={logo} className=\"App-logo\" alt=\"logo\" />\n  //       <p>\n  //         Edit <code>src/App.js</code> and save to reload.\n  //       </p>\n  //       <a\n  //         className=\"App-link\"\n  //         href=\"https://reactjs.org\"\n  //         target=\"_blank\"\n  //         rel=\"noopener noreferrer\"\n  //       >\n  //         Learn React\n  //       </a>\n  //     </header>\n  //   </div>\n  // );\n\n\n\n    \n\nmapboxgl.accessToken = 'pk.eyJ1IjoiZ2NtaWxsYXIiLCJhIjoiY2pvcDhrbGl4MDFvaTNrczR0d2hxcjdnNSJ9.JYgBw6y2pEq_AEAOCaoQpw';\n\n\nvar stops =  [\n  [0, 'rgba(45,69,132, 0.4)'],\t\n  // [0.1, 'rgba(45,19,13, 0.4)'], \n  [0.1, 'rgba(77,30,129, 0.4)'],\t\n  [0.2, 'rgba(109,41,126, 0.4)'],\t\t\t\n  [0.3, 'rgba(141,52,123, 0.4)'], \n  [0.4, 'rgba(173,63,120, 0.4)'],\t\n  [0.5, 'rgba(205,74,118, 0.4)'], \n  [0.6, 'rgba(210,103,103\t, 0.4)'],\t\t\n  [0.7, 'rgba(216,132,89,0.7)'], \n  [0.8, 'rgba(222,161,75, 0.4)'],\t\n  [0.9, 'rgba(228,190,61, 0.4)'],\n  [1, 'rgba(240,249,33, 0.4)']\n]\nconst options = [{\n  name: '1993',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T0',\n  stops: stops\n}, {\n  name: '1994',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T1',\n  stops: stops\n}, {\n  name: '1995',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T2',\n  stops: stops\n}, {\n  name: '1996',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T3',\n  stops: stops\n}, {\n  name: '1997',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T4',\n  stops: stops\n}, {\n  name: '1998',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T5',\n  stops: stops\n}, {\n  name: '1999',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T6',\n  stops: stops\n}, {\n  name: '2000',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T7',\n  stops: stops\n}, {\n  name: '2001',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T8',\n  stops: stops\n}, {\n  name: '2002',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T9',\n  stops: stops\n}, {\n  name: '2003',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T10',\n  stops: stops\n}, {\n  name: '2004',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T11',\n  stops: stops\n}, {\n  name: '2005',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T12',\n  stops: stops\n}, {\n  name: '2006',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T13',\n  stops: stops\n}, {\n  name: '2007',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T14',\n  stops: stops\n}, {\n  name: '2008',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T15',\n  stops: stops\n}, {\n  name: '2009',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T16',\n  stops: stops\n}, {\n  name: '2010',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T17',\n  stops: stops\n}, {\n  name: '2011',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T18',\n  stops: stops\n}, {\n  name: '2012',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T19',\n  stops: stops\n}, {\n  name: '2013',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T20',\n  stops: stops\n}, {\n  name: '2014',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T21',\n  stops: stops\n}, {\n  name: '2015',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T22',\n  stops: stops\n}, {\n  name: '2016',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T23',\n  stops: stops\n}, {\n  name: '2017',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T24',\n  stops: stops\n}, {\n  name: '2018',\n  description: 'Introduction Probability',\n  property: 'Probability of introduction T25',\n  stops: stops\n}\n]\n\nclass App extends React.Component {\n  mapRef = React.createRef();\n  map;\n  tooltipContainer;\n\n  setTooltip(features) {\n    if (features.length) {\n      ReactDOM.render(\n        React.createElement(\n          Tooltip, {\n            features\n          }\n        ),\n        this.tooltipContainer\n      );\n    } else {\n      ReactDOM.unmountComponentAtNode(this.tooltipContainer);\n    }\n  }\n\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      active: options[0]\n    };\n  }\n\n  componentDidUpdate() {\n    this.setFill();\n  }\n\n  componentDidMount() {\n    this.tooltipContainer = document.createElement('div');\n    this.map = new mapboxgl.Map({\n      container: this.mapRef.current,\n      style: 'mapbox://styles/gcmillar/ckc13n1qe3rgx1ilchl8u3xax',\n      // style: 'mapbox://styles/mapbox/dark-v10',\n      center: [12, 26],\n      zoom: 1.5,\n    });\n\n    this.map.on('load', () => {\n      this.map.addSource('countries', {\n        type: 'geojson',\n        data\n      });\n\n      this.map.addLayer({\n        id: 'countries',\n        type: 'fill',\n        source: 'countries'\n      },'country-label'); // ID metches `mapbox/streets-v9`\n\n      this.setFill();\n\n    \n\n   \n    });\n\n  // componentDidMount() {\n\n    // const map = new mapboxgl.Map({\n    //   container: this.mapRef.current,\n    //   style: 'mapbox://styles/gcmillar/ckc13n1qe3rgx1ilchl8u3xax',\n    //   // style: 'mapbox://styles/mapbox/dark-v10',\n    //   center: [12, 26],\n    //   zoom: 1.5,\n    // });\n    \n    const tooltip = new mapboxgl.Marker(this.tooltipContainer, {\n      offset: [-120, 0]\n    }).setLngLat([0,0]).addTo(this.map);\n\n    var popup = new mapboxgl.Popup({\n      // className: \"gray-dark\",\n      closeButton: false,\n      closeOnClick: false\n      });\n      // txt-code--dark\n\n      this.map.on('mouseenter', 'countries', (e) => {\n        this.map.getCanvas().style.cursor =  'pointer';\n        // popup.remove();\n      });\n    this.map.on('click', 'countries', (e) => {\n      const features = this.map.queryRenderedFeatures(e.point, {\n       \n      });\n      // console.log(features[0].properties);\n      const { name, description, stops, property } = this.state.active;\n      // console.log(property);\n      const prob_intro = features[0].properties[property]\n      // this.map.getCanvas().style.cursor =  'pointer';\n      this.map.getCanvas().style.cursor = features.length ? 'pointer' : '';\n      popup \n      .setLngLat(e.lngLat)\n       .setHTML('<b><u>Country Information' + '</b></u>' +\n          '<ul>' +\n          '<li><b>Name: </b>' + features[0].properties[\"NAME\"] + '</li>' +\n          '<li><b>Introduction Probability: </b>' + prob_intro  + '</li>' +\n          '</ul>')\n      .addTo(this.map);\n    });\n    this.map.on('mouseleave', 'countries', (e) => {\n      this.map.getCanvas().style.cursor =  '';\n      popup.remove();\n    });\n  }\n\n  setFill() {\n    const { property, stops } = this.state.active;\n    this.map.setPaintProperty('countries', 'fill-color', {\n      property,\n      stops\n    },\n    )\n    this.map.setPaintProperty('countries', 'fill-outline-color', {\n      property,\n      stops\n    },\n    );    \n  }\n\n  render() {\n    const { name, description, stops, property } = this.state.active;\n    const renderLegendKeys = (stop, i) => {\n      return (\n        <div key={i} className='txt-s '>\n          <span className=' round-full w12 h12 inline-block ' style={{ backgroundColor: stop[1] }} />\n          <span >{`${stop[0].toLocaleString()}`}</span>\n        </div>\n      );\n    }\n\n   \n    const renderOptions = (option, i) => {\n      return (\n        <label key={i} className=\"toggle-container  right  left px3 py3\">\n          <input  onChange={() => this.setState({ active: options[i] })} checked={option.property === property} name=\"toggle\" type=\"radio\" />\n          <div  className=\"toggle grid txt-s color-white right   left toggle--active-white\">{option.name}</div>\n        </label>\n      );\n    }\n\n    return (\n      <div>\n        <div ref={this.mapRef} className=\"absolute top right left bottom align-middle grid\" />\n        <label className=\"ctxt-bold color-white absolute mt6 ml12\" >Select Year:</label>\n        <div  className=\"toggle-group grid ctxt-bold color-white absolute mt36 ml12 border border--2 border--white bg-transparent  shadow-darken10  absolute  \">\n          {options.map(renderOptions)}\n        </div>\n        <div  className=\" bg-transparent color-white absolute bottom right mr12 mb24 py12 px12 border--white round border border--2 round shadow-darken10 z1 \">\n          <div className='mb6 color-white'>\n            <h2 className=\"txt-bold txt-s block color-white\">{name}</h2>\n            <p className='txt-s color-white'>{description}</p>\n          </div>\n          {stops.map(renderLegendKeys)}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport mapboxgl from 'mapbox-gl'\nimport data from './pandemic_output.json'\n\nimport App from './App';\n\nReactDOM.render( <App /> , document.getElementById(\"root\"))\n"],"sourceRoot":""}